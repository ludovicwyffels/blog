{"componentChunkName":"component---src-templates-post-tsx","path":"/node-logging/","webpackCompilationHash":"14203405aa3f8f0b714d","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQY023PvUrDUBTA8ZuCtoMoOLQ4dWhN14x2kEKXFkGoohQ/QBexOHRycAidKkgHHRq69APRoTjFJYODIA6+gSBYfYMmfYLE/5VT6NALP845NyeHc9UoCHZRQvonCLKKE4ZhAXYURTsYoE9dIy5iCzfUJnEdV+RF4iu6ikFH2EPxazzOcJmg4Rnn5C8ysIEOHqTe5/sT3qXOwYOtRr5/wLAqzpCTDXu4p2ETtyjgGJ/cX+se8jeU9fa4RBt5vWENpjzdkoGPcGg4RQsbOMEFmnBRRwVDHEK/yFXfvr/CoPjvZLKcdByDyzWGeajigzorGy0oOeRJiUtITe/pX1XzDk3buIMltSFR/zTtic3060X+8z8PsEUt8G3LVQAAAABJRU5ErkJggg==","width":400,"height":128,"src":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png","srcSet":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png 1x"}}},"markdownRemark":{"html":"<p>La journalisation est quelque chose que chaque développeur fait depuis ses débuts en programmation, mais très peu connaissent la valeur qu’elle peut produire et les meilleures pratiques.</p>\n<p>Dans ce billet, nous aborderons les sujets suivants :</p>\n<ul>\n<li>Quels sont les journaux et quelle est leur importance ?</li>\n<li>Meilleures pratiques à consigner</li>\n<li>Parties importantes de la journalisation</li>\n<li>Utilisation correcte des niveaux de journalisation</li>\n<li>Pourquoi Winston ?</li>\n</ul>\n<h2>Quels sont les journaux et leur importance ?</h2>\n<p>Les journaux sont les événements qui reflètent les différents aspects de votre application, c’est le mode le plus facile de dépannage et de diagnostic de votre application, si elle est correctement écrite par l’équipe.</p>\n<p>Lorsque vous démarrez un serveur Node.Js et que la base de données ne fonctionne pas ou s’arrête brusquement en raison d’un problème ou que le port du serveur est déjà utilisé, s’il n’y a pas de journaux, vous ne saurez jamais pourquoi le serveur a échoué.</p>\n<p>Souvent, en tant que développeur, vous avez besoin de déboguer un problème, nous utilisons volontiers le débogueur et les points d’arrêt pour comprendre où et ce qui a cassé.</p>\n<p>Que feriez-vous lorsque votre application est en production ? Pouvez-vous y attacher un débogueur et rejouer autour du bogue ? Évidemment non. C’est donc ici que l’enregistrement vous aidera.</p>\n<blockquote>\n<p>Vous n’obtiendrez une configuration de journalisation idéale que si, sans utiliser le débogueur, vous pouvez trouver un problème en parcourant les journaux et que vous savez ce qui s’est mal passé et où.</p>\n</blockquote>\n<h2>Meilleures pratiques</h2>\n<h3>1) Trois parties importantes des billes de bois</h3>\n<p>Les journaux d’application sont à la fois pour l’homme et pour les machines. Les humains se réfèrent aux journaux pour déboguer le problème et les machines utilisent les journaux pour générer divers tableaux de bord et graphiques et pour l’analyse des données afin de produire diverses conclusions sur les usages des clients.</p>\n<p>Chaque bûche doit contenir les trois parties les plus importantes :</p>\n<ul>\n<li>\n<p><strong>Source du log</strong></p>\n<p>Quand nous avons une architecture de microservices, il devient vraiment crucial de connaître la source du journal, les informations comme le nom du service, la zone, le nom d’hôte, etc.</p>\n<p>Les métadonnées détaillées sur la source sont principalement gérées par l’agent expéditeur de logs, qui transfère les logs de tous les microservices vers le système de logging centralisé.</p>\n</li>\n<li>\n<p><strong>Timestamp</strong></p>\n<p>Le moment où un événement s’est produit ou un journal a été généré est vraiment important. Par conséquent, assurez-vous que chaque journal a un timestamp afin que nous puissions trier et filtrer.</p>\n</li>\n<li>\n<p><strong>Niveau et contexte</strong></p>\n<p>Lorsque vous parcourez les journaux pour trouver l’erreur, si le journal ne fournit pas suffisamment d’informations et si vous devez vous référer au code pour comprendre, ce serait très frustrant. Par conséquent, lors de la journalisation, nous devrions passer suffisamment de contexte.</p>\n<p>Par exemple, un journal sans contexte ressemblerait à ce qui suit : <code>The operation failed!</code></p>\n<p>Le meilleur exemple avec un contexte significatif serait : <code>Failed to create user, as the user id already exist</code></p>\n</li>\n</ul>\n<h3>2) Que faut-il consigner et comment le faire ?</h3>\n<ul>\n<li>\n<p><strong>Enregistrement des méthodes et des données d’entrée :</strong></p>\n<p>En déboguant le problème, si nous apprenons à savoir quelle fonction a été appelée et quels paramètres ont été passés, cela nous aidera vraiment.</p>\n</li>\n</ul>\n<p><div id=\"gist98157681\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-entry-function-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-entry-function-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-entry-function-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">logger</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>../logSetup<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-entry-function-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-entry-function-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">getInstallment</span>(<span class=\"pl-smi\">month</span>: <span class=\"pl-smi\">number</span>, <span class=\"pl-smi\">count</span>: <span class=\"pl-smi\">number</span> ): <span class=\"pl-smi\">number</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-entry-function-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">`</span>&gt;&gt;&gt;&gt; Entering getInstallment(month = ${<span class=\"pl-smi\">month</span>}, count= ${<span class=\"pl-smi\">count</span>}<span class=\"pl-pds\">`</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-entry-function-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-entry-function-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//</span> process</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-entry-function-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-entry-function-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\"><span class=\"pl-k\">const</span></span> installment<span class=\"pl-k\">:</span> <span class=\"pl-c1\">number</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">3</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-entry-function-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>&lt;&lt;&lt;&lt; Exiting getIntallment()<span class=\"pl-pds\">&#39;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-entry-function-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return</span> <span class=\"pl-smi\">installment</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-entry-function-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-entry-function-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/a6e045f81aada8de51b4c67b3f706cdf/raw/833776e296372f329e5359de3806875b9cf50da6/log-entry-function.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/a6e045f81aada8de51b4c67b3f706cdf#file-log-entry-function-ts\">log-entry-function.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>En parcourant les journaux <code>>>>>></code> et <code>&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;</code>, vous obtiendrez un aperçu de haut niveau de l’entrée et de la sortie d’une fonction. Ceci est inspiré par le conflit de merge de git.</p>\n<ul>\n<li>\n<p>Le journal ne doit pas être évalué pour supprimer une exception</p>\n<p>Dans la ligne #8, le <code>userService.getUser()</code> peut retourner null et <code>.getId()</code> peut lancer une exception, donc veuillez éviter ce genre de scénarios.</p>\n</li>\n</ul>\n<p><div id=\"gist98157735\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-exception-function-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-exception-function-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-exception-function-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">logger</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>../logSetup<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-exception-function-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-exception-function-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">processLoan</span>(<span class=\"pl-k\">...</span>) {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-exception-function-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&gt;&gt;&gt;&gt; Entering processLoan()<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-exception-function-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">  </td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-exception-function-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//</span> ... process</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-exception-function-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-exception-function-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">`</span>Processing user loan with id ${<span class=\"pl-smi\">userService</span>.<span class=\"pl-en\">getUser</span>().<span class=\"pl-en\">getId</span>()}<span class=\"pl-pds\">`</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-exception-function-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//</span> this might throw error, when getUser returns undefined</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-exception-function-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">  </td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-exception-function-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&lt;&lt;&lt;&lt; Exiting processLoan()<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-log-exception-function-ts-LC12\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return</span> <span class=\"pl-c1\">true</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-function-ts-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-log-exception-function-ts-LC13\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/93fcfffae2d53af76462b13fdd0f35df/raw/915ad6707490339e4a54f8a0cc8bd8d922eeece6/log-exception-function.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/93fcfffae2d53af76462b13fdd0f35df#file-log-exception-function-ts\">log-exception-function.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Vous devez utiliser <a href=\"https://github.com/mgechev/aspect.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">aspect.js</a> pour automatiser les journaux des niveaux de fonction.</p>\n<ul>\n<li>\n<p><strong>La journalisation ne doit pas produire d’effet secondaire</strong></p>\n<p>Le journal doit être anonyme et ne doit produire aucun effet secondaire. Par exemple, la ligne d’enregistrement #8 suivante créera une nouvelle ressource dans la base de données.</p>\n</li>\n</ul>\n<p><div id=\"gist98157751\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-stateless-function-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-stateless-function-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">logger</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>../logSetup<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-stateless-function-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-stateless-function-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">createUser</span>() {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-stateless-function-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>&gt;&gt;&gt;&gt; Entering createUser<span class=\"pl-pds\">&quot;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-stateless-function-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-stateless-function-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-c\"><span class=\"pl-c\">//</span> ... process</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-stateless-function-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-stateless-function-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">debug</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Saving user loan {}<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-smi\">userInfoRepository</span>.<span class=\"pl-en\">save</span>(<span class=\"pl-smi\">userInfo</span>)) <span class=\"pl-c\"><span class=\"pl-c\">//</span> don&#39;t do this</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-stateless-function-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-stateless-function-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">return</span> <span class=\"pl-c1\">true</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-stateless-function-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-stateless-function-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/04e7fd5e9994f56c8634eb53bb0f4851/raw/f6c766a4f8b2a337f32e6ccd35a0006fb55cab6c/log-stateless-function.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/04e7fd5e9994f56c8634eb53bb0f4851#file-log-stateless-function-ts\">log-stateless-function.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<ul>\n<li>\n<p><strong>Enregistrer les erreurs avec détails</strong></p>\n<p>Lorsqu’il y a une erreur, soyez descriptif, mentionnez ce qui a été tenté et pourquoi elle a échoué.</p>\n<p>Consigner ce qui a échoué et ce que vous faites ensuite.</p>\n</li>\n</ul>\n<p><div id=\"gist98157794\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-error-function-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-error-function-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-error-function-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">logger</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>../logSetup<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-error-function-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-error-function-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">processLoan</span>(<span class=\"pl-smi\">id</span>: <span class=\"pl-smi\">number</span>, <span class=\"pl-smi\">userId</span>: <span class=\"pl-smi\">number</span>) {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-error-function-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">try</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-error-function-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">getLoanDeatilsById</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-error-function-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  } <span class=\"pl-k\">catch</span>(<span class=\"pl-smi\">error</span>) {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-error-function-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">error</span>(<span class=\"pl-s\"><span class=\"pl-pds\">`</span>Failed to do getLoanDetails with id ${<span class=\"pl-smi\">id</span>}, ignoring it and trying to getLoanDetailsByUserId<span class=\"pl-pds\">`</span></span>, <span class=\"pl-smi\">error</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-error-function-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//</span> good example: provide what failed, and how you are handling. </span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-error-function-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//</span> e.g here on fail I am trying to call other function</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-error-function-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">getLoanDetailsByUserId</span>();</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-error-function-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">  }</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-error-function-ts-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-log-error-function-ts-LC12\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/fdd1c48e9075058256bd5c7cc42b50f1/raw/4f412485df26690e2bdefe00c06aa02a6a661536/log-error-function.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/fdd1c48e9075058256bd5c7cc42b50f1#file-log-error-function-ts\">log-error-function.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Dans le cas où vous renvoyez l’erreur dans la section <code>catch</code>, veuillez noter quelle opération a échoué et mentionner que vous renvoyez l’erreur telle quelle.</p>\n<p><div id=\"gist98157810\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-exception-trow-function-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">logger</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>../logSetup<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-en\">processLoan</span>(<span class=\"pl-smi\">id</span>: <span class=\"pl-smi\">number</span>, <span class=\"pl-smi\">userId</span>: <span class=\"pl-smi\">number</span>) {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-k\">try</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-en\">getLoanDeatilsById</span>()</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  } <span class=\"pl-k\">catch</span>(<span class=\"pl-smi\">error</span>) {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-smi\">log</span>.<span class=\"pl-en\">error</span>(<span class=\"pl-s\"><span class=\"pl-pds\">`</span>Failed to do getLoanDetails with id ${<span class=\"pl-smi\">id</span>} hence throwing error<span class=\"pl-pds\">`</span></span>, <span class=\"pl-smi\">error</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//</span> good example: provide what failed, and how you are handling. </span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-c\"><span class=\"pl-c\">//</span> e.g here on fail I am throwing</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">throw</span> <span class=\"pl-smi\">error</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">  }</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-exception-trow-function-ts-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-log-exception-trow-function-ts-LC12\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/a1a490f44de0713146543b7281ae18c6/raw/77136e06a7f9d3c206201a4e36196af2a12d8073/log-exception-trow-function.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/a1a490f44de0713146543b7281ae18c6#file-log-exception-trow-function-ts\">log-exception-trow-function.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<h3>3) Informations sensibles</h3>\n<p>La série de log devrait refléter les activités d’un utilisateur dans l’application afin que le débogage puisse être plus facile et devrait enregistrer les erreurs afin que l’action puisse être prise dès que possible. Les journaux contiennent des informations telles que la fonction appelée avec quelles entrées, où et quelle erreur s’est produite, etc.</p>\n<p>Lors de l’enregistrement, nous devons nous assurer de ne pas enregistrer les informations sensibles comme le nom d’utilisateur et le mot de passe, les informations financières comme le numéro de carte, le numéro CVV, etc.\nEn tant que développeurs, nous devrions demander et consulter l’équipe produit pour préparer une liste d’informations sensibles et les masquer avant de les enregistrer.</p>\n<h3>4) Utilisation correcte des niveaux de notation</h3>\n<p>Si les applications de production ont un nombre raisonnablement élevé de transactions d’utilisateurs, par jour, la configuration idéale des logs peut générer des gigaoctets de logs, d’où la nécessité de classer nos logs en plusieurs groupes. Ainsi, en fonction de l’audience, nous pouvons activer le niveau de journalisation en temps réel, et n’obtenir que les journaux appropriés.</p>\n<p>Par exemple, si un chef de produit veut voir combien de transactions clients sont réussies ou échouées dans notre tableau de bord de journalisation, il ne devrait pas se voir afficher des informations encombrées d’appels de fonction sur divers qui est seulement pour les développeurs. Et quand il y a un bogue dans la production, le développeur devrait voir les journaux détaillés des différentes fonctions qui ont été exécutées avec succès et qui ont échoué. Pour que le problème puisse être identifié et corrigé le plus rapidement possible.</p>\n<p>Pour réaliser ce type d’installation, nous avons besoin d’avoir une meilleure compréhension de chaque niveau de journalisation.</p>\n<p>Discutons des niveaux les plus importants et de leurs usages :</p>\n<ul>\n<li>\n<p><strong>INFO</strong>: Quelques messages importants, des messages d’événements qui décrivent quand une tâche est terminée. Par exemple : <code>New User creaded with id xxx</code></p>\n<p>Il s’agit d’un simple journal d’information sur l’avancement des travaux.</p>\n</li>\n<li><strong>DEBUG</strong>: Ce niveau est destiné aux développeurs, c’est similaire à l’enregistrement des informations que vous voyez lorsque vous utilisez le débogueur ou le point d’arrêt, comme quelle fonction a été appelée et quels paramètres ont été passés, etc. Il devrait avoir l’état actuel de sorte qu’il puisse être utile lors du débogage et de la recherche du problème exact.</li>\n<li><strong>WARN</strong>: Ces journaux sont les avertissements et ne bloquent pas l’application pour continuer, ils fournissent des alertes lorsque quelque chose ne va pas et que la solution de contournement est utilisée, par exemple une entrée utilisateur erronée, des tentatives répétées, etc. Les administrateurs devraient corriger ces avertissements à l’avenir.</li>\n<li>\n<p><strong>ERROR</strong> : Quelque chose de mal s’est produit et devrait faire l’objet d’une enquête prioritaire. Par exemple, la base de données est en panne, la communication avec d’autres microservices a échoué ou l’entrée requise n’a pas été définie.</p>\n<p>Les principaux publics visés sont les opérateurs système ou les systèmes de surveillance.</p>\n</li>\n</ul>\n<blockquote>\n<p>Idéalement, l’application de production devrait avoir des journaux d’erreurs proches de zéro.</p>\n</blockquote>\n<h3>5) Ne pas utiliser <code>console.log</code></h3>\n<p>La plupart des développeurs ont utilisé le module de console comme premier outil pour obtenir les logs ou déboguer le code, car il est facile à utiliser, disponible globalement et aucune configuration n’est nécessaire. Dans Node.Js, la console est implémentée différemment que dans les navigateurs, le module de console imprime le message dans stdout lorsque vous utilisez <code>console.log</code> et si vous utilisez <code>console.error</code>, il imprimera dans stderr.</p>\n<p><code>console.log</code>, <code>console.debug</code> et <code>console.info</code> s’imprime dans stdout, donc nous ne pourrons pas désactiver ou sur debug et info. De même, <code>console.warn</code> et <code>console.error</code> s’impriment tous deux dans stderr.\nLa bascule des différents niveaux est difficile pour l’application de production.</p>\n<p>Nous avons également besoin de différents types de configuration comme le format standard, le format de sortie JSON à envoyer à la stack ELK, et ceux-ci ne sont pas disponibles dans la console prête à l’emploi.</p>\n<p>Pour surmonter tous ces problèmes, nous allons utiliser <a href=\"https://www.npmjs.com/package/winston\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Winston</a> framework de journalisation, d’autres options sont également disponibles comme <a href=\"https://www.npmjs.com/package/log4js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">log4js</a>, <a href=\"https://github.com/trentm/node-bunyan\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Bunyan</a>, <a href=\"https://getpino.io/#/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pino</a>, etc</p>\n<p><strong>Pourquoi avons-nous besoin d’une bibliothèque de journalisation comme Winston ?</strong></p>\n<p>Comme dans la dernière section, nous avons discuté de quelques défauts de la console, énumérons quelques fonctionnalités importantes fournies par Winston :</p>\n<ul>\n<li>\n<p><strong>Niveaux</strong>: Winston est livré avec quelques jeux de niveaux de logs et imprime également le niveau comme la partie du log, ce qui nous permettra de filtrer les logs dans notre tableau de bord centralisé.</p>\n<p>Par exemple <code>{message : \"something wrong\", level : \"error\"}</code></p>\n<p>Vous pouvez également créer des niveaux personnalisés si nécessaire.</p>\n</li>\n<li><strong>Formats</strong>: Winston a quelques configurations avancées, comme donner des couleurs aux logs, formatage en JSON, etc.</li>\n<li><strong>Modifier dynamiquement les niveaux de journalisation</strong>: Nous aurons l’avertissement et l’erreur activés dans notre application de production, et quand nécessaire, nous avons besoin de la fonctionnalité pour changer le niveau de journal pour déboguer et revenir à l’erreur, selon le besoin, sans redémarrer l’application. L’enregistreur Winston est livré avec cette fonction prête à l’emploi.</li>\n</ul>\n<p><div id=\"gist98159515\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-change-level-dynamically-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-c\"><span class=\"pl-c\">//</span> log setup</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">winston</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>winston<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\"><span class=\"pl-k\">const</span></span> transports <span class=\"pl-k\">=</span> {</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">  console: <span class=\"pl-k\">new</span> <span class=\"pl-en\">winston</span>.<span class=\"pl-en\">transports</span>.<span class=\"pl-en\">Console</span>({ level: <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>warn<span class=\"pl-pds\">&#39;</span></span> }),</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">};</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\"><span class=\"pl-k\">const</span></span> logger <span class=\"pl-k\">=</span> <span class=\"pl-smi\">winston</span>.<span class=\"pl-en\">createLogger</span>({</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">  transports: [<span class=\"pl-smi\">transports</span>.<span class=\"pl-smi\">console</span>, <span class=\"pl-smi\">transports</span>.<span class=\"pl-smi\">file</span>]</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">});</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">info</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>This will not be logged in console transport because warn is set!<span class=\"pl-pds\">&#39;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC13\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">transports</span>.<span class=\"pl-smi\">console</span>.<span class=\"pl-smi\">level</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>info<span class=\"pl-pds\">&#39;</span></span>; <span class=\"pl-c\"><span class=\"pl-c\">//</span> changed the level</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC15\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-smi\">logger</span>.<span class=\"pl-en\">info</span>(<span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>This will be logged in now!<span class=\"pl-pds\">&#39;</span></span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC17\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-change-level-dynamically-ts-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-log-change-level-dynamically-ts-LC18\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">export</span> <span class=\"pl-k\">default</span> {<span class=\"pl-smi\">logger</span>, <span class=\"pl-smi\">transport</span>}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/83041af3c695c6fb4aa5604c95ac77ec/raw/06527308192962338ec4c917d7e35c5feb728b94/log-change-level-dynamically.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/83041af3c695c6fb4aa5604c95ac77ec#file-log-change-level-dynamically-ts\">log-change-level-dynamically.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Nous pouvons aussi exposer une API pour changer le niveau dynamiquement, exposer l’API REST et dans le handler exécuter la ligne #14 pour changer le niveau.</p>\n<ul>\n<li><strong>Transport</strong>: Pour notre environnement de production, nous aimerions avoir un système de journalisation centralisé où tous nos microservices poussent les logs, et nous aurons le tableau de bord, le filtrage et la recherche des logs. Il s’agit de la configuration standard ELK ou d’une configuration équivalente.</li>\n</ul>\n<p><div id=\"gist98159533\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-log-transport-file-ts\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-typescript \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-log-transport-file-ts-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-log-transport-file-ts-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">import</span> <span class=\"pl-smi\">winston</span> <span class=\"pl-k\">from</span> <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>winston<span class=\"pl-pds\">&#39;</span></span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-log-transport-file-ts-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-log-transport-file-ts-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\"><span class=\"pl-k\">const</span></span> logger <span class=\"pl-k\">=</span> <span class=\"pl-smi\">winston</span>.<span class=\"pl-en\">createLogger</span>({</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-log-transport-file-ts-LC4\" class=\"blob-code blob-code-inner js-file-line\">  level: <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>info<span class=\"pl-pds\">&#39;</span></span>,</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-log-transport-file-ts-LC5\" class=\"blob-code blob-code-inner js-file-line\">  format: <span class=\"pl-smi\">winston</span>.<span class=\"pl-smi\">format</span>.<span class=\"pl-en\">json</span>(),</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-log-transport-file-ts-LC6\" class=\"blob-code blob-code-inner js-file-line\">  transports: [</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-log-transport-file-ts-LC7\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">new</span> <span class=\"pl-en\">winston</span>.<span class=\"pl-en\">transports</span>.<span class=\"pl-en\">File</span>({ filename: <span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>stdout.log<span class=\"pl-pds\">&#39;</span></span> })</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-log-transport-file-ts-LC8\" class=\"blob-code blob-code-inner js-file-line\">  ]</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-log-transport-file-ts-LC9\" class=\"blob-code blob-code-inner js-file-line\">});</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-log-transport-file-ts-LC10\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-log-transport-file-ts-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-log-transport-file-ts-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">export</span> <span class=\"pl-k\">default</span> <span class=\"pl-smi\">logger</span>;</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/ludovicwyffels/bf2d41e1833699baf1fc2b28901f8a44/raw/4c373e0f5002e7c4feae2b9ffccbce78ed5be555/log-transport-file.ts\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/ludovicwyffels/bf2d41e1833699baf1fc2b28901f8a44#file-log-transport-file-ts\">log-transport-file.ts</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Winston est livré avec la configuration pour écrire nos journaux dans un fichier de sorte que tout agent expéditeur de journaux puisse pousser les journaux vers le système centralisé.</p>\n<h3>6) Incidence sur le rendement</h3>\n<p>Si la fréquence d’écriture du journal de l’application est élevée, cela peut avoir un impact direct sur les performances de l’application.</p>\n<p>Le niveau debug et info contribue à plus de 95% des logs, c’est pourquoi nous devrions seulement activer le niveau d’erreur et d’avertissement, et changer le niveau pour déboguer quand nous voulons résoudre le problème et le ramener sur l’erreur.</p>\n<p>Les journaux sont un sauveur de vie quand il y a un problème sur l’application. Si vous n’avez pas actuellement de pratiques d’enregistrement, encadrez une pratique d’enregistrement et ajoutez les enregistrements obligatoires dans la liste de contrôle de l’examen du code.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"La journalisation est quelque chose que chaque développeur fait depuis ses débuts en programmation, mais très peu connaissent la valeur qu’elle peut produire et les meilleures pratiques."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dans ce billet, nous aborderons les sujets suivants :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Quels sont les journaux et quelle est leur importance ?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Meilleures pratiques à consigner"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Parties importantes de la journalisation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utilisation correcte des niveaux de journalisation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Pourquoi Winston ?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Quels sont les journaux et leur importance ?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Les journaux sont les événements qui reflètent les différents aspects de votre application, c’est le mode le plus facile de dépannage et de diagnostic de votre application, si elle est correctement écrite par l’équipe."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lorsque vous démarrez un serveur Node.Js et que la base de données ne fonctionne pas ou s’arrête brusquement en raison d’un problème ou que le port du serveur est déjà utilisé, s’il n’y a pas de journaux, vous ne saurez jamais pourquoi le serveur a échoué."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Souvent, en tant que développeur, vous avez besoin de déboguer un problème, nous utilisons volontiers le débogueur et les points d’arrêt pour comprendre où et ce qui a cassé."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Que feriez-vous lorsque votre application est en production ? Pouvez-vous y attacher un débogueur et rejouer autour du bogue ? Évidemment non. C’est donc ici que l’enregistrement vous aidera."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vous n’obtiendrez une configuration de journalisation idéale que si, sans utiliser le débogueur, vous pouvez trouver un problème en parcourant les journaux et que vous savez ce qui s’est mal passé et où."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Meilleures pratiques"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"1) Trois parties importantes des billes de bois"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Les journaux d’application sont à la fois pour l’homme et pour les machines. Les humains se réfèrent aux journaux pour déboguer le problème et les machines utilisent les journaux pour générer divers tableaux de bord et graphiques et pour l’analyse des données afin de produire diverses conclusions sur les usages des clients."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Chaque bûche doit contenir les trois parties les plus importantes :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Source du log"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Quand nous avons une architecture de microservices, il devient vraiment crucial de connaître la source du journal, les informations comme le nom du service, la zone, le nom d’hôte, etc."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Les métadonnées détaillées sur la source sont principalement gérées par l’agent expéditeur de logs, qui transfère les logs de tous les microservices vers le système de logging centralisé."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Timestamp"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Le moment où un événement s’est produit ou un journal a été généré est vraiment important. Par conséquent, assurez-vous que chaque journal a un timestamp afin que nous puissions trier et filtrer."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Niveau et contexte"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lorsque vous parcourez les journaux pour trouver l’erreur, si le journal ne fournit pas suffisamment d’informations et si vous devez vous référer au code pour comprendre, ce serait très frustrant. Par conséquent, lors de la journalisation, nous devrions passer suffisamment de contexte."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Par exemple, un journal sans contexte ressemblerait à ce qui suit : "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"The operation failed!"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Le meilleur exemple avec un contexte significatif serait : "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Failed to create user, as the user id already exist"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2) Que faut-il consigner et comment le faire ?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Enregistrement des méthodes et des données d’entrée :"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"En déboguant le problème, si nous apprenons à savoir quelle fonction a été appelée et quels paramètres ont été passés, cela nous aidera vraiment."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98157681","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-entry-function-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"../logSetup"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getInstallment"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"month"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"count"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" ): "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]},{"type":"text","value":">>>> Entering getInstallment(month = ${"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"month"}]},{"type":"text","value":"}, count= ${"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"count"}]},{"type":"text","value":"}"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" process"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"const"}]}]},{"type":"text","value":" installment"},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-c1"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-c1"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"log"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"<<<< Exiting getIntallment()"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"installment"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-entry-function-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/a6e045f81aada8de51b4c67b3f706cdf/raw/833776e296372f329e5359de3806875b9cf50da6/log-entry-function.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/a6e045f81aada8de51b4c67b3f706cdf#file-log-entry-function-ts"},"children":[{"type":"text","value":"log-entry-function.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"En parcourant les journaux "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":">>>>>"}]},{"type":"text","value":" et "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"<<<<<"}]},{"type":"text","value":", vous obtiendrez un aperçu de haut niveau de l’entrée et de la sortie d’une fonction. Ceci est inspiré par le conflit de merge de git."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Le journal ne doit pas être évalué pour supprimer une exception"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dans la ligne #8, le "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"userService.getUser()"}]},{"type":"text","value":" peut retourner null et "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".getId()"}]},{"type":"text","value":" peut lancer une exception, donc veuillez éviter ce genre de scénarios."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98157735","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-exception-function-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"../logSetup"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"processLoan"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"..."}]},{"type":"text","value":") {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":">>>> Entering processLoan()"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" ... process"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]},{"type":"text","value":"Processing user loan with id ${"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"userService"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getUser"}]},{"type":"text","value":"()."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getId"}]},{"type":"text","value":"()}"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" this might throw error, when getUser returns undefined"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"<<<< Exiting processLoan()"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L12","className":["blob-num","js-line-number"],"dataLineNumber":"12"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC12","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-c1"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-L13","className":["blob-num","js-line-number"],"dataLineNumber":"13"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-function-ts-LC13","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/93fcfffae2d53af76462b13fdd0f35df/raw/915ad6707490339e4a54f8a0cc8bd8d922eeece6/log-exception-function.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/93fcfffae2d53af76462b13fdd0f35df#file-log-exception-function-ts"},"children":[{"type":"text","value":"log-exception-function.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vous devez utiliser "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/mgechev/aspect.js","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"aspect.js"}]},{"type":"text","value":" pour automatiser les journaux des niveaux de fonction."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"La journalisation ne doit pas produire d’effet secondaire"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Le journal doit être anonyme et ne doit produire aucun effet secondaire. Par exemple, la ligne d’enregistrement #8 suivante créera une nouvelle ressource dans la base de données."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98157751","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-stateless-function-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"../logSetup"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"createUser"}]},{"type":"text","value":"() {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":">>>> Entering createUser"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" ... process"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"debug"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"Saving user loan {}"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"\""}]}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"userInfoRepository"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"save"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"userInfo"}]},{"type":"text","value":")) "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" don't do this"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-c1"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-stateless-function-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/04e7fd5e9994f56c8634eb53bb0f4851/raw/f6c766a4f8b2a337f32e6ccd35a0006fb55cab6c/log-stateless-function.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/04e7fd5e9994f56c8634eb53bb0f4851#file-log-stateless-function-ts"},"children":[{"type":"text","value":"log-stateless-function.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Enregistrer les erreurs avec détails"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lorsqu’il y a une erreur, soyez descriptif, mentionnez ce qui a été tenté et pourquoi elle a échoué."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Consigner ce qui a échoué et ce que vous faites ensuite."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98157794","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-error-function-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"../logSetup"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"processLoan"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"userId"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":") {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getLoanDeatilsById"}]},{"type":"text","value":"()"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  } "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":") {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"log"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]},{"type":"text","value":"Failed to do getLoanDetails with id ${"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":"}, ignoring it and trying to getLoanDetailsByUserId"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" good example: provide what failed, and how you are handling. "}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" e.g here on fail I am trying to call other function"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getLoanDetailsByUserId"}]},{"type":"text","value":"();"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  }"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-L12","className":["blob-num","js-line-number"],"dataLineNumber":"12"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-error-function-ts-LC12","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/fdd1c48e9075058256bd5c7cc42b50f1/raw/4f412485df26690e2bdefe00c06aa02a6a661536/log-error-function.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/fdd1c48e9075058256bd5c7cc42b50f1#file-log-error-function-ts"},"children":[{"type":"text","value":"log-error-function.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dans le cas où vous renvoyez l’erreur dans la section "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":", veuillez noter quelle opération a échoué et mentionner que vous renvoyez l’erreur telle quelle."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98157810","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-exception-trow-function-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"../logSetup"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"processLoan"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"userId"}]},{"type":"text","value":": "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":") {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"getLoanDeatilsById"}]},{"type":"text","value":"()"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  } "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":") {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"log"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]},{"type":"text","value":"Failed to do getLoanDetails with id ${"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":"} hence throwing error"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"`"}]}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" good example: provide what failed, and how you are handling. "}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" e.g here on fail I am throwing"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"error"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  }"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-L12","className":["blob-num","js-line-number"],"dataLineNumber":"12"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-exception-trow-function-ts-LC12","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/a1a490f44de0713146543b7281ae18c6/raw/77136e06a7f9d3c206201a4e36196af2a12d8073/log-exception-trow-function.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/a1a490f44de0713146543b7281ae18c6#file-log-exception-trow-function-ts"},"children":[{"type":"text","value":"log-exception-trow-function.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"3) Informations sensibles"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"La série de log devrait refléter les activités d’un utilisateur dans l’application afin que le débogage puisse être plus facile et devrait enregistrer les erreurs afin que l’action puisse être prise dès que possible. Les journaux contiennent des informations telles que la fonction appelée avec quelles entrées, où et quelle erreur s’est produite, etc."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lors de l’enregistrement, nous devons nous assurer de ne pas enregistrer les informations sensibles comme le nom d’utilisateur et le mot de passe, les informations financières comme le numéro de carte, le numéro CVV, etc.\nEn tant que développeurs, nous devrions demander et consulter l’équipe produit pour préparer une liste d’informations sensibles et les masquer avant de les enregistrer."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"4) Utilisation correcte des niveaux de notation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Si les applications de production ont un nombre raisonnablement élevé de transactions d’utilisateurs, par jour, la configuration idéale des logs peut générer des gigaoctets de logs, d’où la nécessité de classer nos logs en plusieurs groupes. Ainsi, en fonction de l’audience, nous pouvons activer le niveau de journalisation en temps réel, et n’obtenir que les journaux appropriés."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Par exemple, si un chef de produit veut voir combien de transactions clients sont réussies ou échouées dans notre tableau de bord de journalisation, il ne devrait pas se voir afficher des informations encombrées d’appels de fonction sur divers qui est seulement pour les développeurs. Et quand il y a un bogue dans la production, le développeur devrait voir les journaux détaillés des différentes fonctions qui ont été exécutées avec succès et qui ont échoué. Pour que le problème puisse être identifié et corrigé le plus rapidement possible."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour réaliser ce type d’installation, nous avons besoin d’avoir une meilleure compréhension de chaque niveau de journalisation."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Discutons des niveaux les plus importants et de leurs usages :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"INFO"}]},{"type":"text","value":": Quelques messages importants, des messages d’événements qui décrivent quand une tâche est terminée. Par exemple : "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"New User creaded with id xxx"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Il s’agit d’un simple journal d’information sur l’avancement des travaux."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"DEBUG"}]},{"type":"text","value":": Ce niveau est destiné aux développeurs, c’est similaire à l’enregistrement des informations que vous voyez lorsque vous utilisez le débogueur ou le point d’arrêt, comme quelle fonction a été appelée et quels paramètres ont été passés, etc. Il devrait avoir l’état actuel de sorte qu’il puisse être utile lors du débogage et de la recherche du problème exact."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"WARN"}]},{"type":"text","value":": Ces journaux sont les avertissements et ne bloquent pas l’application pour continuer, ils fournissent des alertes lorsque quelque chose ne va pas et que la solution de contournement est utilisée, par exemple une entrée utilisateur erronée, des tentatives répétées, etc. Les administrateurs devraient corriger ces avertissements à l’avenir."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ERROR"}]},{"type":"text","value":" : Quelque chose de mal s’est produit et devrait faire l’objet d’une enquête prioritaire. Par exemple, la base de données est en panne, la communication avec d’autres microservices a échoué ou l’entrée requise n’a pas été définie."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Les principaux publics visés sont les opérateurs système ou les systèmes de surveillance."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Idéalement, l’application de production devrait avoir des journaux d’erreurs proches de zéro."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"5) Ne pas utiliser "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.log"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"La plupart des développeurs ont utilisé le module de console comme premier outil pour obtenir les logs ou déboguer le code, car il est facile à utiliser, disponible globalement et aucune configuration n’est nécessaire. Dans Node.Js, la console est implémentée différemment que dans les navigateurs, le module de console imprime le message dans stdout lorsque vous utilisez "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.log"}]},{"type":"text","value":" et si vous utilisez "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.error"}]},{"type":"text","value":", il imprimera dans stderr."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.log"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.debug"}]},{"type":"text","value":" et "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.info"}]},{"type":"text","value":" s’imprime dans stdout, donc nous ne pourrons pas désactiver ou sur debug et info. De même, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.warn"}]},{"type":"text","value":" et "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"console.error"}]},{"type":"text","value":" s’impriment tous deux dans stderr.\nLa bascule des différents niveaux est difficile pour l’application de production."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous avons également besoin de différents types de configuration comme le format standard, le format de sortie JSON à envoyer à la stack ELK, et ceux-ci ne sont pas disponibles dans la console prête à l’emploi."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour surmonter tous ces problèmes, nous allons utiliser "},{"type":"element","tagName":"a","properties":{"href":"https://www.npmjs.com/package/winston","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"Winston"}]},{"type":"text","value":" framework de journalisation, d’autres options sont également disponibles comme "},{"type":"element","tagName":"a","properties":{"href":"https://www.npmjs.com/package/log4js","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"log4js"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/trentm/node-bunyan","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"Bunyan"}]},{"type":"text","value":", "},{"type":"element","tagName":"a","properties":{"href":"https://getpino.io/#/","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"Pino"}]},{"type":"text","value":", etc"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Pourquoi avons-nous besoin d’une bibliothèque de journalisation comme Winston ?"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Comme dans la dernière section, nous avons discuté de quelques défauts de la console, énumérons quelques fonctionnalités importantes fournies par Winston :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Niveaux"}]},{"type":"text","value":": Winston est livré avec quelques jeux de niveaux de logs et imprime également le niveau comme la partie du log, ce qui nous permettra de filtrer les logs dans notre tableau de bord centralisé."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Par exemple "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"{message : \"something wrong\", level : \"error\"}"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vous pouvez également créer des niveaux personnalisés si nécessaire."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Formats"}]},{"type":"text","value":": Winston a quelques configurations avancées, comme donner des couleurs aux logs, formatage en JSON, etc."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Modifier dynamiquement les niveaux de journalisation"}]},{"type":"text","value":": Nous aurons l’avertissement et l’erreur activés dans notre application de production, et quand nécessaire, nous avons besoin de la fonctionnalité pour changer le niveau de journal pour déboguer et revenir à l’erreur, selon le besoin, sans redémarrer l’application. L’enregistreur Winston est livré avec cette fonction prête à l’emploi."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98159515","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-change-level-dynamically-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" log setup"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"winston"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"const"}]}]},{"type":"text","value":" transports "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" {"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  console: "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"transports"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"Console"}]},{"type":"text","value":"({ level: "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"warn"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":" }),"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"};"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"const"}]}]},{"type":"text","value":" logger "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"createLogger"}]},{"type":"text","value":"({"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  transports: ["},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"transports"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"console"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"transports"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"file"}]},{"type":"text","value":"]"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"});"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L12","className":["blob-num","js-line-number"],"dataLineNumber":"12"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC12","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"info"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"This will not be logged in console transport because warn is set!"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L13","className":["blob-num","js-line-number"],"dataLineNumber":"13"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC13","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L14","className":["blob-num","js-line-number"],"dataLineNumber":"14"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC14","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"transports"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"console"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"level"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"info"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":"; "},{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-c"]},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" changed the level"}]}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L15","className":["blob-num","js-line-number"],"dataLineNumber":"15"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC15","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L16","className":["blob-num","js-line-number"],"dataLineNumber":"16"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC16","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"info"}]},{"type":"text","value":"("},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"This will be logged in now!"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":");"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L17","className":["blob-num","js-line-number"],"dataLineNumber":"17"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC17","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-L18","className":["blob-num","js-line-number"],"dataLineNumber":"18"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-change-level-dynamically-ts-LC18","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" {"},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":", "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"transport"}]},{"type":"text","value":"}"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/83041af3c695c6fb4aa5604c95ac77ec/raw/06527308192962338ec4c917d7e35c5feb728b94/log-change-level-dynamically.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/83041af3c695c6fb4aa5604c95ac77ec#file-log-change-level-dynamically-ts"},"children":[{"type":"text","value":"log-change-level-dynamically.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous pouvons aussi exposer une API pour changer le niveau dynamiquement, exposer l’API REST et dans le handler exécuter la ligne #14 pour changer le niveau."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Transport"}]},{"type":"text","value":": Pour notre environnement de production, nous aimerions avoir un système de journalisation centralisé où tous nos microservices poussent les logs, et nous aurons le tableau de bord, le filtrage et la recherche des logs. Il s’agit de la configuration standard ELK ou d’une configuration équivalente."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"element","tagName":"div","properties":{"id":"gist98159533","className":["gist"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"div","properties":{"className":["gist-file"]},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-data"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"div","properties":{"className":["js-gist-file-update-container","js-task-list-container","file-box"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tagName":"div","properties":{"id":"file-log-transport-file-ts","className":["file"]},"children":[{"type":"text","value":"\n    \n\n  "},{"type":"element","tagName":"div","properties":{"itemProp":["text"],"className":["Box-body","p-0","blob-wrapper","data","type-typescript"]},"children":[{"type":"text","value":"\n      \n"},{"type":"element","tagName":"table","properties":{"className":["highlight","tab-size","js-file-line-container"],"dataTabSize":"8"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L1","className":["blob-num","js-line-number"],"dataLineNumber":"1"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC1","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"winston"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L2","className":["blob-num","js-line-number"],"dataLineNumber":"2"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC2","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L3","className":["blob-num","js-line-number"],"dataLineNumber":"3"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC3","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"const"}]}]},{"type":"text","value":" logger "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"createLogger"}]},{"type":"text","value":"({"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L4","className":["blob-num","js-line-number"],"dataLineNumber":"4"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC4","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  level: "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"info"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":","}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L5","className":["blob-num","js-line-number"],"dataLineNumber":"5"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC5","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  format: "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"format"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"json"}]},{"type":"text","value":"(),"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L6","className":["blob-num","js-line-number"],"dataLineNumber":"6"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC6","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  transports: ["}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L7","className":["blob-num","js-line-number"],"dataLineNumber":"7"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC7","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"winston"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"transports"}]},{"type":"text","value":"."},{"type":"element","tagName":"span","properties":{"className":["pl-en"]},"children":[{"type":"text","value":"File"}]},{"type":"text","value":"({ filename: "},{"type":"element","tagName":"span","properties":{"className":["pl-s"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]},{"type":"text","value":"stdout.log"},{"type":"element","tagName":"span","properties":{"className":["pl-pds"]},"children":[{"type":"text","value":"'"}]}]},{"type":"text","value":" })"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L8","className":["blob-num","js-line-number"],"dataLineNumber":"8"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC8","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"  ]"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L9","className":["blob-num","js-line-number"],"dataLineNumber":"9"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC9","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"});"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L10","className":["blob-num","js-line-number"],"dataLineNumber":"10"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC10","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-L11","className":["blob-num","js-line-number"],"dataLineNumber":"11"},"children":[]},{"type":"text","value":"\n        "},{"type":"element","tagName":"td","properties":{"id":"file-log-transport-file-ts-LC11","className":["blob-code","blob-code-inner","js-file-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-k"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["pl-smi"]},"children":[{"type":"text","value":"logger"}]},{"type":"text","value":";"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n\n\n  "}]},{"type":"text","value":"\n\n  "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n\n      "}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"div","properties":{"className":["gist-meta"]},"children":[{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/bf2d41e1833699baf1fc2b28901f8a44/raw/4c373e0f5002e7c4feae2b9ffccbce78ed5be555/log-transport-file.ts","style":"float:right"},"children":[{"type":"text","value":"view raw"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/ludovicwyffels/bf2d41e1833699baf1fc2b28901f8a44#file-log-transport-file-ts"},"children":[{"type":"text","value":"log-transport-file.ts"}]},{"type":"text","value":"\n        hosted with ❤ by "},{"type":"element","tagName":"a","properties":{"href":"https://github.com"},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n      "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Winston est livré avec la configuration pour écrire nos journaux dans un fichier de sorte que tout agent expéditeur de journaux puisse pousser les journaux vers le système centralisé."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"6) Incidence sur le rendement"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Si la fréquence d’écriture du journal de l’application est élevée, cela peut avoir un impact direct sur les performances de l’application."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Le niveau debug et info contribue à plus de 95% des logs, c’est pourquoi nous devrions seulement activer le niveau d’erreur et d’avertissement, et changer le niveau pour déboguer quand nous voulons résoudre le problème et le ramener sur l’erreur."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Les journaux sont un sauveur de vie quand il y a un problème sur l’application. Si vous n’avez pas actuellement de pratiques d’enregistrement, encadrez une pratique d’enregistrement et ajoutez les enregistrements obligatoires dans la liste de contrôle de l’examen du code."}]}],"data":{"quirksMode":false}},"excerpt":"La journalisation est quelque chose que chaque développeur fait depuis ses débuts en programmation, mais très peu connaissent la valeur qu…","timeToRead":14,"frontmatter":{"title":"Journalisation: quelques règles pratique","subtitle":"Apprenez comment tirer le meilleur parti de la journalisation","userDate":"7 September 2019","date":"2019-09-07T08:00:00.000Z","tags":["Node.js"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAVth6Nm00L//xAAcEAABAwUAAAAAAAAAAAAAAAACAAERAxITIjP/2gAIAQEAAQUCEnQW5YdUH2DtK//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABESEQIjEyUf/aAAgBAQAGPwK7UiE4ZGUan//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFRMf/aAAgBAQABPyG4NngZgcE8cR33EZWhVRQz/9oADAMBAAIAAwAAABAzL//EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAwEBPxARf//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxANn//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcTFRYf/aAAgBAQABPxAYQbcl/Ik2gzSvXey61PSzZ5SfCxHAgzSKAqhn/9k=","aspectRatio":1.5763546798029557,"src":"/static/3105533b16c3c3b87bfb428faeeec641/c108b/bloom-bee.jpg","srcSet":"/static/3105533b16c3c3b87bfb428faeeec641/f8f18/bloom-bee.jpg 930w,\n/static/3105533b16c3c3b87bfb428faeeec641/c108b/bloom-bee.jpg 1280w","sizes":"(max-width: 1280px) 100vw, 1280px"}}},"author":{"id":"ludo","name":"Wyffels Ludovic","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png 1x"}}]}}}},"relatedPosts":{"totalCount":31,"edges":[{"node":{"id":"5a9f4e28-76a1-5c32-9601-a4e1921c3776","timeToRead":5,"excerpt":"Bien que le titre de cet article soit un peu trompeur, car nous ne souhaitons pas vraiment communiquer directement entre les composants. Nos…","frontmatter":{"title":"3 façons de communiquer entre les composants Angular","subtitle":""},"fields":{"slug":"/angular-3way-communication/"}}},{"node":{"id":"d4769f02-9f70-5b9b-8a8c-5346ff7f886b","timeToRead":11,"excerpt":"Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a…","frontmatter":{"title":"Gestion des environnements Angular en livraison continue","subtitle":"Mise en oeuvre de la configuration de l'environnement dynamique dans Angular pour éviter un build par environnement"},"fields":{"slug":"/angular-dynamic-environment/"}}},{"node":{"id":"f3d9e7d1-3a29-5f66-b17f-926e06970fe8","timeToRead":5,"excerpt":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel…","frontmatter":{"title":"Angular DevOps: CT/CI avec Travis CI et Github Pages","subtitle":"Utilisation de Travis CI pour implémenter les tests continus (CT) et l'intégration continue (CI) afin de déployer notre application Angular sur Github Pages"},"fields":{"slug":"/angular-travis-ctci/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/node-logging/","prev":{"excerpt":"Il y a des situations où new Date() ou Date.now est utilisée dans le code de l’application. Ce code doit être testé, et il est toujours…","timeToRead":3,"frontmatter":{"title":"Mocking de la date actuelle dans les tests de Jest","subtitle":"Il y a des situations où new Date() ou Date.now est utilisée dans le code de l’application. Ce code doit être testé, et il est toujours difficile de se rappeler comment le moquer.","tags":["Node.js","Jest","Javascript"],"category":["Node.js"],"date":"2019-08-25T09:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5041128084606346,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHHQrLEw//EABYQAAMAAAAAAAAAAAAAAAAAAAEQIP/aAAgBAQABBQJCP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAMAAwAAAAAAAAAAAAAAAAABETFBYf/aAAgBAQABPyF9NkQrHmiZ/9oADAMBAAIAAwAAABDDD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEBAQEBAAAAAAAAAAAAAAERAEEhMf/aAAgBAQABPxCbeqHs3wF8+5YSU48S5LRq5Q3/2Q==","sizes":"(max-width: 1280px) 100vw, 1280px","src":"/static/d42a07825b182edc73e6ce9f6f8bdfef/c108b/clock.jpg","srcSet":"/static/d42a07825b182edc73e6ce9f6f8bdfef/f8f18/clock.jpg 930w,\n/static/d42a07825b182edc73e6ce9f6f8bdfef/c108b/clock.jpg 1280w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/jest-mocking-current-date/"}},"next":{"excerpt":"Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a…","timeToRead":11,"frontmatter":{"title":"Gestion des environnements Angular en livraison continue","subtitle":"Mise en oeuvre de la configuration de l'environnement dynamique dans Angular pour éviter un build par environnement","tags":["Angular","Typescript","Node.js","DevOps"],"category":["Node.js"],"date":"2019-09-08T17:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5005861664712778,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGSyjpVIQD/xAAaEAEBAQADAQAAAAAAAAAAAAACAQMAERIh/9oACAEBAAEFAsR700BMKlkvVeifBPn/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPwHIRH//xAAbEAACAgMBAAAAAAAAAAAAAAAAARExAhASIv/aAAgBAQAGPwJJ0dYyoepR6ZZ//8QAGRABAQEBAQEAAAAAAAAAAAAAAQARMUEh/9oACAEBAAE/IQpM7+IwFOMhJie2P9Mlexf/2gAMAwEAAgADAAAAEMQP/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8QiH//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EE6KaW2H/8QAGhABAQEAAwEAAAAAAAAAAAAAAREAITFBcf/aAAgBAQABPxB44qsZZqokmpY+XKXwX5l59YPJhhB4CazDXo3/2Q==","sizes":"(max-width: 1280px) 100vw, 1280px","src":"/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg","srcSet":"/static/fc4a9d82e0465367f3d289f60d0b6834/f8f18/bloom.jpg 930w,\n/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg 1280w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/angular-dynamic-environment/"}},"primaryTag":"Node.js","primaryCategory":"Node.js"}}}