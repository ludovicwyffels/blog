{"componentChunkName":"component---src-templates-post-tsx","path":"/git-manage-commit-text-part2/","webpackCompilationHash":"28b74a5dec589e4586df","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQY023PvUrDUBTA8ZuCtoMoOLQ4dWhN14x2kEKXFkGoohQ/QBexOHRycAidKkgHHRq69APRoTjFJYODIA6+gSBYfYMmfYLE/5VT6NALP845NyeHc9UoCHZRQvonCLKKE4ZhAXYURTsYoE9dIy5iCzfUJnEdV+RF4iu6ikFH2EPxazzOcJmg4Rnn5C8ysIEOHqTe5/sT3qXOwYOtRr5/wLAqzpCTDXu4p2ETtyjgGJ/cX+se8jeU9fa4RBt5vWENpjzdkoGPcGg4RQsbOMEFmnBRRwVDHEK/yFXfvr/CoPjvZLKcdByDyzWGeajigzorGy0oOeRJiUtITe/pX1XzDk3buIMltSFR/zTtic3060X+8z8PsEUt8G3LVQAAAABJRU5ErkJggg==","width":400,"height":128,"src":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png","srcSet":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png 1x"}}},"markdownRemark":{"html":"<p>Nous sommes tous pass√©s par l√†. Qu‚Äôil s‚Äôagisse d‚Äôun calendrier serr√©, de corrections constantes ou simplement de la cr√©ation de messages avec notre propre mod√®le d√©fini; nous avons tous fait de mauvais messages de commit. Heureusement pour nous, la sp√©cification Conventional Commits existe, et avec elle un ensemble d‚Äôoutils puissants pour nous aider.</p>\n<h2>Application d‚Äôune norme</h2>\n<p>Pour faire respecter une norme √† chaque fois que nous nous faisons un commit, nous avons <a href=\"https://github.com/typicode/husky\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">husky</a> et <a href=\"https://github.com/conventional-changelog/commitlint\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">commitling</a>. Husky √©coute les git hooks, et nous l‚Äôutiliserons pour d√©clencher le commitlint lorsque nous tapons un message de commit. Maintenant, installons les paquets :</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev husky @commitlint/cli @commitlint/config-conventional</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Apr√®s avoir install√© ces paquets, vous devez cr√©er un fichier <strong>commitlint.config.js</strong> dans le m√™me dossier que votre package.json :</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">extends</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'@commitlint/config-conventional'</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Et modifier votre package.json:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"husky\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"hooks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"commit-msg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commitlint -E HUSKY_GIT_PARAMS\"</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Tout est pr√™t! Maintenant, vos messages seront linted.</p>\n<h2>Nous les commitons avec commitizen</h2>\n<p><a href=\"https://github.com/commitizen/cz-cli\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Commitizen</a> est un paquet qui facilite la cr√©ation de messages de commit selon la sp√©cification pr√©c√©dente. Pour ce faire, vous devez l‚Äôinstaller globalement et configurer votre projet.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --global commitizen\n\n<span class=\"token comment\"># Inside your project</span>\ncommitizen init cz-conventional-changelog --save-dev --save-exact</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Maintenant, faites un changement, ajoutez-le et lancez <code>git cz</code>.</p>\n<hr>\n<h2>Automatisation</h2>\n<p>Nous avons ajout√© des outils pour assurer et faciliter la validation des messages de commit selon les sp√©cifications conventionnelles de commit. Non seulement nous avons re√ßu des messages standard sur l‚Äôensemble du projet que les humains peuvent lire, mais aussi des machines. Oui, des machines. Le respect de ces normes a permis aux machines de comprendre le motif, et avec cela, de mettre √† jour automatiquement la version de nos paquets et de g√©n√©rer des changelogs.</p>\n<h3>Version bumping et CHANGELOG</h3>\n<p>Pour faire les deux actions, nous n‚Äôavons besoin que d‚Äôun seul paquet, <code>standard-version</code>. Ce paquet le fera:</p>\n<ol>\n<li>Analyser vos engagements depuis votre derni√®re version (tag)</li>\n<li>Version bump votre paquet.json</li>\n<li>G√©n√©rer ou mettre √† jour un fichier CHANGELOG.md</li>\n<li>G√©n√©rer un message de livraison</li>\n<li>G√©n√©rer une nouvelle balise</li>\n</ol>\n<p>Utilisons-la donc :</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev standard-version</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Mettez √† jour votre paquet.json :</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  ...<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"release\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standard-version\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Et maintenant vous n‚Äôavez plus qu‚Äô√† lancer <code>npm run release</code>.</p>\n<blockquote>\n<p>Alternativement, si vous souhaitez simplement g√©n√©rer un fichier changelog, je vous recommande le fichier <a href=\"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">conventionnel-changelog-cli</a>.</p>\n</blockquote>\n<hr>\n<h2>Quelle est la prochaine √©tape?</h2>\n<p>Apr√®s avoir gagn√© en lisibilit√© et en automatisation des t√¢ches quotidiennes douloureuses, vous pouvez cr√©er votre propre standard bas√© sur les sp√©cifications conventionnelles de commit. La famille d‚Äôoutils conventionnel-changelog vous permet et vous facilite la cr√©ation de votre propre version si vous le souhaitez.</p>\n<p>J‚Äôesp√®re que ce message vous a aid√©. S‚Äôil y a quoi que ce soit, partagez de l‚Äôinformation qui pourrait l‚Äôam√©liorer et la rendre meilleure pour les autres!</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous sommes tous pass√©s par l√†. Qu‚Äôil s‚Äôagisse d‚Äôun calendrier serr√©, de corrections constantes ou simplement de la cr√©ation de messages avec notre propre mod√®le d√©fini; nous avons tous fait de mauvais messages de commit. Heureusement pour nous, la sp√©cification Conventional Commits existe, et avec elle un ensemble d‚Äôoutils puissants pour nous aider."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Application d‚Äôune norme"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour faire respecter une norme √† chaque fois que nous nous faisons un commit, nous avons "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/typicode/husky","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"husky"}]},{"type":"text","value":" et "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/conventional-changelog/commitlint","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"commitling"}]},{"type":"text","value":". Husky √©coute les git hooks, et nous l‚Äôutiliserons pour d√©clencher le commitlint lorsque nous tapons un message de commit. Maintenant, installons les paquets :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" --save-dev husky @commitlint/cli @commitlint/config-conventional"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apr√®s avoir install√© ces paquets, vous devez cr√©er un fichier "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"commitlint.config.js"}]},{"type":"text","value":" dans le m√™me dossier que votre package.json :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-js","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"module"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"exports "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'@commitlint/config-conventional'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Et modifier votre package.json:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"json"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-json","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  ..."},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"husky\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"hooks\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"commit-msg\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"commitlint -E HUSKY_GIT_PARAMS\""}]},{"type":"text","value":"\n     "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Tout est pr√™t! Maintenant, vos messages seront linted."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Nous les commitons avec commitizen"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/commitizen/cz-cli","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"Commitizen"}]},{"type":"text","value":" est un paquet qui facilite la cr√©ation de messages de commit selon la sp√©cification pr√©c√©dente. Pour ce faire, vous devez l‚Äôinstaller globalement et configurer votre projet."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" --global commitizen\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# Inside your project"}]},{"type":"text","value":"\ncommitizen init cz-conventional-changelog --save-dev --save-exact"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maintenant, faites un changement, ajoutez-le et lancez "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"git cz"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Automatisation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous avons ajout√© des outils pour assurer et faciliter la validation des messages de commit selon les sp√©cifications conventionnelles de commit. Non seulement nous avons re√ßu des messages standard sur l‚Äôensemble du projet que les humains peuvent lire, mais aussi des machines. Oui, des machines. Le respect de ces normes a permis aux machines de comprendre le motif, et avec cela, de mettre √† jour automatiquement la version de nos paquets et de g√©n√©rer des changelogs."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Version bumping et CHANGELOG"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour faire les deux actions, nous n‚Äôavons besoin que d‚Äôun seul paquet, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"standard-version"}]},{"type":"text","value":". Ce paquet le fera:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Analyser vos engagements depuis votre derni√®re version (tag)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Version bump votre paquet.json"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"G√©n√©rer ou mettre √† jour un fichier CHANGELOG.md"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"G√©n√©rer un message de livraison"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"G√©n√©rer une nouvelle balise"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Utilisons-la donc :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" --save-dev standard-version"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Mettez √† jour votre paquet.json :"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"json"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-json","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  ..."},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"release\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"standard-version\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Et maintenant vous n‚Äôavez plus qu‚Äô√† lancer "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm run release"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Alternativement, si vous souhaitez simplement g√©n√©rer un fichier changelog, je vous recommande le fichier "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"conventionnel-changelog-cli"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Quelle est la prochaine √©tape?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apr√®s avoir gagn√© en lisibilit√© et en automatisation des t√¢ches quotidiennes douloureuses, vous pouvez cr√©er votre propre standard bas√© sur les sp√©cifications conventionnelles de commit. La famille d‚Äôoutils conventionnel-changelog vous permet et vous facilite la cr√©ation de votre propre version si vous le souhaitez."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"J‚Äôesp√®re que ce message vous a aid√©. S‚Äôil y a quoi que ce soit, partagez de l‚Äôinformation qui pourrait l‚Äôam√©liorer et la rendre meilleure pour les autres!"}]}],"data":{"quirksMode":false}},"excerpt":"Nous sommes tous pass√©s par l√†. Qu‚Äôil s‚Äôagisse d‚Äôun calendrier serr√©, de corrections constantes ou simplement de la cr√©ation de messages avec notre propre mod√®le d√©fini; nous avons tous fait de mauvais messages de commit. Heureusement pour nous, la sp√©cification Conventional Commits existe, et avec elle un ensemble d‚Äôoutils puissants pour nous aider. Application d‚Äôune norme Pour faire respecter une norme √† chaque fois que nous nous faisons un commit, nous avons husky et commitling. Husky √©coute les git hooks, et nous l‚Äôutiliserons pour d√©clencher le commitlint lorsque nous tapons un message de commit. Maintenant, installons les paquets : Apr√®s avoir install√© ces paquets, vous devez cr√©er un fichier commitlint.config.js dans le m√™me dossier que votre package.json : Et modifier votre package.json: Tout est pr√™t! Maintenant, vos messages seront linted. Nous les commitons avec commitizen Commitizen est un paquet qui facilite la cr√©ation de messages de commit selon la sp√©cification pr√©c√©dente. Pour ce faire, vous devez l‚Äôinstaller globalement et configurer votre projet. Maintenant, faites un changement, ajoutez-le et lancez git cz. Automatisation Nous avons ajout√© des outils pour assurer et faciliter la validation des messages de commit selon les sp√©cifications conventionnelles de commit. Non seulement nous avons re√ßu des messages standard sur l‚Äôensemble du projet que les humains peuvent lire, mais aussi des machines. Oui, des machines. Le respect de ces normes a permis aux machines de comprendre le motif, et avec cela, de mettre √† jour automatiquement la version de nos paquets et de g√©n√©rer des changelogs. Version bumping et CHANGELOG Pour faire les deux actions, nous n‚Äôavons besoin que d‚Äôun seul paquet, standard-version. Ce paquet le fera: Analyser vos engagements depuis votre derni√®re version (tag) Version bump votre paquet.json G√©n√©rer ou mettre √† jour un fichier CHANGELOG.md G√©n√©rer un message de livraison G√©n√©rer une nouvelle balise Utilisons-la donc : Mettez √† jour votre paquet.json : Et maintenant vous n‚Äôavez plus qu‚Äô√† lancer npm run release. Alternativement, si vous souhaitez simplement g√©n√©rer un fichier changelog, je vous recommande le fichier conventionnel-changelog-cli. Quelle est la prochaine √©tape? Apr√®s avoir gagn√© en lisibilit√© et en automatisation des t√¢ches quotidiennes douloureuses, vous pouvez cr√©er votre propre standard bas√© sur les sp√©cifications conventionnelles de commit. La famille d‚Äôoutils conventionnel-changelog vous permet et vous facilite la cr√©ation de votre propre version si vous le souhaitez. J‚Äôesp√®re que ce message vous a aid√©. S‚Äôil y a quoi que ce soit, partagez de l‚Äôinformation qui pourrait l‚Äôam√©liorer et la rendre meilleure pour les autres!","timeToRead":2,"frontmatter":{"title":"Bien g√©rer ses textes de commit (partie 2)","subtitle":"Mettons en place l'application de la norme \"conventional-changelog\" pour un nouveau projet","userDate":"11 August 2019","date":"2019-08-11T18:00:00.000Z","tags":["Git","Node.js"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABVLywQM4t/8QAGRABAQEAAwAAAAAAAAAAAAAAAgEAAxIi/9oACAEBAAEFAjYbGa/OO5x2O//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwFiP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABMgIQERIhQVH/2gAIAQEABj8ClwVbPD6JCG/Lf//EABwQAAMAAgMBAAAAAAAAAAAAAAABESExQVGBkf/aAAgBAQABPyGUSNvqLg0lKYL1eiZVcsToWHs//9oADAMBAAIAAwAAABAzL//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAWEQEBAQAAAAAAAAAAAAAAAAABMRD/2gAIAQIBAT8QFjMP/8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUZFh/9oACAEBAAE/EAltBA8O42KxjwXf2Jc+6ZIoPW0uXQptIchpjqk//9k=","aspectRatio":1.5056461731493098,"src":"/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg","srcSet":"/static/bb024aed8b63b69834a2bfb23baa20cf/f8f18/nature.jpg 930w,\n/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg 1200w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"author":{"id":"ludo","name":"Wyffels Ludovic","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png 1x"}}]}}}},"relatedPosts":{"totalCount":5,"edges":[{"node":{"id":"a7b23c0d-9c79-54c7-8132-41d2f4632b4c","timeToRead":1,"excerpt":"Une des choses les plus grandes et les pires avec git est que vous pouvez r√©√©crire l‚Äôhistoire. Voici une fa√ßon sournoise d‚Äôabuser de cela, je ne peux pas penser √† une raison l√©gitime de le faire. Comme pour tout, merci StackOverflow pour toutes les options que je peux choisir parmi Fixe la date du dernier commit √† la date du jour Fixer la date du dernier commit √† une date arbitraire D√©finir la date d‚Äôune validation arbitraire sur une date arbitraire ou courante Rebaser avant ledit engagement et arr√™ter pour modification: git rebase <commit-hash>^ -i Remplace pick par e (edit) sur la ligne avec ce commit (le premier) Quittez l‚Äô√©diteur (ESC suivi de :wq dans VIM) Non plus: GIT_COMMITTER_DATE=\"$(date)\" git commit --amend --no-edit --date \"$(date)\" GIT_COMMITTER_DATE=\"Mon 20 Aug 2018 20:19:19 BST\" git commit --amend --no-edit --date \"Mon 20 Aug 2018 20:19:19 BST\" Voir ici pour plus d‚Äôinformations sur le rebase et l‚Äô√©dition dans git: Fractionner un commit git existant. Apr√®s l‚Äôune de ces 3 options, vous voudrez ex√©cuter:","frontmatter":{"title":"Changer la date d'un commit","subtitle":"Une des choses les plus grandes et les pires avec git est que vous pouvez r√©√©crire l'histoire. Voici une fa√ßon sournoise d'abuser de cela, je ne peux pas penser √† une raison l√©gitime de le faire."},"fields":{"slug":"/git-changeGitOfCommit/"}}},{"node":{"id":"044eb1a1-d28b-5edd-bca2-052da2b0b1bd","timeToRead":7,"excerpt":"Dans cet article, vous apprendrez √† cr√©er et √† g√©rer facilement des git hooks pour vos projets Node/NPM √† l‚Äôaide de Husky. Git Hooks En termes simples, les git hooks sont des scripts personnalis√©s, qui peuvent √™tre ex√©cut√©s automatiquement lorsque des √©v√©nements sp√©cifiques se produisent. Des crochets (hooks) c√¥t√© client sont d√©clench√©s pour des actions telles que le commit ou le merge. Les crochets c√¥t√© serveur s‚Äôex√©cutent dans des situations telles que la r√©ception de donn√©es (git push) du client. Les hooks peuvent ex√©cuter n‚Äôimporte quelle logique personnalis√©e et, plus important encore, rejeter l‚Äôaction effectu√©e si quelque chose ne va pas. Par exemple, vous pouvez annuler la validation du commit si son message ne contient pas l‚ÄôID de probl√®me du suivi des probl√®mes. Vous pouvez √©galement le refuser si l‚Äôanalyse de code statique √©choue. Cela peut √™tre tr√®s utile si vous voulez vous assurer que votre base de code reste propre ou si vous souhaitez appliquer certaines r√®gles de qualit√©. Mais comment pouvez-vous r√©ellement installer et g√©rer ces hooks? Chaque fois que vous clonez un repo git, toutes les donn√©es git de votre projet sont stock√©es dans un r√©pertoire .git dans votre dossier. Il contient plusieurs fichiers et sous-r√©pertoires, l‚Äôun d‚Äôeux √©tant appel√© \u001dhooks\u001d. √Ä l‚Äôint√©rieur, vous trouverez un tas de fichiers.  Chacun d‚Äôentre eux est un script, qui est ex√©cut√© lorsqu‚Äôun √©v√©nement sp√©cifique se produit. Le nom de l‚Äô√©v√©nement correspond au nom du fichier. Par exemple, la \u001dpre-commit\u001d est ex√©cut√©e avant de commiter vos modifications. Comme vous pouvez le constater, tous les fichiers ont une extension \u001d.sample\u001d. Git ignore ces fichiers √† moins que vous ne les renommiez. Vous devez supprimer l‚Äôextension \u001d.sample\u001d pour activer ces hooks. Dans les exemples de fichiers, vous pouvez trouver une description et un exemple d‚Äôimpl√©mentation que vous pouvez utiliser comme point de d√©part pour impl√©menter vos propres hooks. √Ä quoi √ßa sert? Maintenant, regardons quelques exemples sp√©cifiques de ce qui peut √™tre r√©alis√© avec les git hooks. Comme ce ne sont que des scripts, vous pouvez faire √† peu pr√®s n‚Äôimporte quoi. Habituellement, cela signifie effectuer divers contr√¥les de qualit√©. Vous pouvez vous assurer que l‚Äôutilisateur a son nom et son email renseign√©s. Vous pouvez v√©rifier que le message de validation est correctement format√©. Vous pouvez essayer de cr√©er votre application et rejeter le commit si la construction √©choue. Vous pouvez ex√©cuter des tests pour vous assurer qu‚Äôils passent avant le commit. L‚Äôutilisation typique est √©galement l‚Äôanalyse de code statique ou le formatage. Cela signifie qu‚Äôil faut v√©rifier dans votre code les probl√®mes courants, les mauvaises pratiques, les conventions de d√©nomination, etc. Il peut √©galement √™tre utile d‚Äôex√©cuter un outil tel que Prettier pour s‚Äôassurer que le code est bien format√© avant le commit. Cela √©vite de nombreux maux de t√™te lors de la r√©vision du code. Vous pouvez m√™me v√©rifier les failles de s√©curit√© de votre code avec un outil tel que Snyk. Distribution aux membres de l‚Äô√©quipe Avec les hooks c√¥t√© serveur, la distribution est facile. Vous n‚Äôavez g√©n√©ralement qu‚Äôun seul r√©f√©rentiel de serveur principal. Cela signifie que tous les membres de l‚Äô√©quipe mettent g√©n√©ralement leurs modifications au m√™me endroit. Vous y installez vos hooks et vous avez termin√©. Avec les hooks c√¥t√© client, cela devient plus compliqu√©. Lorsque vous clonez un r√©f√©rentiel, les hooks ne sont pas transf√©r√©s au client. Cela signifie qu‚Äôun r√©f√©rentiel fra√Æchement clon√© n‚Äôa aucun hook, peu importe le type de hook que vous avez sur le serveur. Si vous voulez que les membres de votre √©quipe aient un ensemble unifi√© de git hooks, vous devez les distribuer d‚Äôune mani√®re ou d‚Äôune autre et vous assurer qu‚Äôils sont inclus dans leur sous-r√©pertoire git hooks. La solution la plus √©l√©mentaire consiste √† cr√©er un emplacement partag√©, o√π vous stockez vos hooks, puis demandez √† vos d√©veloppeurs de les t√©l√©charger et de les mettre dans leur r√©pertoire de hooks. Bien s√ªr, vous ne pouvez pas √™tre s√ªr qu‚Äôils le feront r√©ellement. Le probl√®me est qu‚Äôils ont besoin de savoir qu‚Äôils devraient le faire et comment. Et m√™me s‚Äôils le font, ils peuvent √™tre paresseux ou simplement ignorer votre politique. Vous pouvez am√©liorer un peu cette solution de base en ayant des hooks dans le r√©f√©rentiel de votre projet et en laissant simplement √† vos d√©veloppeurs ex√©cuter un script personnalis√© comme celui-ci, qui les copie ensuite dans leur r√©pertoire de hooks. Sinon, git propose une option pour changer la destination du r√©pertoire des hooks en un emplacement personnalis√©: Ces solutions facilitent la distribution, mais ne r√©solvent pas les probl√®mes essentiels. Husky Installation Vous pouvez installer Husky simplement en ex√©cutant: Alternative, avec yarn: Ajout de hooks Ajouter des hooks avec Husky est facile. Vous devez juste √©diter votre package.json. Vous d√©finissez quels scripts doivent √™tre ex√©cut√©s sur quel √©v√©nement git. Pour Husky 1.0.0+, utilisez: Si vous utilisez une version de Husky ant√©rieure √† 1.0.0 (disponible dans la version candidate du 06/2018), la syntaxe est l√©g√®rement diff√©rente. Vous ajoutez vos hooks Husky directement dans la section scripts. L‚Äôexemple ci-dessus ex√©cute tous vos tests avant de commiter et avant de pousser et si vos tests √©chouent, l‚Äôaction git n‚Äôest pas ex√©cut√©e. Bien s√ªr, vous pouvez ex√©cuter tout autre script nom plut√¥t que le nom test. Probl√®me de correction automatique avant validation Il est utile de casser le build si quelque chose ne va pas, mais il est encore plus utile de corriger automatiquement les probl√®mes avant de s‚Äôengager. Par exemple, vous pouvez personnaliser votre code en utilisant Prettier avant de faire un commit ou vous pouvez corriger automatiquement les probl√®mes de formatage, qui peuvent √™tre r√©solus automatiquement. C‚Äôest beaucoup plus facile de cette fa√ßon. Heureusement, il existe un outil pour cela. Cela s‚Äôappelle lint-staged. Vous pouvez l‚Äôinstaller par: Maintenant, sur votre action de pre-commit, vous ex√©cutez directement \u001dlint-staged\u001d au lieu de votre linter. Dans lint-staged, vous d√©finissez ce qui doit √™tre ex√©cut√©: Lorsque vous essayez de commiter maintenant, \u001dlint-staged\u001d peut modifier vos fichiers avant l‚Äôex√©cution de la validation. Cependant, ce qui est vraiment bien, c‚Äôest que vous ne filtrez que les fichiers en attente de validation, et non l‚Äôensemble de votre projet. Cela signifie que l‚Äôensemble du processus est beaucoup plus rapide. Bug JetBrains IDE La bonne nouvelle est que les git hooks configur√©s de cette mani√®re sont ex√©cut√©s non seulement lorsque vous utilisez git √† partir de votre terminal, mais √©galement √† partir d‚Äôun IDE. La mauvaise nouvelle est que les IDE JetBrains (IDEA, Webstorm, ‚Ä¶) ont actuellement un m√©chant bogue (voir IDEA-135454) et ne fonctionnent pas bien avec cette configuration. Le probl√®me n‚Äôest pas r√©solu avant plusieurs ann√©es, mais heureusement, il existe une solution de contournement. Vous devez juste ajouter ce hook post-commit: Bien entendu, il ne s‚Äôagit que d‚Äôune solution de contournement jusqu‚Äô√† ce que le probl√®me soit r√©solu. Le suivi des probl√®mes de JetBrains contient une fonctionnalit√© de vote, alors assurez-vous de voter pour que ce probl√®me soit r√©solu s‚Äôil vous pose probl√®me. Int√©gration continue Une chose √† noter est que Husky installe les hooks uniquement lorsqu‚Äôil ne s‚Äôex√©cute pas sur un serveur d‚Äôint√©gration continue. Husky peut d√©tecter qu‚Äôil est en cours d‚Äôex√©cution dans le cadre d‚Äôun travail CI et n‚Äôinstalle aucun hook. En ignorant Les hooks c√¥t√© client peuvent √™tre utiles, mais vous ne pouvez pas trop compter sur eux. Ils ne sont que le premier niveau de d√©fense. Vous ne pouvez pas √™tre s√ªr √† 100% qu‚Äôils soient ex√©cut√©s. Ils peuvent √™tre ignor√©s √† la demande en ajoutant une option de ligne de commande: Pour rendre les choses encore plus faciles, les hooks peuvent √™tre d√©sactiv√©s √† l‚Äôaide de certaines variables environnementales. Pour cette raison, il est toujours utile d‚Äôappliquer la m√™me fonctionnalit√© sur le serveur. Performance Bien que les hooks cot√©s client tels que le pre-commit puissent s‚Äôav√©rer tr√®s utiles, vous devez garder √† l‚Äôesprit qu‚Äôils prennent un certain temps √† s‚Äôex√©cuter. Les commits, qui sont g√©n√©ralement tr√®s rapides, car ils ne se produisent que sur le client, peuvent prendre soudainement tr√®s longtemps. Vous serez peut-√™tre tent√© d‚Äôex√©cuter tous les tests, l‚Äôanalyse de code statique, les v√©rifications pr√©alables, etc., avant chaque validation. Lorsqu‚Äôun commit prend des ann√©es, vos d√©veloppeurs ne seront pas heureux et seront tent√©s d‚Äôignorer les hooks lors de l‚Äôex√©cution de leurs commandes git. Vous devez donc trouver le bon √©quilibre entre ce qui doit √™tre effectu√© sur le client et ce qui peut √™tre un point d‚Äôacc√®s c√¥t√© serveur. Conclusion Husky est un outil utile qui permet de cr√©er et de g√©rer facilement des hooks git sur le client. Vous n‚Äôavez plus besoin de distribuer vos hooks manuellement. Comme pour tout, gardez le nombre de hooks c√¥t√© client avec mod√©ration afin d‚Äô√©viter les temps d‚Äôex√©cution trop longs.","frontmatter":{"title":"Git hooks avec Husky","subtitle":"En termes simples, les git hooks sont des scripts personnalis√©s, qui peuvent √™tre ex√©cut√©s automatiquement lorsque des √©v√©nements sp√©cifiques se produisent."},"fields":{"slug":"/git-husky/"}}},{"node":{"id":"89da3cdd-4f91-58a2-8d1d-480a0cf11697","timeToRead":4,"excerpt":"Que l‚Äôon soit backend, frontend, il y a une chose qui nous rassemble, c‚Äôest notre gestionnaire de source et son utilisation. Dans cet article, je vais vous pr√©senter le conventional-changelog qui vous permettra de produire un historique de super qualit√© üôå! Le probl√®me Combien d‚Äôentre vous sont tomb√©s sur des projets avec un historique qui ressemble √† cela: ü§ï Comment s‚Äôy retrouver? Comment exploiter un historique qui ne vous donne quasiment jamais d‚Äôinformation. La solution, c‚Äôest d‚Äôutiliser le Conventional-Changelog (oui, on dirait une pub de t√©l√©-achat üòù). Qu‚Äôest-ce que c‚Äôest le conventional-changelog? C‚Äôest bien de vous vendre une solution, mais il faudrait peut-√™tre expliquer ce que c‚Äôest‚Ä¶ en vrai. Le Conventional-Changelog est une mani√®re d‚Äô√©crire ses commits dans les projets. Il existe plusieurs ‚Äúflavours‚Äù, je vais vous d√©tailler la version Angular. Le format est le suivant: Si ce format est bien appliqu√©, cela peut donner ce type de texte de commit : C‚Äôest un peu plus agr√©able √† lire non ? Je vais vous d√©crire les diff√©rentes parties de cette convention et comment bien les utiliser. Type Le type permet de repr√©senter de mani√®re succincte le type d‚Äôaction que vous avez fait sur le projet : feat: Ajout d‚Äôune fonctionnalit√© fix: Correction perf: Am√©lioration des performances docs: Ajout de documentation style: Linting du code refactor: Modification du code, mutualisation et autres modifs afin d‚Äôam√©liorer le projet test: Ajout de tests unitaires, int√©gration, end-to-end chore: T√¢che m√©nag√®re, comme mettre √† jour les d√©pendances, reconfigurer la CI‚Ä¶ On ne peut mettre qu‚Äôun seul type par commit, donc finis les commits qui contiennent une feature et un fix en m√™me temps‚Ä¶ Scope Ici, pas de liste impos√©e, juste le titre de l‚Äô√©l√©ment sur lequel une modification a √©t√© faite. Nous avons tendance √† d√©finir clairement les scopes du projet √† l‚Äôavance afin que tout le monde commit avec les m√™mes scopes. Pour exemple, sur une application orient√©e ‚Äúe-commerce‚Äù, on pourrait avoir les scopes suivants : homepage search my-account product-details order admin Parfois, ce scope peut √™tre omis‚Ä¶ car il n‚Äôy en a pas forc√©ment ou vous avez touch√© √† l‚Äôapplication de mani√®re globale. Dans ce cas, laissez vide üòÖ Et par contre, comme pour le type, il ne peut y avoir qu‚Äôun seul scope. Donc si vous pensez avoir deux scopes‚Ä¶ faites deux commit diff√©rents Subject Le sujet doit contenir une description courte du changement effectu√© dans le commit. Quelques conseils pour formater le message : Utiliser l‚Äôimp√©ratif Utiliser le pr√©sent Pas de 1er lettre en majuscule Pas de point . √† la fin du sujet Body Le body est la partie ‚Äúprincipale‚Äù du commit. J‚Äôai tendance √† dire qu‚Äôelle doit contenir le ‚ÄúPourquoi‚Äù du commit. Si vous avez fait une modification structurante ou si la m√©thode d‚Äôimpl√©mentation est particuli√®re, √©crivez-le dans le body ! C‚Äôest un point de vue qui est personnel, mais je pense que le body est le meilleur endroit pour accueillir un commentaire‚Ä¶ car un message de commit ne se d√©synchronise jamais du code. Footer Cette derni√®re partie permet de placer les r√©f√©rences vers toutes les issues, User stories & co. On s‚Äôen sert g√©n√©ralement pour lier (Linked to) ou cl√¥turer (Closes) les issues directement depuis git. Autre √©l√©ment qui peut √™tre ajout√© dans ce footer est la notion de Breaking Change. Il suffit d‚Äôajouter BREAKING CHANGE: suivi du d√©tail de ce fameux breaking change. Je suis oblig√© d‚Äô√©crire tout cela √† chaque fois? Non, rassurez-vous, vous n‚Äô√™tes pas oblig√©‚Ä¶ m√™me s‚Äôil est bien de mettre un max d‚Äôinformation dans le message de commit. La convention veut que seule la 1√®re ligne soit obligatoire. Donc, libre √† vous, de ne pas mettre de body et de footer Conclusion Avec cette convention, vous prendrez plaisir √† fouiller dans l‚Äôhistorique de votre projet, trouver la source d‚Äôune modification et surtout savoir ‚ÄúPourquoi cela a √©t√© fait comme cela !‚Äù Et quand l‚Äôon regarde, la diff√©rence entre l‚Äôancienne version : et la nouvelle (certes, sur des projets diff√©rents): Cela est quand m√™me bien plus clair ! R√©f√©rence Git Commit Message Conventions","frontmatter":{"title":"Bien g√©rer ses textes de commit (partie 1)","subtitle":"Que l‚Äôon soit backend, frontend, il y a une chose qui nous rassemble, c‚Äôest notre gestionnaire de source et son utilisation. Dans cet article, je vais vous pr√©senter le conventional-changelog qui vous permettra de produire un historique de super qualit√© !"},"fields":{"slug":"/git-manage-commit-text-part1/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/git-manage-commit-text-part2/","prev":{"excerpt":"Que l‚Äôon soit backend, frontend, il y a une chose qui nous rassemble, c‚Äôest notre gestionnaire de source et son utilisation. Dans cet article, je vais vous pr√©senter le conventional-changelog qui vous permettra de produire un historique de super qualit√© üôå! Le probl√®me Combien d‚Äôentre vous sont tomb√©s sur des projets avec un historique qui ressemble √† cela: ü§ï Comment s‚Äôy retrouver? Comment exploiter un historique qui ne vous donne quasiment jamais d‚Äôinformation. La solution, c‚Äôest d‚Äôutiliser le Conventional-Changelog (oui, on dirait une pub de t√©l√©-achat üòù). Qu‚Äôest-ce que c‚Äôest le conventional-changelog? C‚Äôest bien de vous vendre une solution, mais il faudrait peut-√™tre expliquer ce que c‚Äôest‚Ä¶ en vrai. Le Conventional-Changelog est une mani√®re d‚Äô√©crire ses commits dans les projets. Il existe plusieurs ‚Äúflavours‚Äù, je vais vous d√©tailler la version Angular. Le format est le suivant: Si ce format est bien appliqu√©, cela peut donner ce type de texte de commit : C‚Äôest un peu plus agr√©able √† lire non ? Je vais vous d√©crire les diff√©rentes parties de cette convention et comment bien les utiliser. Type Le type permet de repr√©senter de mani√®re succincte le type d‚Äôaction que vous avez fait sur le projet : feat: Ajout d‚Äôune fonctionnalit√© fix: Correction perf: Am√©lioration des performances docs: Ajout de documentation style: Linting du code refactor: Modification du code, mutualisation et autres modifs afin d‚Äôam√©liorer le projet test: Ajout de tests unitaires, int√©gration, end-to-end chore: T√¢che m√©nag√®re, comme mettre √† jour les d√©pendances, reconfigurer la CI‚Ä¶ On ne peut mettre qu‚Äôun seul type par commit, donc finis les commits qui contiennent une feature et un fix en m√™me temps‚Ä¶ Scope Ici, pas de liste impos√©e, juste le titre de l‚Äô√©l√©ment sur lequel une modification a √©t√© faite. Nous avons tendance √† d√©finir clairement les scopes du projet √† l‚Äôavance afin que tout le monde commit avec les m√™mes scopes. Pour exemple, sur une application orient√©e ‚Äúe-commerce‚Äù, on pourrait avoir les scopes suivants : homepage search my-account product-details order admin Parfois, ce scope peut √™tre omis‚Ä¶ car il n‚Äôy en a pas forc√©ment ou vous avez touch√© √† l‚Äôapplication de mani√®re globale. Dans ce cas, laissez vide üòÖ Et par contre, comme pour le type, il ne peut y avoir qu‚Äôun seul scope. Donc si vous pensez avoir deux scopes‚Ä¶ faites deux commit diff√©rents Subject Le sujet doit contenir une description courte du changement effectu√© dans le commit. Quelques conseils pour formater le message : Utiliser l‚Äôimp√©ratif Utiliser le pr√©sent Pas de 1er lettre en majuscule Pas de point . √† la fin du sujet Body Le body est la partie ‚Äúprincipale‚Äù du commit. J‚Äôai tendance √† dire qu‚Äôelle doit contenir le ‚ÄúPourquoi‚Äù du commit. Si vous avez fait une modification structurante ou si la m√©thode d‚Äôimpl√©mentation est particuli√®re, √©crivez-le dans le body ! C‚Äôest un point de vue qui est personnel, mais je pense que le body est le meilleur endroit pour accueillir un commentaire‚Ä¶ car un message de commit ne se d√©synchronise jamais du code. Footer Cette derni√®re partie permet de placer les r√©f√©rences vers toutes les issues, User stories & co. On s‚Äôen sert g√©n√©ralement pour lier (Linked to) ou cl√¥turer (Closes) les issues directement depuis git. Autre √©l√©ment qui peut √™tre ajout√© dans ce footer est la notion de Breaking Change. Il suffit d‚Äôajouter BREAKING CHANGE: suivi du d√©tail de ce fameux breaking change. Je suis oblig√© d‚Äô√©crire tout cela √† chaque fois? Non, rassurez-vous, vous n‚Äô√™tes pas oblig√©‚Ä¶ m√™me s‚Äôil est bien de mettre un max d‚Äôinformation dans le message de commit. La convention veut que seule la 1√®re ligne soit obligatoire. Donc, libre √† vous, de ne pas mettre de body et de footer Conclusion Avec cette convention, vous prendrez plaisir √† fouiller dans l‚Äôhistorique de votre projet, trouver la source d‚Äôune modification et surtout savoir ‚ÄúPourquoi cela a √©t√© fait comme cela !‚Äù Et quand l‚Äôon regarde, la diff√©rence entre l‚Äôancienne version : et la nouvelle (certes, sur des projets diff√©rents): Cela est quand m√™me bien plus clair ! R√©f√©rence Git Commit Message Conventions","timeToRead":4,"frontmatter":{"title":"Bien g√©rer ses textes de commit (partie 1)","subtitle":"Que l‚Äôon soit backend, frontend, il y a une chose qui nous rassemble, c‚Äôest notre gestionnaire de source et son utilisation. Dans cet article, je vais vous pr√©senter le conventional-changelog qui vous permettra de produire un historique de super qualit√© !","tags":["Git","Node.js"],"category":["Git","Node.js"],"date":"2019-08-11T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5056461731493098,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABVLywQM4t/8QAGRABAQEAAwAAAAAAAAAAAAAAAgEAAxIi/9oACAEBAAEFAjYbGa/OO5x2O//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwFiP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABMgIQERIhQVH/2gAIAQEABj8ClwVbPD6JCG/Lf//EABwQAAMAAgMBAAAAAAAAAAAAAAABESExQVGBkf/aAAgBAQABPyGUSNvqLg0lKYL1eiZVcsToWHs//9oADAMBAAIAAwAAABAzL//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAWEQEBAQAAAAAAAAAAAAAAAAABMRD/2gAIAQIBAT8QFjMP/8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUZFh/9oACAEBAAE/EAltBA8O42KxjwXf2Jc+6ZIoPW0uXQptIchpjqk//9k=","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg","srcSet":"/static/bb024aed8b63b69834a2bfb23baa20cf/f8f18/nature.jpg 930w,\n/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg 1200w"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/git-manage-commit-text-part1/"}},"next":{"excerpt":"En g√©nie logiciel, la couverture de code est une mesure utilis√©e pour d√©crire le taux de code source ex√©cut√© d‚Äôun programme quand une suite de test est lanc√©e. Un programme avec une haute couverture de code, mesur√©e en pourcentage, a davantage de code ex√©cut√© durant les tests ce qui laisse √† penser qu‚Äôil a moins de chance de contenir de bugs logiciels non d√©tect√©s, comparativement √† un programme avec une faible couverture de code1,2. Diff√©rentes m√©triques peuvent √™tre utilis√©es pour calculer la couverture de code ; les plus basiques sont le pourcentage de sous routine et le pourcentage d‚Äôinstructions appel√©es durant l‚Äôex√©cution de la suite de test. Couverture de code - Wikipedia La couverture de code est g√©n√©ralement utilis√©e comme mesure de qualit√© pour les logiciels, par exemple: ‚ÄòNotre code doit avoir une couverture de tests de 80% et plus.‚Äù La collection de la couverture de test avec Jest est aussi simple que l‚Äôutilisation de l‚Äôindicateur --coverage sur l‚Äôinvocation. Cet article explique comment ignorer les fichiers, fonctions, lignes et d√©clarations de la couverture dans Jest en utilisant la configuration ou istanbul pragmas. Ainsi que les raisons et les limites du pourquoi/comment vous feriez une telle chose. Comment Jest calcule-t-il la couverture ? Jest utilise istanbul sous le capot pour calculer la couverture. La plupart du temps, Jest fait abstraction de cela pour l‚Äôutilisateur final, tout ce que vous avez √† faire dans votre application est d‚Äôappeler jest --coverage (et configurer les champs de configuration de couverture appropri√©s). Le fait qu‚Äôistanbul soit utilis√© en interne montre, par exemple, que la documentation pour coverageReporters mentionne que ‚Äútout reporter d‚Äôistanbul peut √™tre utilis√©‚Äù, ce sont en fait les donn√©es de couverture collect√©es et produites qui sont pr√©sent√©es dans les rapports. Pourquoi voudrais-je exclure ou ignorer des fichiers ou lignes de la couverture ? Comme l‚Äôont d√©clar√© les responsables et les auteurs de la biblioth√®que de couverture d‚Äôistanbul : Some branches in JS code are typically hard, if not impossible to test. Examples are a hasOwnProperty check, UMD wrappers and so on. Istanbul now has a facility by which coverage can be excluded for certain sections of code. Istanbul - Ignore code for coverage purposes De plus, une couverture √† 100 % n‚Äôest pas n√©cessaire ou m√™me raisonnable dans la plupart des cas. Certains fichiers ne contiennent pas de logique (m√©tier). Ou ils contiennent une logique qui √©chouerait d‚Äôune mani√®re tr√®s √©vidente (par exemple, un crash au d√©marrage). Par exemple, le script qui d√©marrerait une application pourrait se lier √† un port, ce qui la rend difficile √† tester. Le fichier qui importe toutes les diff√©rentes d√©pendances et app.use() dans un param√®tre Express serait un autre candidat pour peut-√™tre √©viter l‚Äôenfer du test unitaire/du mock de d√©pendance. Une autre classe de fichiers/fonctions que vous pourriez vouloir ignorer √† des fins de couverture sont les ‚Äòhelpers‚Äô sp√©cifiques aux tests. Peu importe que certains d‚Äôentre eux ne soient pas ex√©cut√©s dans le cadre de tests, car ce n‚Äôest pas le code √† tester. Comme pour beaucoup de choses dans les logiciels, il s‚Äôagit de compromis. Exclure/ignorer le(s) fichier(s) de la couverture Jest en n‚Äôex√©cutant pas les tests pertinents √† l‚Äôaide de la configuration Il y a une option de configuration Jest option testPathIgnorePatterns (voir la documentation pour testPathIgnorePatterns) La fa√ßon la plus simple de configurer ceci est de le faire via le fichier package.json : Exclure/ignorer le(s) fichier(s) de la couverture en ne l‚Äôincluant pas dans la configuration de la collection de couvertures Comme alternative ou augmentation √† ne pas ex√©cuter de tests (comme vu pr√©c√©demment) de la couverture de Jest en ne l‚Äôincluant pas dans les rapports de couverture, cela est contr√¥l√© par l‚Äôoption de configuration collectCoverageFrom Jest (voir les documents pour Jest collectCoverageFrom). Utilisez quelque chose comme ce qui suit : Important: assurez-vous d‚Äôentourer le nom du fichier ignor√© avec (). Exclure/ignorer un fichier de la couverture Jest au niveau du fichier Nous pouvons utiliser istanbul pragmas pour ignorer les fichiers en utilisant le commentaire suivant en haut de chaque fichier : Exclure/ignorer la fonction de la couverture Jest Exclure/ignorer une ou plusieurs lignes de la couverture Jest √âvitez ceci si vous le pouvez, si vous testez du code, vous devriez probablement tester tout ce code. istanbul ignore next fonctionne √©galement √† ignorer les d√©clarations, d√©finitions et expressions de JS, ce qui √©quivaut √† ignorer/exclure la ligne de la couverture : Exclure/ignorer l‚Äô√©nonc√© ou la clause de la couverture Jest √âvitez ceci si vous le pouvez, si vous testez du code, vous devriez probablement tester tout ce code. Lectures compl√©mentaires Consultez la documentation originale d‚Äôistanbul sur ignorer du code pour la couverture pour un examen plus approfondi de la fa√ßon de proc√©der dans diff√©rentes situations.","timeToRead":4,"frontmatter":{"title":"Jest ignore ou exclut le fichier/fonction/√©tat de la couverture de test","subtitle":"","tags":["Node.js","Jest","Javascript"],"category":["Node.js"],"date":"2019-08-18T09:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMCBAH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAaT9xGmEzPbygxFZ/wD/xAAcEAACAgIDAAAAAAAAAAAAAAAAAQIDERIhIjL/2gAIAQEAAQUC2J1nQfA5YbH5tEf/xAAYEQACAwAAAAAAAAAAAAAAAAAAAgEQEv/aAAgBAwEBPwFmNSPX/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAQEf/aAAgBAgEBPwELkZ//xAAXEAEBAQEAAAAAAAAAAAAAAAAQAREh/9oACAEBAAY/AjpjKf/EABwQAAICAgMAAAAAAAAAAAAAAAABESExUUFhcf/aAAgBAQABPyHbBC7irLaMSjfODpUWIpwJMmJ6DOD/2gAMAwEAAgADAAAAEHgAwP/EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QYcl1P//EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAgEBPxBI7//EABsQAQEBAQEAAwAAAAAAAAAAAAERACFBMWFx/9oACAEBAAE/EC2kT85qpApHKq/gG5TwKn01p9Yh9udZx5rLKnTGIciaL13/2Q==","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/22ad5d991b79aa0c174819e09d9f9dab/81ef8/cactus.jpg","srcSet":"/static/22ad5d991b79aa0c174819e09d9f9dab/f8f18/cactus.jpg 930w,\n/static/22ad5d991b79aa0c174819e09d9f9dab/81ef8/cactus.jpg 1200w"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/jest-exclude-coverage/"}},"primaryTag":"Git","primaryCategory":"Git"}}}