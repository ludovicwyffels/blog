{"componentChunkName":"component---src-templates-author-tsx","path":"/author/ludo/page/3","webpackCompilationHash":"28b74a5dec589e4586df","result":{"data":{"authorYaml":{"id":"ludo","name":"Wyffels Ludovic","website":"https://ludovicwyffels.github.io","twitter":"WYFFELSLudovic","bio":"D√©veloppeur senior. Fullstack + DevOps","facebook":"ludovicwyffels","location":"Comines, Belgique","profile_image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","aspectRatio":1,"src":"/static/5f2c129e42248a92c87b13b4293950cf/647de/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/647de/ghost.png 400w","sizes":"(max-width: 400px) 100vw, 400px"}}},"avatar":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","aspectRatio":1,"src":"/static/5f2c129e42248a92c87b13b4293950cf/7c0ed/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/09f8c/ghost.png 50w,\n/static/5f2c129e42248a92c87b13b4293950cf/bf65b/ghost.png 100w,\n/static/5f2c129e42248a92c87b13b4293950cf/7c0ed/ghost.png 200w,\n/static/5f2c129e42248a92c87b13b4293950cf/fdbb0/ghost.png 300w,\n/static/5f2c129e42248a92c87b13b4293950cf/647de/ghost.png 400w","sizes":"(max-width: 200px) 100vw, 200px"}}}},"allMarkdownRemark":{"totalCount":38,"edges":[{"node":{"excerpt":"Dans le pass√©, vous avez peut-√™tre utilis√© des notifications dans votre programme en utilisant quelque chose comme PubNub ou pusher ou un autre service tiers.\nMais ce module, web-push, nous permet de le faire sans l‚Äôaide de l‚Äôun de ces services tiers. Avez-vous d√©j√† entendu parler de service worker? Si vous ne connaissez pas ce qu‚Äôest une progressive web apps, il y a peu de chance que le terme de service worker vous parle D√©finition d‚Äôun service worker Les service workers jouent essentiellement le r√¥le de serveurs proxy plac√©s entre une application web, et le navigateur ou le r√©seau (lorsque disponible.) Ils sont destin√©s (entre autres choses) √† permettre la cr√©ation d‚Äôexp√©riences de navigation d√©connect√©e efficaces, en interceptant les requ√™tes r√©seau et en effectuant des actions appropri√©es selon que le r√©seau est disponible et que des ressources mises √† jour sont √† disposition sur le serveur. Ils permettront aussi d‚Äôacc√©der aux APIs de notifications du serveur (push) et de synchronisation en arri√®re-plan.  Plus d‚Äôinformation sur son fonctionnement sur : un guide pour d√©butant la documentation de mozilla Le service worker fonctionne avec les derni√®res versions de Chrome et Firefox, je ne crois pas que Edge le support encore. Mais ce n‚Äôest pas grave puisque Edge va bient√¥t changer son moteur pour Chromium. Module web-push Commen√ßons un nouveau projet en installant les d√©pendances Cr√©ons un fichier index.js Nous avons besoin de g√©n√©rer des cl√©s, pour se faire: ou  Vous obtenez une paire de cl√©s priv√©es/public comme ceux-ci: On va les utiliser tout de suite Il nous reste a configurer un dossier statique, en ajoutant la ligne suivante dans notre fichier index.js Red√©marrer le serveur. Cr√©er le dossier client client/index.html client/client.js Dans le service Worker, nous allons juste √©couter les √©v√©nements push client/worker.js Ouvrer dans votre navigateur Chrome/Firefox, l‚ÄôURL localhost:5000, vous devriez avoir une popup vous demandant d‚Äôautoriser ou non les notifications","timeToRead":5,"frontmatter":{"title":"Push notification","subtitle":"Contruire une notification en utilisant Node.js et un module appel√© web push.","tags":["Node.js","Javascript"],"date":"2019-05-04T20:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABfzVFgNka/8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAARESMf/aAAgBAQABBQJ+R90xnAwm6Ty5Ivf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAfEAABBAAHAAAAAAAAAAAAAAAAAQIREhATIjFygZH/2gAIAQEABj8CZyFrtBqcsmXXsonuH//EABwQAAIBBQEAAAAAAAAAAAAAAAERABAhMUFRYf/aAAgBAQABPyFARlCTfkBYLIfYMKzgj5QxZNSoB7Gh/9oADAMBAAIAAwAAABCr3//EABYRAQEBAAAAAAAAAAAAAAAAAAEAIf/aAAgBAwEBPxAdsb//xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQIBAT8Qsa//xAAbEAEBAQADAQEAAAAAAAAAAAABEQAhMUGBkf/aAAgBAQABPxAdGbFMpczJoSiHzDIXB3kxRCCFk+TIZQLs5ff3cHv/2Q==","aspectRatio":1.5003750937734435,"src":"/static/65314db62cb2374caf4cf5b8ceab49a1/883ab/webpush.jpg","srcSet":"/static/65314db62cb2374caf4cf5b8ceab49a1/f8f18/webpush.jpg 930w,\n/static/65314db62cb2374caf4cf5b8ceab49a1/0e6ff/webpush.jpg 1860w,\n/static/65314db62cb2374caf4cf5b8ceab49a1/883ab/webpush.jpg 2000w","sizes":"(max-width: 2000px) 100vw, 2000px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-push-notification/"}}},{"node":{"excerpt":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apport√©es √† la branche principale de notre r√©f√©rentiel GitHub . Nous allons configurer Travis CI de mani√®re √† ce que lors de la mise en place d‚Äôun nouveau commit pour notre application Angular, celui-ci: Ex√©cuter le linter Lancer nos tests unitaires Lancer nos tests E2E Construire notre application pour la production D√©ploy√© vers GitHub Pages D√©finitions Test continu (CT) Les tests continus consistent √† ex√©cuter des tests automatis√©s dans le cadre du pipeline de livraison de logiciels pour obtenir un retour imm√©diat sur les risques commerciaux associ√©s √† une version candidate du lociel. Int√©gration Continue (CI) L‚Äôint√©gration continue est un ensemble de pratiques utilis√©es en g√©nie logiciel consistant √† v√©rifier √† chaque modification de code source que le r√©sultat des modifications ne produit pas de r√©gression dans l‚Äôapplication d√©velopp√©e. En pratique Ok, ces d√©finitions sont bien. Mais, en pratique, qu‚Äôest-ce qu‚Äôils signifient vraiment? Pour les besoins de cet article, je vais utiliser des d√©finitions similaires, mais tr√®s pragmatiques et sp√©cifiques: CT Nos tests sont ex√©cut√©s automatiquement avant chaque d√©ploiement. Et notre code ne sera pas d√©ploy√© si des tests √©chouent. CI Transf√©rer des modifications dans une branche sp√©cifique de notre repo GitHub lance un processus de d√©ploiement automatis√©. Cr√©er une application Angular Pour commencer, cr√©ez une nouvelle application Angular en utilisant Angular CLI. Aller sur: http://localhost:4200 GitHub Cr√©er un nouveau repo GitHub: travis-demo Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-√™tre d‚Äôabord vous engager si vous avez effectu√© des mises √† jour. Assurez-vous de remplacer ludovicwyffels par votre propre identifiant GitHub. Travis CI Inscrivez-vous √† Travis CI en utilisant votre compte GitHub. Acc√©dez √† votre profil pour voir la liste des repos. Si vous avez d√©j√† un compte, vous devrez utiliser le bouton Sync account pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-√™tre utiliser le filtre pour voir r√©ellement votre repo si vous en avez beaucoup. Vous pouvez cliquer sur le bouton Param√®tres √† droite du repo. Ajouter une configuration Travis CI Afin de dire √† Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI. Cr√©ez un fichier √† la racine de votre espace de travail appel√© .travis.yml avec le contenu suivant: Pour le --base-ref vous devrez utiliser votre propre identifiant GitHub. Ce fichier indique √† Travis CI de proc√©der comme suit: Utilisez Node.js Surveillez uniquement la branche principale pour conna√Ætre les modifications. Avant d‚Äôex√©cuter l‚Äôun des scripts, installez Angular CLI Assurez-vous que l‚Äôapplication respecte nos r√®gles en mati√®re de linting utilisant ng lint. Construisez notre application en utilisant ng build. Apr√®s avoir ajout√© le fichier de configuration Travis CI, commiter et pousser. Apr√®s avoir effectu√© cette op√©ration, passez au tableau de bord Travis CI pour afficher le journal Travis CI au fur et √† mesure de la cr√©ation de votre application. Vous devrez peut-√™tre cliquer sur l‚Äôonglet Current pour le voir se d√©velopper. √Ä l‚Äôextr√™me droite du journal, vous pouvez cliquer sur Follow log pour faciliter l‚Äôaffichage du journal mis √† jour. Une fois que Travis CI a termin√© notre script et cr√©√© l‚Äôapplication, vous verrez l‚Äôic√¥ne virer au vert pour vous informer que votre script s‚Äôest termin√© avec succ√®s. Test continu Maintenant que nous avons cr√©√© nos applications, allons dans le monde des tests continus en laissant Travis CI ex√©cuter nos tests unitaires √† chaque nouveau commit. Malheureusement, nous ne pouvons pas simplement npm run test sur Travis CI. En effet, nous ne pouvons pas r√©ellement lancer une interface graphique de navigateur. Nous allons donc utiliser Headless Chrome pour ex√©cuter nos tests unitaires. Suivez les instructions pour cr√©er un nouveau script npm comme celui-ci: Nous pouvons maintenant ex√©cuter nos tests unitaires en utilisant Headless Chrome comme ceci: Maintenant, ajouter npm run test-headless √† notre fichier .travis.yml dans la section script comme ceci: Commiter et push sur GitHub: Apr√®s avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet ex√©cuter les tests unitaires, puis faire le build. Int√©gration continue Maintenant que nous testons et buildons, nous souhaitons d√©ployer notre application. Nous devons cr√©er un jeton d‚Äôacc√®s personnel GitHub. Suivez ces instructions. Dans le tableau de bord Travis CI, acc√©dez √† votre projet. En haut √† droite, cliquez sur Param√®tres. Faites d√©filer jusqu‚Äô√† la section Variables d‚Äôenvironnement. Ajoutez une nouvelle variable d‚Äôenvironnement nomm√©e: GITHUB_TOKEN Pour la valeur, collez la valeur r√©elle de votre jeton d‚Äôacc√®s personnel GitHub que vous avez g√©n√©r√©. Cliquez sur Ajouter. D√©ploiement sur les pages GitHub Enfin, configurons Travis CI pour le d√©ploiement sur GitHub Pages. Ajoutez une section de d√©ploiement √† votre .travis.yml. A ce stade, votre fichier devrait resembler √† ceci: Encore une fois, assurez-vous que vous utilisez votre propre identifiant GitHub au lien de ludovicwyffels. Ceci indique √† Travis CI d‚Äôutiliser notre jeton GitHub √† partir de la variable d‚Äôenvironnement: GITHUB_TOKEN En outre, il sp√©cifie que les fichiers √† d√©ployer proviennent de notre dossier dist: dist/travis-demo Engagez-vous et appuyez sur GitHub: Nous devrions √©galement pouvoir acc√©der √† l‚ÄôURL de nos pages GitHub et voir notre application d√©ploy√©e.","timeToRead":5,"frontmatter":{"title":"Angular DevOps: CT/CI avec Travis CI et Github Pages","subtitle":"Utilisation de Travis CI pour impl√©menter les tests continus (CT) et l'int√©gration continue (CI) afin de d√©ployer notre application Angular sur Github Pages","tags":["Angular","DevOps","Typescript","Node.js"],"date":"2019-04-29T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz2P4/+/f/79/geQ/MPkfGfyDYIQgWBUUALkM/1HBPzBA6EUS/48BGH6/ePF1yfK7lTV3Fi76/uwZWB3I1I+fX57eu/TKqU0/fn0BciFWvXr1qrysLCQoaN3atSDNb1vaHylrPpk8bY2M/LWWtq9/fj9/+uz3r2+Xzi1c3puzeXH59Wubfv36/fr16z9//mRlZNRUV/f29MTFxGxYv57hfd+EV8npX67fOBafeHvCpMXr17c0tVy/cq63PK2hIru5OG3h3I7TZ06VlJRs2LAhODDwx48fQDvXrFmTnprK8HXn7rcZORe9/Y6mpL3ev//Ry5dXLl16/vzlhNbaSYVZrQkxi2dNe//h44EDBx4+fBgYELB7166fP34AGR3t7aAA+7F7783M7Kd790FCBhLmJ1as2RQcvy214O6JMyA///kDJPfs2bNkyZLr168nJSZ++vQJZ2j/+/Pn+4/vP//9QQ5tIPnz50+4GrBmYEhCEFbw7x9mhEH0M/ynAFCkGQDmsz6sxuzErwAAAABJRU5ErkJggg==","aspectRatio":1.7777777777777777,"src":"/static/1a448c2debbe7a75dd52ebe4c3d9c37e/9ecf6/ngTravisGit.png","srcSet":"/static/1a448c2debbe7a75dd52ebe4c3d9c37e/4c9af/ngTravisGit.png 930w,\n/static/1a448c2debbe7a75dd52ebe4c3d9c37e/9ecf6/ngTravisGit.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/angular-travis-ctci/"}}},{"node":{"excerpt":"Depuis que j‚Äôai d√©couvert TypeScript, je l‚Äôutilise pour toutes mes applications JavaScript. Il y a tellement d‚Äôavantages √† utiliser TypeScript que vous aurez besoin d‚Äôun argument convaincant pour me permettre d‚Äô√©crire quoi que ce soit en JavaScript Vanilla. Dans cet article, je vais vous montrer comment configurer un environnement de d√©veloppement simple pour √©crire une application Node.js en TypeScript. Permettez-moi de commencer par dire qu‚Äôil existe probablement un millier de fa√ßons diff√©rentes de cr√©er des applications Node.js en TypeScript. Je vais juste montrer la fa√ßon dont j‚Äôaime le faire moi-m√™me. Si vous n‚Äôavez pas envie de lire tout cet article, vous pouvez trouver mon projet de d√©marrage ici: https://github.com/toxsickcoder/node-typescript-starter . Il contient des fonctionnalit√©s suppl√©mentaires dont nous ne discuterons pas dans cet article. Package.json Comme je l‚Äôai d√©j√† dit, il y a beaucoup de fa√ßons diff√©rentes de le faire. J‚Äôaime utiliser Webpack pour mes projets TypeScript. Commen√ßons par cr√©er un package.json. Vous pouvez g√©n√©rer un package.json √† l‚Äôaide de la commande npm init ou copier-coller le code ci-dessous et le modifier. Commen√ßons par une simple configuration Webpack pour un projet JavaScript Node.js. Apr√®s avoir termin√© la configuration de base, j‚Äôajouterai TypeScript. L‚Äôapplication Comme mentionn√© pr√©c√©demment, nous allons commencer par une application JavaScript, puis convertir celle-ci en TypeScript. Cr√©ons un r√©pertoire src/ avec un main.js et information-logger.js avec certaines fonctionnalit√©s de Node.js: Ce script de base enregistre certaines informations d‚Äôapplication et syst√®me sur la console. Je peux voir la sortie suivante apr√®s avoir ex√©cut√© le node main.js Webpack La premi√®re chose √† faire avant d‚Äôutiliser Webpack est d‚Äôinstaller les d√©pendances n√©cessaires. N‚Äôoubliez pas d‚Äôutiliser l‚Äôindicateur -D car il s‚Äôagit de devDependencies. Vous avez peut-√™tre remarqu√© que je n‚Äôai pas install√© webpack-dev-server. C‚Äôest parce que nous cr√©ons une application Node.js. Plus tard, je vais utiliser nodemon qui a le m√™me objectif. webpack.config.js La prochaine √©tape consiste √† cr√©er un fichier webpack.config.js o√π nous indiquerons √† Webpack comment il doit traiter notre code. Comme vous pouvez le constater, il ne faut pas grand-chose pour commencer avec Webpack. Les deux seules options requises sont entry et target. Nous d√©clarons notre point d‚Äôentr√©e √† l‚Äôaide du champ entry et nous informons Webpack que nous travaillons dans Node.js avec le champ target. Nous pouvons utiliser le champ mode pour indiquer √† Webpack qu‚Äôil doit se concentrer sur la vitesse de compilation (d√©veloppement), ou sur l‚Äôobfuscation et la minification (production). Pour faciliter le d√©bogage, nous utilisons le champ devtool pour indiquer que nous voulons des sources maps si nous nous ex√©cutons en d√©veloppement. De cette fa√ßon, s‚Äôil y a une erreur, nous pouvons facilement trouver l‚Äôendroit o√π elle s‚Äôest produite dans notre code. Pour utiliser Webpack, nous allons cr√©er quelques commandes npm: Nous pouvons maintenant construire notre application en ex√©cutant l‚Äôune ou l‚Äôautre de ces commandes. Il cr√©era un r√©pertoire dist/ avec le fichier de sortie main.js √† l‚Äôint√©rieur. Notre projet devrait ressembler √† ceci maintenant: nodemon Vous avez peut-√™tre remarqu√© qu‚Äôapr√®s l‚Äôex√©cution d‚Äôune commande de d√©marrage, Webpack s‚Äôarr√™te apr√®s la construction de l‚Äôapplication. Il ne surveille pas les modifications de fichiers que nous apportons. Et puisque nous travaillons avec Node.js, nous ne pouvons pas utiliser le serveur webpack-dev-server. Heureusement, nous pouvons utiliser nodemon pour r√©soudre ce probl√®me. C‚Äôest un outil sp√©cialement con√ßu √† cet effet: red√©marrer les applications Node.js pendant le d√©veloppement. Commen√ßons par installer le nodemon-webpack-plugin. N‚Äôoubliez pas le flag -D car c‚Äôest une devDependency. Cr√©ons un nouveau flag nodemon et ajoutons le plug-in √† notre fichier webpack.config.js. Lorsque nous passerons le flag nodemon, nous d√©finirons la configuration de la surveillance Webpack et nous ajouterons le plug-in nodemon . La configuration de la surveillance Webpack reconstruira l‚Äôapplication lorsque nous modifierons un fichier. Le plug-in nodemon red√©marrera l‚Äôapplication une fois la reconstruction termin√©e. Nous devrons √©galement mettre √† jour nos commandes npm. J‚Äôai √©galement cr√©√© des commandes de construction, sans le flag nodemon. Voil√†, une configuration de base Webpack pour l‚Äôapplication Node.js. La prochaine √©tape est d‚Äôajouter TypeScript! TypeScript Et maintenant, au moment que nous attendions tous, ajoutons TypeScript! Commen√ßons par installer les d√©pendances dont nous avons besoin. S‚Äôagissant d‚Äôun projet Node.js, nous devons √©galement installer les typings associ√©s. Je travaille sur la version LTS de Node.js, la version 10. C‚Äôest pourquoi la version ^10.0.0 de @types/node. ts-loader Nous allons utiliser le plug-in Webpack ts-loader pour compiler notre TypeScript. Pour ce faire, nous devons dire √† Webpack de traiter les fichiers TypeScript avec le plug-in ts-loader. Nous devons modifier notre extension de fichier d‚Äô entr√©e en .ts et indiquer √† Webpack qu‚Äôil doit √©galement r√©soudre les fichiers .ts (Webpack ne fonctionne qu‚Äôavec les fichiers .js par d√©faut). tsconfig.json Si nous essayons d‚Äôex√©cuter notre application maintenant, elle se plantera. Il nous manque encore un fichier tsconfig.json. Alors cr√©ons-en un. Je pr√©f√®re les fichiers tsconfig stricts, comme vous pouvez le voir ci-dessus. Tu n‚Äôas pas √† faire √ßa. J‚Äôaime √©galement d√©finir une cible √©lev√©e (esnext ou es2018) car Node.js offre un excellent support pour les nouvelles fonctionnalit√©s JavaScript. L‚Äôapplication Nous devons toujours changer l‚Äôextension des fichiers JavaScript de .js √† .ts. Faisons-le et essayons de lancer le projet. Apr√®s avoir ex√©cut√© le projet, nous pouvons imm√©diatement constater que nous avons commis une ‚Äúerreur‚Äù dans l‚Äôapplication de test que nous avons cr√©√©e. Nous ne pouvons pas d√©structurer notre champ name du package.json car il est d√©j√† d√©fini ou nous l‚Äô√©craserions. Faisons donc quelques modifications pour cr√©er les fichiers. Si vous avez tout suivi, voici √† quoi devrait ressembler notre structure de projet: Et nous sommes pr√™ts √† √©crire des applications Node.js en TypeScript! Note finale Je suis s√ªr qu‚Äôil existe des milliers de fa√ßons diff√©rentes d‚Äô√©crire des applications Node.js dans TypeScript. Ce n‚Äôest en aucun cas la fa√ßon dont vous devriez le faire, c‚Äôest une fa√ßon de le faire. Les prochaines √©tapes pourraient √™tre l‚Äôint√©gration de TSLint, l‚Äôajout d‚Äôun fichier Docker, la configuration d‚Äôun pipeline CI‚Ä¶","timeToRead":7,"frontmatter":{"title":"Comment √©crire des applications Node.js en TypeScript","subtitle":"Et simplifiez leur maintenance tout en cr√©ant moins de bugs.","tags":["Node.js","TypeScript","Javascript"],"date":"2019-04-27T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVQoz41Qu07DQBDMd/BDKfgTUP4hKAV0KKSJQJRpoxSRLEHBI0oVS0ljOU/HhgIs2cjYzsN3u3tczhKKohx4itWududm5kriTwAAEem2pYNZngZBwIFvIJajYXQXi1margA5x62WnCu4nlOrXjyardtl2ei1Kudnd/eN65urj9QehW0krlPekZMk9lzPmg+spOO8268vz+OJNRyamYj99TS/0dpW/FUYRr9eCJFl20KZEZEzmVb+E5LCOmPO5xcjcSB7xLYQbGmevtl12XEAWbvj6ORy9DD7FupJrbLagGs33fnTrkOU1fI39b7vRZkKIv7JXBxHyHnafTtIggqSi+MHFk154/b4x+YAAAAASUVORK5CYII=","aspectRatio":1.7777777777777777,"src":"/static/8b378c07791d424a4afbd8bf14b92449/9ecf6/node-js-ts.png","srcSet":"/static/8b378c07791d424a4afbd8bf14b92449/4c9af/node-js-ts.png 930w,\n/static/8b378c07791d424a4afbd8bf14b92449/9ecf6/node-js-ts.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-typescript/"}}},{"node":{"excerpt":"Ces derniers jours, je travaille sur une nouvelle page pour mon site web. Je voulais avoir une timeline pour pr√©senter certaines de mes r√©alisations au fil des ans. Je l‚Äôai fait pour deux raisons: Mon futur moi se retournera un jour et dira: ‚ÄúWaouh‚Ä¶ Je me souviens du jour o√π j‚Äôai fait √ßa! Quel bonheur d‚Äôavoir atteint cet objectif!‚Äù Notre succ√®s est un voyage,pas une destination, et je souhaite √©crire chaque objectif que je r√©alise en cours de route. Cela pourrait attirer plus de clients (nous verrons comment √ßa se passe) √Ä mon avis, c‚Äôest un type de portfolio diff√©rent. Un portfolio unique peut-√™tre? üòú N√©anmoins‚Ä¶ Construisons quelque chose maintenant! Dans l‚Äôimage ci-dessus, vous pouvez voir ce que nous allons construire aujourd‚Äôhui avec React! Avant de commencer, d√©crivons les √©tapes √† suivre: Cr√©er les donn√©es dont nous aurons besoin Cr√©er le composant TimelineItem - chaque entr√©e de timeline individuelle Cr√©er un conteneur Timeline - il prendra les donn√©es et les transmettra aux TimelineItems. Donnez du style √† tout ce que vous faites Cr√©er les donn√©es Avant de cr√©er les composants React, nous devons savoir exactement √† quoi ressembleront les donn√©es pour pouvoir planifier la structure du DOM. Pour cette application Timeline, nous aurons besoin d‚Äôun tableau d‚Äôobjets. Nous appellerons ce tableau: timelineData. Voyons √† quoi cela pourrait ressembler:  Ensuite, nous allons construire le composant TimelineItem. Ceci utilisera les donn√©es de l‚Äôobjet ci-dessus:  Le composant TimelineItem Nous avons les tags suivants: Div .timeline-item - utilis√© comme wrapper. Cette div aura la moiti√© de la largeur de la largeur de son parent (50%) et toutes les autres div .timeline-item seront plac√©es du c√¥t√© droit en utilisant le s√©lecteur :nth-child(odd) Div .timeline-item-content - un autre wrapper (plus d‚Äôinformations sur la raison pour laquelle nous en avons besoin dans la section relative au style) Span .tag - cette balise aura une couleur d‚Äôarri√®re-plan personnalis√©e en fonction de la cat√©gorie link - nous devrons v√©rifier si un lien est fourni parce que nous ne voulons pas toujours en avoir un Span .circle - cette balise sera utilis√©e pour placer un cercle sur la ligne du milieu Note: Tout aura beaucoup plus de sens quand nous arriverons √† la partie CSS, mais avant cela, cr√©ons le composant Timeline: Le conteneur Timeline Ce composant mappera fondamentalement sur le tableau et pour chaque objet il cr√©era un composant TimelineItem. Nous ajoutons √©galement une petite v√©rification pour nous assurer qu‚Äôil y a au moins un √©l√©ment dans le tableau: Comme mentionn√© ci-dessus, timelineData est le tableau d‚Äôobjets contenant toutes les informations requises. Dans mon cas, j‚Äôai stock√© ce tableau dans un fichier et je l‚Äôai import√©, mais vous pouvez le prendre √† partir de votre propre base de donn√©es ou d‚Äôune API, √† vous de choisir. Le CSS Remarque: la plupart des wrappers seront des conteneneurs flexbox, car nous pouvons jouer plus facilement avec leur positionnement. Commen√ßons par le CSS .timeline-container: Nous utilisons le s√©lecteur ::after pour cr√©er cette ligne rouge au milieur du .timeline-container. En utilisant la fonction calc(), nous pouvons positionner la ligne exactement au milieur en soustrayant la moiti√© de sa taille (2px) √† 50%. Nous devons le faire, car par d√©faut, la propri√©t√© left positionne en fonction du bord gauche d‚Äôun √©l√©ment et non du milieu. Passons maintenant au wrapper .timeline-item. Ci-dessous, vous pouvez voir un exemple de la fa√ßon dont ils sont positionn√©s dans leur parent (le .timeline-container). A des fins de d√©monstration, j‚Äôai ajout√© une bordure pour mettre en √©vidence ces wrappers. timeline wrapper Comme vous pouvez le constater, tous les autres wrappers vont √† droite et le wrapper interne (le .timeline-item-content) prend moins d‚Äôespace - l‚Äôespace est donn√© par la balise p qui est √† l‚Äôint√©rieur (la plupart du temps). Voyons le CSS pour ceci: La cl√© de ceci est que nous utilisons le s√©lecteur :nth-child(odd) et que nous d√©finissons la propri√©t√© align-self sur flex-end ce qui signifie: ‚Äúallez √† droite autant que vous le pouvez!‚Äù √âtant donn√© que ces wrappers ont une largeur de 50%, vous pouvez voir que deux d‚Äôentre eux occupent toute la largeur. √Ä partir de maintenant, chaque fois que nous voulons styler diff√©remment quelque chose du bon c√¥t√©, nous devrons utiliser cette approche. Ensuite, le .timeline-item-content: Nous avons quelques choses √† faire: Ce wrapper a une width fixe et aussi une max-width. C‚Äôest parce que nous voulons qu‚Äôil y ait des limites, ce qui signifie que s‚Äôil n‚Äôy a que quelques mots, nous voulons que la box ait au moins 400px de large, mais s‚Äôil y a beaucoup de texte, il ne devrait pas occuper tout l‚Äôespace. (50% du wrapper .timeline-item) mais le texte doit passer √† la ligne suivante -> c‚Äôest la raison pour laquelle nous avons utilis√© ce second wrapper: .timeline-item-content Les propri√©t√©s text-align et align-items sont utilis√©es pour pousser les √©l√©ments internes vers la gauche ou vers la droite, en fonction du parent. La petite fl√®che qui pointe vers la ligne m√©diane est donn√©e par les styles appliqu√©s sur le s√©lecteur ::after. Fondamentalement, il s‚Äôagit d‚Äôune box avec une box-shadow appliqu√©e sur elle qui est tourn√©e de 45deg Comme mentionn√© ci-dessus, nous appelons le c√¥t√© droit en s√©lectionnant le parent avec le s√©lecteur :nth-child(odd) Ensuite, tous les √©l√©ments internes: Peu de choses √† noter ici: Comme vous l‚Äôavez peut-√™tre devin√©, le tag est positionn√© en absolutecar nous souhaitons le conserver dans le coin sup√©rieur gauche (ou droit), quelle que soit la taille de la box. Nous voulons ajouter un petit signe apr√®s la balise a pour indiquer qu‚Äôil s‚Äôagit d‚Äôun lien. Nous cr√©ons un .circle. Nous le positionnons au-dessus de la ligne m√©diane, directement devant la fl√®che. Nous avons presque fini! üòÑ La seule chose qui reste √† faire est d‚Äôajouter le CSS pour que tout soit r√©actif, quelle que soit la table de l‚Äô√©cran: Nous avons deux media query: Sur les petites tailles d‚Äô√©cran d‚Äôordinateur portable - max-width: 1023px - nous voulons permettre au .timeline-item-content de .timeline-item-content sur toute la largeur de son parent, car l‚Äô√©cran est plus petit et sinon, il aurait l‚Äôair trop serr√©. Sur les t√©l√©phones - max-width: 767px param√©trez le .tag sur toute la largeur (et pour cela nous n‚Äôavons pas besoin d‚Äôoublier de soustraire 10px du total des 100% - c‚Äôest parce que nous l‚Äôavons positionn√© √† left: 5px, nous enlevons donc le double de ce montant) centrer tout le texte et le pousser vers le haut juste un peu supprime le curseur sur le lien et ajoute un soulignement - son apparence est meilleure sur mobile Nous avons termin√©! Voici le r√©sultat: https://react-timeline-qvnqqp.stackblitz.io Conclusion S‚Äôil y a quelque chose que vous n‚Äôavez pas compris dans cet article, assurez-vous de me contacter et je me ferai un plaisir de r√©pondre √† vos questions! Bon codage! üòá","timeToRead":8,"frontmatter":{"title":"Comment cr√©er une timeline avec React","subtitle":"","tags":["React","Javascript","Node.js"],"date":"2019-04-26T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHGcgsuJA//xAAZEAADAQEBAAAAAAAAAAAAAAAAARECEBL/2gAIAQEAAQUCMZrk5Wemf//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/Alp//8QAGhABAQACAwAAAAAAAAAAAAAAAQARITFBYf/aAAgBAQABPyEIAHV1G7G4Dhb3X//aAAwDAQACAAMAAAAQNy//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8Qrj//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8Qjr//xAAbEAEAAgIDAAAAAAAAAAAAAAABABExQYHR8f/aAAgBAQABPxC3UQmjtlUpQcwHqKtLmC98/9k=","aspectRatio":1.7777777777777777,"src":"/static/b5a5e890938c86b8a136334398b5352e/989b1/react-timeline.jpg","srcSet":"/static/b5a5e890938c86b8a136334398b5352e/f8f18/react-timeline.jpg 930w,\n/static/b5a5e890938c86b8a136334398b5352e/989b1/react-timeline.jpg 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/react-timeline-component/"}}},{"node":{"excerpt":"Introduction Express.js est un excellent framework pour la cr√©ation d‚Äôune API REST en node.js, mais il ne vous donne aucune indication sur la mani√®re d‚Äôorganiser votre projet node.js. Bien que cela puisse para√Ætre stupide, c‚Äôest un probl√®me r√©el. Une organisation correcte de la structure de votre projet node.js √©vitera la duplication de code, am√©liorera la stabilit√© et, √©ventuellement, vous aidera √† faire √©voluer vos services si cela est effectu√© correctement. Cet article est une recherche approfondie, issue de mes ann√©es d‚Äôexp√©rience dans le traitement d‚Äôun projet node.js mal structur√©, de mauvais sch√©mas et d‚Äôinnombrables heures de refactorisation de code et de d√©placements. Table des mati√®res La structure du dossier üè¢ Architecture √† 3 couches ü•™ Couche service üíº Couche Pub/Sub Ô∏èÔ∏èÔ∏èÔ∏èüéôÔ∏èÔ∏è Injection de d√©pendances üíâ Test unitaire üïµüèª Cron Jobs et t√¢ches r√©currentes ‚ö° Configurations et secrets ü§´ Loaders üèóÔ∏è  La structure du dossier üè¢ Voici la structure du projet node.js dont je parle. J‚Äôutilise ceci dans chaque service d‚ÄôAPI REST de node.js que je construis. Voyons en d√©tail ce que chaque composant fait. C‚Äôest plus qu‚Äôun moyen de commander des fichiers JavaScript‚Ä¶  Architecture √† 3 couches ü•™ L‚Äôid√©e est d‚Äôutiliser le principe de s√©paration des pr√©occupations pour √©loigner la logique m√©tier des routes de l‚ÄôAPI node.js.  Parce qu‚Äôun jour, vous voudrez utiliser votre logique m√©tier sur un outil CLI, ou ne pas aller tr√®s loin, dans une t√¢che r√©currente. Et faire un appel API du serveur node.js √† lui-m√™me, ce n‚Äôest pas une bonne id√©e‚Ä¶   Ne placez pas votre logique m√©tier dans les contr√¥leurs !!! Vous pouvez √™tre tent√© d‚Äôutiliser simplement les contr√¥leurs express.js pour stocker la logique m√©tier de votre application, mais cela devient rapidement du code spaghetti. D√®s que vous aurez besoin d‚Äô√©crire des tests unitaires, vous finirez par avoir affaire √† des mocks complexes pour des objets express.js tel que req ou res. Il est difficile de distinguer quand une r√©ponse doit √™tre envoy√©e et quand continuer le traitement en ‚Äúarri√®re-plan‚Äù, disons apr√®s que la r√©ponse a √©t√© envoy√©e au client. Voici un exemple de ce qu‚Äôil ne faut pas faire.  Utilisez une couche de service pour votre logique m√©tier üíº Cette couche est l‚Äôendroit o√π votre logique m√©tier doit vivre. C‚Äôest juste un ensemble de classes, suivant les principes SOLID appliqu√©s √† node.js. Dans cette couche, il ne devrait exister aucune forme de ‚Äúrequ√™te SQL‚Äù, utilisez la couche d‚Äôacc√®s aux donn√©es pour cela. √âloignez votre code du routeur express.js Ne transmettez pas l‚Äôobjet req ou res √† la couche service Ne renvoyez aucun √©l√©ment li√© √† la couche de transport HTTP, tel qu‚Äôun code d‚Äô√©tat ou des en-t√™tes de la couche de service. Exemple Voici comment votre service travaillera dans les coulisses.  Utilisez aussi un calque Pub/Sub üéôÔ∏èÔ∏è Le mod√®le pub/sub va au-del√† de l‚Äôarchitecture classique √† 3 couches propos√©e ici, mais il est extr√™mement utile. Le simple endpoint de l‚ÄôAPI node.js qui cr√©e un utilisateur imm√©diatement, peut vouloir appeler des services tiers, peut-√™tre √† un service d‚Äôanalyse, ou peut-√™tre d√©marrer une s√©quence de courriels. T√¥t ou tard, cette simple op√©ration ‚Äúcr√©er‚Äù fera plusieurs choses, et vous obtiendrez 1000 lignes de code, le tout en une seule fonction. Cela viole le principe de la responsabilit√© unique. Il est donc pr√©f√©rable de s√©parer les responsabilit√©s d√®s le d√©part, afin que votre code reste maintenable. Un appel imp√©ratif √† un service d√©pendant n‚Äôest pas la meilleure fa√ßon de le faire. Une meilleure approche est d‚Äô√©mettre un √©v√©nement, c‚Äôest-√†-dire ‚Äúun utilisateur s‚Äôest inscrit avec cet email‚Äù. Et vous avez termin√©, c‚Äôest maintenant la responsabilit√© des listeners de faire leur travail. Vous pouvez maintenant scinder les gestionnaires d‚Äô√©v√©nements/listeners en plusieurs fichiers. Vous pouvez mettre les instructions en attente dans un bloc try-catch ou vous pouvez simplement le laisser √©chouer et g√©rer le  ‚ÄòunhandledPromise‚Äô process.on('unhandledRejection',cb)  Injection de d√©pendances üíâ Dependency Injection (D.I.) ou inversion of control (IoC) est un mod√®le commun qui aidera l‚Äôorganisation de votre code, en ‚Äúinjectant‚Äù ou en passant par le constructeur les d√©pendances de votre classe ou fonction. De cette fa√ßon, vous aurez la possibilit√© d‚Äôinjecter une ‚Äúd√©pendance compatible‚Äù lorsque, par exemple, vous √©crirez les tests unitaires pour le service, ou lorsque le service sera utilis√© dans un autre contexte. Code sans D.I. Code avec injection manuelle de d√©pendance Vous pouvez maintenant injecter des d√©pendances personnalis√©es. Le nombre de d√©pendances qu‚Äôun service peut avoir est infini, et refactoriser chaque instanciation de celui-ci lorsque vous en ajoutez un nouveau est une t√¢che ennuyeuse et sujette aux  erreurs. C‚Äôest pourquoi des frameworks d‚Äôinjection de d√©pendance ont √©t√© cr√©√©s. L‚Äôid√©e est de d√©clarer vos d√©pendances dans la classe, et quand vous avez besoin d‚Äôune instance de cette classe, vous appelez simplement le Service Locator. Voyons un exemple utilisant typedi, une biblioth√®que npm qui apporte l‚Äôinjection de d√©pendances √† node.js Pour en savoir plus sur l‚Äôutilisation de typedi, consultez la documentation officielle AVERTISSEMENT exemple en typescript services/user.ts Maintenant typedi s‚Äôoccupera de r√©soudre toute d√©pendance dont le UserService a besoin. L‚Äôabus d‚Äôappels de localisateur de service est un anti-pattern Utilisation de l‚Äôinjection de d√©pendance avec Express.js dans Node.js L‚Äôutilisation de D.I. dans express.js est la derni√®re pi√®ce du puzzle de l‚Äôarchitecture de ce projet node.js. Couche de routage G√©nial, le projet √† l‚Äôair g√©nial !\nC‚Äôest tellement organis√© que j‚Äôai envie de coder quelque chose en ce moment.  Un exemple de test unitaire üïµüèª En utilisant l‚Äôinjection de d√©pendance et ces mod√®les d‚Äôorganisation, le test unitaire devient vraiment simple. Vous n‚Äôavez pas besoin de simuler des objets req/res ou de require(‚Ä¶) Exemple: Test unitaire pour la m√©thode d‚Äôinscription de l‚Äôutilisateur tests/unit/services/user.js  Cron Jobs et t√¢ches r√©currentes ‚ö° Ainsi, maintenant que la logique m√©tier est encapsul√©e dans la couche service, il est plus facile de l‚Äôutiliser depuis un job Cron. Vous ne devriez jamais compter sur setTimeout ou une autre fa√ßon primitive de retarder l‚Äôex√©cution du code, mais sur un framework qui persiste vos jobs, et l‚Äôex√©cution de ceux-ci, dans une base de donn√©es. De cette fa√ßon, vous aurez le contr√¥le sur les jobs √©chou√©s, et la r√©troaction de ceux qui r√©ussissent.  Configurations et secrets ü§´ Suivant les concepts √©prouv√©s de Twelve-Factor App pour node.js, la meilleure approche pour stocker les cl√©s API et les cha√Ænes de connexions aux base de donn√©es, c‚Äôest en utilisant dotenv. Mettez un fichier .env, qui ne doit jamais √™tre valid√© (mais qui doit exister avec des valeurs par d√©faut dans votre r√©f√©rentiel) puis, le paquet npm dotenv charge le fichier .env et insert les variables dans l‚Äôobjet process.env de node.js. Cela pourrait suffire, mais j‚Äôaimerais ajouter une √©tape suppl√©mentaire.\nAvoir un fichier config/index.ts o√π le paquet npm dotenv et charge le fichier .env et puis j‚Äôutilise un objet pour stocker les variables, dons nous avons une structure et un code d‚Äôautocompl√©tion. config/index.js De cette fa√ßon, vous √©vitez d‚Äôinonder votre code avec les instructions process.env.MY_RANDOM_VAR, et en ayant l‚Äôautocompl√©tion vous n‚Äôavez pas besoin de savoir comment nommer la variable d‚Äôenvironnement.  Loaders üèóÔ∏è J‚Äôai pris ce mod√®le du microframework de W3Tech mais sans d√©pendre de leur paquet. L‚Äôid√©e est de diviser le processus de d√©marrage de votre service node.js en modules testables. Voyons une initialisation d‚Äôapplication express.js classique Comme vous le voyez, cette partie de votre application peut √™tre un vrai g√¢chis. Voici une fa√ßon efficace d‚Äôy faire face. Maintenant, les chargeurs ne sont plus que de minuscules fichiers avec un but concis loders/index.js Le loader express loaders/express.js Le loader mongo loaders/mongoose.js  Conclusion Nous plongeons en profondeur dans la structure d‚Äôun projet node.js test√© en production, voici quelques conseils r√©sum√©s: Utiliser une architecture √† 3 couches. Ne mettez pas votre logique m√©tier dans les contr√¥leurs express.js Ayez l‚Äôinjection de d√©pendance pour votre tranquillit√© d‚Äôesprit. Ne divulguez jamais vos mots de passe, secrets et cl√©s API, utilisez un gestionnaire de configuration. Divisez vos configurations de serveur node.js en petits modules qui peuvent √™tre charg√©s ind√©pendamment.","timeToRead":13,"frontmatter":{"title":"Architecture d'un projet node.js Bulletproof","subtitle":"Une architecture de projet simple mais puissante pour les APIs REST de node.js","tags":["Architecture","Node.js","Typescript","Javascript"],"date":"2019-04-20T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAABpznuGEpc/wD/xAAaEAEBAAIDAAAAAAAAAAAAAAABAgARAxIh/9oACAEBAAEFAiBK6zTxmx9qdus//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREv/aAAgBAwEBPwGIwj//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIREv/aAAgBAgEBPwG5G2f/xAAZEAACAwEAAAAAAAAAAAAAAAAAARAhMRH/2gAIAQEABj8Cvgk9Lcaaf//EABgQAQEBAQEAAAAAAAAAAAAAAAEAESEx/9oACAEBAAE/ITnRgGapmh2ZnE1yevV//9oADAMBAAIAAwAAABCL/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxBif//EABYRAQEBAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxAB2f8A/8QAHBABAQACAgMAAAAAAAAAAAAAAREAQSGBYXHR/9oACAEBAAE/EDBaCJT7l6ghJLrjWP6Ll3ggFO3IiIXir7xVTtmf/9k=","aspectRatio":1.5,"src":"/static/7b5ca6b968847300f44022d2d8670c4a/c20aa/rock-zen.jpg","srcSet":"/static/7b5ca6b968847300f44022d2d8670c4a/f8f18/rock-zen.jpg 930w,\n/static/7b5ca6b968847300f44022d2d8670c4a/0e6ff/rock-zen.jpg 1860w,\n/static/7b5ca6b968847300f44022d2d8670c4a/c20aa/rock-zen.jpg 2250w","sizes":"(max-width: 2250px) 100vw, 2250px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-architecture/"}}},{"node":{"excerpt":"1. Utilisez Array.includes pour plusieurs crit√®res Jetons un coup d‚Äôoeil √† l‚Äôexemple ci-dessous: √Ä premi√®re vue, l‚Äôexemple ci-dessus semble bon. Cependant, que se passe-t-il si nous obtenons plus de fruits rouges, par exemple des cherry et des cranberries? Allons-nous √©tendre la d√©claration avec plus ||? Nous pouvons r√©√©crire la condition ci-dessus en utilisant `Array.includes (Array.includes): 2. Moins d‚Äôembo√Ætements, retour h√¢tif D√©veloppons l‚Äôexemple pr√©c√©dent pour inclure deux conditions suppl√©mentaires: si aucun fruit n‚Äôest fourni, lancer une erreur accept√©e et imprimer la quantit√© de fruits si elle d√©passe 10. Regardez le code ci-dessus, nous avons: 1 instruction if / else qui filtre les conditions non valides 3 niveaux de d√©clarations if imbriqu√© (conditions 1, 2 et 3) Une r√®gle g√©n√©rale que je suis personnellement est le retour anticip√© lorsque des conditions invalides sont trouv√©es. En faisant cela, nous avons un niveau moins de d√©clarations imbriqu√©es. Ce style de codage convient particuli√®rement lorsque vous avez une d√©claration if long (imaginez que vous devez faire d√©filer l‚Äô√©cran jusqu‚Äôau bas de la page pour savoir qu‚Äôil existe une autre instruction, pas cool). Nous pouvons r√©duire davantage la nidification en inversant les conditions et en revenant plus t√¥t. Regardez la condition 2 ci-dessous pour voir comment nous proc√©dons : En inversant les conditions de la condition 2, notre code est maintenant exempt d‚Äôinstruction imbriqu√©e. Cette technique est utile lorsque la logique est longue et que nous voulons arr√™ter d‚Äôautres processus lorsqu‚Äôune condition n‚Äôest pas remplie. Cependant, ce n‚Äôest pas une r√®gle absolue. Demandez-vous si cette version (sans imbrication) est meilleure / plus lisible que la pr√©c√©dente (condition 2 avec imbriqu√©e)? Pour moi, je le laisserais comme dans la version pr√©c√©dente (condition 2 avec imbriqu√©e) parce que: le code est court et simple, il est plus clair avec imbriqu√© si condition d‚Äôinversion peut impliquer plus de processus de pens√©e (augmentation de la charge cognitive) Par cons√©quent, vise toujours moins de nidification et de retour anticip√©, mais n‚Äôen faites pas trop. Il existe un article et une discussion sur StackOverflow qui approfondissent ce sujet si vous √™tes int√©ress√©: Avoid Else, Return Early par Tim Oxley Discussion StackOverflow sur le style de programmation if/else 3. Utiliser les param√®tres de fonction par d√©faut et la destruction Je suppose que le code ci-dessous pourrait vous sembler familier. Nous devons toujours v√©rifier les valeurs null / undefined et assigner des valeurs par d√©faut lorsque vous utilisez JavaScript: En fait, on peut √©liminer la variable q en assignant des param√®tres de fonction par d√©faut. Beaucoup plus facile et intuitif n‚Äôest-ce pas? Veuillez noter que chaque param√®tre peut avoir son propre param√®tre de fonction par d√©faut. Par exemple, nous pouvons aussi assigner une valeur par d√©faut aux fruits: function test (fruit = 'unknown', quantity = 1). Et si notre fruit est un objet? Peut-on assigner un param√®tre par d√©faut? Regardez l‚Äôexemple ci-dessus : nous voulons afficher le nom du fruit s‚Äôil est disponible ou nous allons afficher inconnus. Nous pouvons √©viter le contr√¥le conditionnel de fruit && fruit.name avec le param√®tre de fonction par d√©faut et la destruction. Puisque nous n‚Äôavons besoin que de la propri√©t√© name de fruit, nous pouvons d√©structurer le param√®tre en utilisant {name}, alors nous pouvons utiliser name comme variable dans notre code au lieu de fruit.name. Nous assignons aussi l‚Äôobjet vide {} comme valeur par d√©faut. Si nous ne le faisons pas, vous obtiendrez une erreur lors de l‚Äôex√©cution de la ligne test(undefined) - Cannot destructure property name of 'undefined' or 'null'. car il n‚Äôy a pas de propri√©t√© name dans undefined. Si cela ne vous d√©range pas d‚Äôutiliser des biblioth√®ques tierces, il y a plusieurs fa√ßons de r√©duire les contr√¥les nuls: utiliser la fonction get de Lodash utiliser la biblioth√®que open source idx de Facebook (avec Babeljs) Voici un exemple d‚Äôutilisation de Lodash: 4. Favorisez Map / Objet Litt√©ral par rapport √† l‚Äôinstruction Switch Regardons l‚Äôexemple ci-dessous - nous voulons afficher des fruits en fonction de la couleur: Le code ci-dessus ne semble rien de mal, mais je le trouve assez verbeux. Le m√™me r√©sultat peut √™tre obtenu avec un objet litt√©ral avec une syntaxe plus prore: Vous pouvez √©galement utiliser Map pour obtenir le m√™me r√©sultat: Map est le type d‚Äôobjet disponible depuis ES2015, qui vous permet d‚Äôenregistrer des paires de cl√©s/valeur. Devrions-nous interdire l‚Äôutilisation des d√©clarations switch? Ne vous limitez pas √† cela. Personnellement, j‚Äôutilise des objets litt√©raux chaque fois que c‚Äôest possible, mais je n‚Äô√©tablirais pas une r√®gle stricte pour bloquer cela - utilisez celui qui a un sens pour votre sc√©nario. Todd Motto a un article qui creuse plus en profondeur sur les d√©clarations switch par rapport aux objets litt√©raux. Vous pouvez le lire ici. Refonte de la syntaxe Pour l‚Äôexemple ci-dessus, nous pouvons r√©ellement refactoriser notre code pour obtenir le m√™me r√©sultat avec Array.filter. Il y a toujours plus d‚Äôune fa√ßon d‚Äôobtenir le m√™me r√©sultat. Nous en avons montr√© 4 avec le m√™me exemple. Coder, c‚Äôest amusant ! 5. Utilisez Array.every & Array.some pour tous les crit√®res / crit√®res partiels Ce dernier conseil concerne l‚Äôutilisation de la nouvelle fonction JavaScript Array (mais pas si nouvelle) pour r√©duire les lignes de code. Regardez le code ci-dessous - nous voulons v√©rifier si tous les fruits sont de couleur rouge: Le code est si long ! Nous pouvons r√©duire le nombre de lignes avec Array.every: C‚Äôest plus propre, non ? De la m√™me mani√®re, si nous voulons tester si un fruit est rouge, nous pouvons utiliser Array.some pour l‚Äôobtenir en une ligne. R√©sum√© Produisons ensemble un code plus lisible. J‚Äôesp√®re que vous avez appris quelque chose de nouveau dans cet article. Happy coding!","timeToRead":8,"frontmatter":{"title":"Comment √©crire de meilleures conditions en JavaScript","subtitle":"","tags":["Javascript","Node.js"],"date":"2019-04-19T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQoz2P4cNufbMRAV83vb4EQyZo/3/P/dNf/28OAr/cDIPoZiLQNqPPeaZ9nl3zP7fW6fNDr872A90RqfnvD/8/TwHmTnfpb7VMTLPasdfv2AGQ5sZr/vw2eM8lx8XTn6b2OM/ocifUz0AagVzcsds3LsFq3wGViu0N6kuWLK35AQQYigwroz5M7PN/e9Duwwf3WcR+Qn4l0NjBsgJ78/jDg4x3/n48CvpAU2sjRixzPABStw4O6JhVqAAAAAElFTkSuQmCC","aspectRatio":1.7777777777777777,"src":"/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png","srcSet":"/static/f10109a249e0ae09b060bb7269f1f4be/4c9af/js.png 930w,\n/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/js-conditions/"}}},{"node":{"excerpt":"Comment utiliser la console JavaScript aller au-del√† de console.log() L‚Äôun des moyens les plus simples de d√©boguer quoi que ce soit en JavaScript consiste √† console.log des √©l√©ments √† l‚Äôaide de console.log. Mais il y a beaucoup d‚Äôautres m√©thodes fournies par la console qui peuvent vous aider √† mieux d√©boguer. Le cas d‚Äôutilisation tr√®s simple consiste √† enregistrer une cha√Æne ou un groupe d‚Äôobjets JavaScript. Tout simplement, Imaginons maintenant un sc√©nario o√π vous devez vous connecter √† la console pour regrouper plusieurs objets. Le moyen le plus intuitif de consigner cela consiste √† simplement console.log(variable) une apr√®s l‚Äôautre. Le probl√®me est plus √©vident quand on voit comment il appara√Æt sur la console. Aucun nom de variable visible Comme vous pouvez le constater, aucun nom de variable n‚Äôest visible. Cela devient extr√™mement ennuyeux lorsque vous en avez beaucoup et que vous devez agrandir la petite fl√®che √† gauche pour voir quel est exactement le nom de la variable. Entrez les noms de propri√©t√© calcul√©s. Cela nous permet de regrouper toutes les variables ensemble dans un seul console.log({ foo, bar }); et la sortie est facilement visible. Cela r√©duit √©galement le nombre de lignes console.log dans notre code. console.table() Nous pouvons aller plus loin en pla√ßant tout cela dans un tableau pour le rendre plus lisible. Chaque fois que vous avez des objets avec des propri√©t√©s communes ou un tableau d‚Äôobjets, utilisez console.table(). Ici, nous pouvons utiliser console.table({ foo, bar}) et la console affiche: console.table en action console.group() Cela peut √™tre utilis√© lorsque vous souhaitez regrouper ou imbriquer des d√©tails pertinents afin de pouvoir facilement lire les journaux. Cela peut √©galement √™tre utilis√© lorsque vous avez quelques instructions de journal dans une fonction et que vous voulez pouvoir voir clairement l‚Äô√©tendue correspondant √† chaque instruction. Par exemple, si vous enregistrez les d√©tails d‚Äôun utilisateur: Logs group√©s Vous pouvez √©galement utiliser console.groupCollapsed() au lieu de console.group() si vous souhaitez que les groupes soient r√©duits par d√©faut. Vous auriez besoin d‚Äôappuyer sur le bouton de descripteur sur la gauche pour d√©velopper. console.warn() et console.error() Selon la situation, pour vous assurer que votre console est plus lisible, vous pouvez ajouter des logs √† l‚Äôaide de console.warn() ou console.error() . Il y a aussi console.info() qui affiche une ic√¥ne ‚Äòi‚Äô dans certains navigateurs. Log d'avertissement et d'erreur Cela peut √™tre pouss√© plus loin en ajoutant un style personnalis√©. Vous pouvez utiliser une directive %c pour ajouter un style √† toute instruction de journal. Cela peut √™tre utilis√© pour diff√©rencier les appels d‚ÄôAPI, les √©v√©nements utilisateur, etc. en conservant une convention. Voici un exemple: Vous pouvez √©galement modifier la font-size et le font-style ainsi que d‚Äôautres √©l√©ments CSS. Relev√© des instructions console.log console.trace() console.trace() une trace de pile dans la console et indique comment le code s‚Äôest termin√© √† un moment donn√©. Il existe certaines m√©thodes que vous ne souhaitez appeler qu‚Äôune seule fois, comme la suppression d‚Äôune base de donn√©es. console.trace() peut √™tre utilis√© pour s‚Äôassurer que le code se comporte comme nous le voulons. console.time() Une autre chose importante en mati√®re de d√©veloppement front-end est que le code doit √™tre rapide. `console.time() permet de chronom√©trer certaines op√©rations dans le code √† des fins de test. Sortie console.time() pour les boucles Esp√©rons que l‚Äôarticle fournisse des informations sur les diff√©rentes mani√®res d‚Äôutiliser la console.","timeToRead":3,"frontmatter":{"title":"Comment utiliser la console JavaScript aller au-del√† de console.log()","subtitle":"L'un des moyens les plus simples de d√©boguer quoi que ce soit en JavaScript consiste √† `console.log` des √©l√©ments","tags":["Javascript","Node.js"],"date":"2019-04-18T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQoz2P4cNufbMRAV83vb4EQyZo/3/P/dNf/28OAr/cDIPoZiLQNqPPeaZ9nl3zP7fW6fNDr872A90RqfnvD/8/TwHmTnfpb7VMTLPasdfv2AGQ5sZr/vw2eM8lx8XTn6b2OM/ocifUz0AagVzcsds3LsFq3wGViu0N6kuWLK35AQQYigwroz5M7PN/e9Duwwf3WcR+Qn4l0NjBsgJ78/jDg4x3/n48CvpAU2sjRixzPABStw4O6JhVqAAAAAElFTkSuQmCC","aspectRatio":1.7777777777777777,"src":"/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png","srcSet":"/static/f10109a249e0ae09b060bb7269f1f4be/4c9af/js.png 930w,\n/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/js-console-log/"}}},{"node":{"excerpt":"Gatsby est un g√©n√©rateur de site statique pour React.js qui permet √† l‚Äôutilisateur de cr√©er des sites Web rapides et dynamiques. Gatsby se concentre sur l‚Äôoptimisation des appareils mobiles et cr√©e automatiquement une PWA (Progressive Web App). Le site Web est aliment√© par diverses sources: Markdown, CMS, API, bases de donn√©es et bien d‚Äôautres. Pourquoi Gatsby.js? J‚Äôai longtemps repouss√© la relance de mon site, √©galement parce que je n‚Äôavais pas trouv√© de solution ad√©quate pour un blog. Souvent, la configuration √©tait trop compliqu√©e, les possibilit√©s trop petites; mais je ne voulais pas non plus √©crire du code HTML pur pour mes articles de blog. Avec la popularit√© croissante de React.js, je ne pouvais pas √©chapper √† cet hype m√©diatique et me lire moi-m√™me. Comme je pensais d√©j√† en termes de composants dans la phase de conception, React.js √©tait la prochaine √©tape logique. Au d√©but de 2019, j‚Äôai d√©couvert Gatsby.js et j‚Äô√©tais enthousiasm√© par la possibilit√© d‚Äô√©crire mon site Web avec React ainsi que les messages de mon blog avec Markdown ou un CMS ‚Äúheadless‚Äù (par exemple, Contentful ou Prismic). Cela vous demande beaucoup de travail et vous permet de d√©marrer facilement. Magie (GraphQL) Pour obtenir les donn√©es des fichiers Markdown, des CMS, etc. dans React et enfin √† l‚Äô√©cran, Gatsby utilise le langage de requ√™te GraphQL. La communaut√© d√©j√† mentionn√©e fournit certains plugins (par exemple, Contentful, Drupal, Lever, Medium, Wordpress, MongoDB, Markdown, Prismic) pour obtenir les donn√©es. L‚Äôutilisation ult√©rieure de GraphQL est un jeu d‚Äôenfant: Avec cette requ√™te, vous obtenez tous les projets (y compris les donn√©es de Frontmatter) pour les sous-pages de projet, tri√©s par date (en supposant une configuration ad√©quate). Afin de g√©n√©rer les images appropri√©es pour chaque taille d‚Äô√©cran, un autre plug-in, qui utilise la biblioth√®que Sharp, prend les images d√©finies dans le fichier Markdown et en cr√©e des images dans plusieurs tailles. Si vous rencontrez des probl√®mes avec la requ√™te, vous pouvez utiliser le d√©bogueur graphique interactif GraphiQL pour afficher des suggestions et tester la requ√™te vous-m√™me - le d√©bogueur cr√©e automatiquement sa propre documentation. Ces donn√©es peuvent ensuite √™tre utilis√©es dans les composants React comme ceci: Quoi d‚Äôautre‚Ä¶ ? La cr√©ation de mon site Web a √©t√© extr√™mement rapide avec React. J‚Äôai √©galement beaucoup appris sur les PWA et continuerai √† essayer d‚Äôam√©liorer le score de Lighthouse Score de Google. Le site Web est open source et peut √™tre consult√© sur GitHub √† des fins d‚Äôapprentissage.","timeToRead":2,"frontmatter":{"title":"Bienvenue sur mon blog","subtitle":"Pourquoi Gatsby.js?","tags":["Gatsby","Node.js","TypeScript","Javascript"],"date":"2019-04-17T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABZtCCpGB//8QAGhAAAgIDAAAAAAAAAAAAAAAAAgMAEQEEEP/aAAgBAQABBQLZFsSBAqsy+//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABoQAAICAwAAAAAAAAAAAAAAAAIRAEEBEiD/2gAIAQEABj8CxqSGJXfP/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERITEQQaH/2gAIAQEAAT8h7iKcaJTSdi0a/OGjpn//2gAMAwEAAgADAAAAEMTf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEBAQEAAAAAAAAAAAAAAAAAABFB/9oACAECAQE/EMR//8QAHBABAQADAAMBAAAAAAAAAAAAAREAITFBYZHB/9oACAEBAAE/EO7kievEm3HxoqUY9Z+OJwL6wMdGMrXc5Bfuf//Z","aspectRatio":1.5037593984962405,"src":"/static/001de70656809513310eba4aaa7e901c/883ab/blog.jpg","srcSet":"/static/001de70656809513310eba4aaa7e901c/f8f18/blog.jpg 930w,\n/static/001de70656809513310eba4aaa7e901c/0e6ff/blog.jpg 1860w,\n/static/001de70656809513310eba4aaa7e901c/883ab/blog.jpg 2000w","sizes":"(max-width: 2000px) 100vw, 2000px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/gatsby-welcome/"}}},{"node":{"excerpt":"Principales commandes SQL/PostgreSQL que vous avez besoin de conna√Ætre. Ici, nous allons passer en revue les commandes les plus importantes et les plus √©l√©mentaires que vous devez conna√Ætre pour cr√©er, g√©rer et supprimer vos donn√©es sur votre base de donn√©es. Outre les commandes ici, j‚Äôutilise la syntaxe PostgreSQL. La plupart des bases de donn√©es relationnelles partagent les m√™mes concepts. En apprenant cela, vous pourrez cr√©er et g√©rer votre base de donn√©es. Ce sont les commandes que vous pouvez vous attendre √† apprendre ici: [toc] Create table Cr√©ons notre premier client: Creusons par √©tapes: Cr√©ez la table avec le nom CREATE TABLE <NAME> (qui pour nous est ‚Äúcustomer‚Äù). Ajoutez les colonnes et le type de donn√©es appropri√©, comme l‚Äôemail CHARACTER(255) C‚Äôest simple, nous n‚Äôentrerons pas dans le type de donn√©es que ous pourrions utiliser, car il est long et peut changer de base de donn√©es √† une autre base de donn√©es, l‚Äôid√©e est d‚Äôapprendre le principe. Insert Nous passons maintenant √† notre premier tableau et vous souhaitez maintenant √† notre premier tableau et vous souhaitez maintenant ajouter des informations, sinon quel est le but, pour cela, vous lancerez cette commande: Le code parle tout seul, nous voulons ajouter <INSERT INTO> notre table appel√©e ‚Äúcustomer‚Äù pour la colonne portant le nom de cl√© ‚Äúname‚Äù et ‚Äúage‚Äù les VALUES suivant l‚Äôordre, nommez ‚ÄùFelipe‚Äù et l‚Äô√¢ge 31. Alter Table Il est normal que vous cr√©iez votre base de donn√©es et que vous commenciez par la base, puis que vous commenciez √† vous am√©liorer, et avec la commande, vous puissiez modifier la structure de la table. Mais bien s√ªr, ce n‚Äôest pas illimit√© si vous essayez de modifier des donn√©es existantes et susceptibles de provoquer un conflit, comme le passage d‚Äôun nombre entier √† une cha√Æne . Comme vous pouvez le constater, nous ajoutons une nouvelle COLUMN avec le nom height et le type INTEGER.  Cette commande a beaucoup d‚Äôautres propri√©t√©s, vous pouvez donc consulter la documentation afin de voir toutes les autres variations. Update  Nous avons ajout√© des donn√©es √† l‚Äôint√©rieur, mais consid√©rons que vous avez commis une erreur ou, en fait, que vous souhaitez simplement mettre √† jour, car c‚Äôest l‚Äôid√©e, pouvoir conserver des donn√©es et les manipuler. Ce sera utile non? Comme nous venons de modifier notre table et que nous ne voulons pas avoir de valeur vide pour une raison quelconque, nous faisons un UPDATE sur notre table client avec cette commande et SET la hauteur pour que tout le monde soit √† 0, comme une valeur par d√©faut. Mais je ne veux pas faire cela √† tout le monde, bien s√ªr, alors ce qui suit est plus sp√©cifique. Nous avons fait la m√™me chose qu‚Äôavant, √† la diff√©rence que nous utilisons une nouvelle clause WHERE pr√©ciser ce que nous voulons changer, je parlerai plus en d√©tail de cette question. Pour le moment, il vous suffit de comprendre que, si vous utilisez cette clause, je valide si ‚Äúname‚Äù correspond au nom, et seulement s‚Äôil est vrai, je mets √† jour les valeurs. Et ce genre de validation est vraiment important, et parce que ceci est une autre fa√ßon de faire avec encore plus de ‚Äúvalidations‚Äù. Nous avons deux diff√©rences importantes o√π, voyons: Notre clause WHERE a maintenant une autre clause appel√©e AND , et cela nous permet de ‚Äúconcat√©ner‚Äù deux valeurs que nous voulons v√©rifier, nous disons que les deux doivent correspondre pour que notre validation soit r√©ussie . Il est important de noter qu‚Äôils sont √† l‚Äôint√©rieur de ‚Äù()‚Äù, il s‚Äôagit en quelque sorte de ‚Äúretenir‚Äù en tant que valeur ou contrainte , nous v√©rifions en gros ce qui est √† l‚Äôint√©rieur qui donnera le ‚Äúr√©sultat‚Äù qui sera vrai ou faux . Le second est OR et correspond exactement √† ce que sugg√®re le ‚Äúnom‚Äù. Si notre clause WHERE ne convient pas, nous v√©rifions celle-ci. Upsert En plus du nom qui a l‚Äôair bizarre, cette commande est tr√®s utile, car nous parlons de mise √† jour, l‚Äôun des sc√©narios les plus courants consiste √† vouloir mettre √† jour quelque chose qui existe d√©j√†, mais comment savez-vous qu‚Äôil existe d√©j√†? Pour cela, vous pouvez g√©n√©ralement penser, commencez par v√©rifier s‚Äôil existe et si vous utilisez la commande update, non? Mais en r√©alit√© vous savez d√©j√† ce que vous voulez, vous voulez que si cette valeur est d√©j√† mise √† jour. PostgreSQL impl√©mente cela il n‚Äôy a pas si longtemps, comme d‚Äôautres bases de donn√©es l‚Äôavaient d√©j√† assez longtemps, voyons comment impl√©menter l‚Äôutilisation de Postgres. Vous devez d‚Äôabord savoir que nous disposons de deux contraintes que nous pouvons utiliser pour ‚Äúdire‚Äù ce que nous voulons faire si cette valeur existe d√©j√†. ON CONFLICT DO NOTHING ON CONFLICT DO UPDATE Par le nom, vous pouvez d√©j√† imaginer ce qui se passe, lors de la mise √† jour si vous trouvez un ‚Äúconflit‚Äù avec un autre, ne faites rien. Regardons comment utiliser ON CONFLICT DO NOTHING : En gros, ce qui va se passer n‚Äôest rien, si la base de donn√©es trouve d√©j√† une valeur, ne fait rien. D‚Äôautre part pour ON CONFLICT DO UPDATE : Voici exactement ce que dit le nom, si vous trouvez un conflit, mettez-le √† jour. Il est simple d‚Äôutiliser ce sc√©nario lorsque vous savez que vous souhaitez mettre √† jour lorsque vous avez la m√™me valeur. Rappelez-vous que l‚Äôimpl√©mentation change l√©g√®rement pour chaque base de donn√©es, mais qu‚Äôil est important de conna√Ætre le concept, il suffit de regarder sur Internet le nom de contrainte sp√©cifique de votre base de donn√©es. Select Maintenant que nous avons en principe commenc√© le d√©but en suivant une m√©thode logique, comme cr√©er votre base de donn√©es, mettre √† jour, supprimer, la plupart des bases afin de configurer votre base de donn√©es, nous devons obtenir les donn√©es. Tr√®s probablement, ce sera l‚Äôune des commandes les plus utilis√©es par vous, alors voyons-le. La base est tr√®s simple, allons-y √©tape par √©tape: SELECT * - Ce que vous faites est de dire ‚Äúje veux‚Äù (SELECT) tout (*); FROM - D‚Äôo√π je veux (FROM) c‚Äôest √† partir du nom de la table (customer). Ici, je re√ßois tout ce qui se trouve dans ma table client, soyons plus pr√©cis. Maintenant que vous avez d√©j√† compris comment vous cr√©ez, vous avez probablement compris que nous voulions des donn√©es sp√©cifiques, √† savoir les donn√©es des colonnes ‚Äúheight‚Äù et ‚Äúname‚Äù de ma table customer . Cette contrainte offre de nombreuses autres possibilit√©s dont vous avez absolument besoin dans la documentation pour pouvoir visualiser toutes les autres variantes. Un de plus, est pour la situation que vous ne voulez pas r√©ellement s√©lectionner par le nom de la colonne, mais si elle correspond √† la valeur, essayez ceci: Comme je l‚Äôai dit, nous rechercherons des donn√©es dans la colonne ‚Äúhauteur‚Äù et toutes les valeurs correspondant √† la cha√Æne ‚ÄúFelipe‚Äù en regard du nom de la colonne correspondante. Where Cette contrainte est une autre que vous utiliserez encore plus avec la contrainte SELECT . Voyons comment nous utilisons, vous utiliserez ceci pour filtrer ce que vous voulez lors de la s√©lection de vos donn√©es. Comme vous pouvez le constater, nous recherchons la taille du client et WHERE la ‚Äúheight‚Äù est sup√©rieure √† 50 . Mais vous pouvez ajouter encore plus de contraintes (filtres). Nous avons ajout√© ici une nouvelle contrainte AND qui fait exactement ce que son nom sugg√®re, qui doit √™tre plus haut que 50 ET inf√©rieur √† 80. Une autre contrainte que nous pouvons utiliser est OR. Ici nous avons ajout√© une autre contrainte OR cela signifie que si notre v√©rification ‚Äúpr√©c√©dente‚Äù ne correspond pas comme son nom l‚Äôindique ‚ÄúOU‚Äù, nous retournons sous forme de correspondance. Join C‚Äôest certainement un sujet tr√®s important, non seulement parce que dans un entretien d‚Äôembauche, ils vous le demanderont certainement, mais aussi parce qu‚Äôil y a beaucoup de possibilit√©s. M√™me si la premi√®re fois que vous essayez de comprendre, √ßa a l‚Äôair bizarre. Pour cela nous avons 5 types: CROSS JOIN INNER JOIN LEFT JOIN RIGHT JOIN FULL JOIN Je vais essayer d‚Äôexpliquer de la mani√®re la plus simple, mais je vous recommande d‚Äôessayer cela en direct. Lorsque vous le ferez, vous comprendrez mieux et vous verrez comme cela est facile. Pour cela, nous avons besoin de quelques donn√©es pour pouvoir visualiser. Pour cela, je vais mettre une donn√©e √† ins√©rer, je reconnais que vous savez d√©j√† comment cr√©er une table. Nous aurons notre client et la table de contact . Nos donn√©es clients: Et pour nos coordonn√©es: Vous devez juste ex√©cuter ceci sur votre table d√©j√† cr√©√©e et l‚Äôins√©rer. Cross join Je dirais que vous n‚Äôutiliserez pas trop celle-ci, car elle peut g√©n√©rer beaucoup de donn√©es. En gros, il joint ici les deux tables et g√©n√®re une sortie avec toutes les donn√©es. La fa√ßon dont cette contrainte fonctionne consiste √† renvoyer des donn√©es de produit cart√©siennes entre les deux tables. Cette commande multiplie la premi√®re table par la quantit√© de donn√©es de la seconde table. Elle renverra toujours la combinaison possible. Je crois que vous pouvez imaginer combien de donn√©es cela peut cr√©er, non?! Il est facile de voir la repr√©sentation de la fa√ßon dont cette requ√™te sera trait√©e √† partir de cette image, mais cela ne correspond pas seulement:  Allons √† la commande: Je n‚Äôajouterai pas une impression de la sortie compl√®te ici, car elle est trop grande, mais cette op√©ration g√©n√©rera un total de 36 √©l√©ments/lignes, c‚Äôest-√†-dire la multiplication entre le premier client de la table ayant 9 √©l√©ments multipli√© par la table de contacts contenant 4 Mais une information pr√©cieuse ici est que, avec cela, nous allons g√©n√©rer une sortie qui contient toutes les lignes de la premi√®re table et toutes les lignes de la seconde:  Et pourquoi r√©p√©ter table? Eh bien, nous avons SELECT *, nous avons choisi d‚Äôobtenir toutes les donn√©es des deux, mais montrons-leur comment ne pas r√©p√©ter ou, mieux, comment choisir la ligne de sortie que nous voulons. Utilisez cette requ√™te: Une partie de la sortie:  Si vous faites attention, ce que nous avons fait √©tait de dire comment sera g√©n√©r√©, en sp√©cifiant la ligne que nous voulons et d‚Äôo√π customer.\"name\" et contact.zip_code afin que la sortie suive cet ordre. Je n‚Äôai pas ajout√© la ‚Äúfin‚Äù de cette requ√™te, ni m√™me la pr√©c√©dente, mais parlons du concept de ‚Äújointure‚Äù, nous cherchons fondamentalement une correspondance, mais pour cette contrainte, nous ‚Äúobtenons tout‚Äù √† partir d‚Äôune table et ‚ÄúTout √† partir de‚Äù deuxi√®me table, mais dans le type CROSS si un √©l√©ment ne correspond pas retournera quand m√™me, mais s‚Äôil n‚Äôy a pas de correspondance, la valeur sera vide.  Parce que si vous faites attention √† notre table de contact pour l‚Äôutilisateur ‚Äúfelipe@gmail.com ‚Äù, il n‚Äôy a pas de correspondance avec personne √† la table des clients , mais sera quand m√™me retourn√©e. Inner join Maintenant que nous savons d√©j√† quelque chose de base concernant ce que nous pouvons faire en mati√®re de jointure , passons √† la suivante, qui ressemble beaucoup √† la jointure crois√©e, mais avec une simple diff√©rence qu‚Äôici ne renverra que des correspondances. C‚Äôest la repr√©sentation du type de jointure que nous faisons ici entre les tables, car vous ne voyez que le ‚Äúcentre‚Äù qui correspond √† ce que nous aurons comme donn√©es.  Ici, la syntaxe est un peu diff√©rente, nous devons ajouter une contrainte suppl√©mentaire, celle qui recherchera la ligne ‚Äúvalidateur ‚Äú. La principale diff√©rence que nous avons ici est que nous allons rechercher une correspondance en utilisant la table client et la table de contact , pour cela nous utiliserons la ligne ‚Äúzip_code ‚Äú. C‚Äôest ce que vous aurez comme r√©cup√©ration de donn√©es.  Il est facile de voir que lorsque nous retournons toutes les cellules, nous avons le code postal de la cellule du client et du contact , toutes les correspond. Cette jointure est tr√®s utile pour r√©cup√©rer des donn√©es que vous souhaitez faire correspondre √† une valeur sp√©cifique, diff√©rente de la relation ay. Left joint Comme vous le savez peut-√™tre, l‚Äôobjectif principal est de faire correspondre les donn√©es et, si les donn√©es correspondent, nous renvoyons cette ligne. Vous pouvez voir ici que nous avons au centre la partie jointure , c‚Äôest-√†-dire le validateur, et la partie gauche qui signifie que si la jointure ne correspond pas, les donn√©es seront renvoy√©es mais avec la ligne pour les donn√©es qui ne correspond pas ‚Äúvide‚Äù.  Mais ici maintenant, nous commen√ßons √† faire les choses diff√©remment. Voyons en quoi consiste cette requ√™te: La ‚Äútranscription‚Äù de ce que nous demandons ici est la suivante: nous voulons toutes les donn√©es de LEFT qui, dans notre sc√©nario, sont des clients , et nous voulons uniquement contacter la table celles qui correspondent √† notre validation. En faisant cela, vous devriez avoir ces donn√©es comme r√©sultat de cette requ√™te:  Right join Maintenant que nous avons d√©j√† vu comment il est laiss√© joindre cela n‚Äôest pas diff√©rent, la seule diff√©rence est que nous voulons maintenant que le c√¥t√© ‚Äúdroit‚Äù soit la table principale. Cela signifie que nous renverrons toutes les donn√©es de la table droite m√™me si elles ne correspondent pas. Bien s√ªr ce qui n‚Äôa pas de correspondance est vide.  Question: Mais il est important de ne pas se m√©prendre pour obtenir toutes les donn√©es de droite ou de gauche avec uniquement la quantit√© exacte de donn√©es dont nous disposons √† cette table sp√©cifique. Ce que je veux dire par l√†, c‚Äôest que pour cette jointure, nous voulons ‚Äútout‚Äù du c√¥t√© droit, c‚Äôest notre table de contact qui contient 4 √©l√©ments que nous avons ajout√©s, et voici le r√©sultat:  Nous avons 6 √©l√©ments et non 4, mais rappelez-vous, ce n‚Äôest pas une requ√™te de ‚Äútout renvoyer d‚Äôun c√¥t√© s‚Äôil y a correspondance ‚Äù, c‚Äôest une requ√™te qui renvoie tout d‚Äô un ‚Äúc√¥t√©‚Äù qui correspond, nous avons 2 correspondances pour le code postal 3423PO , c‚Äôest un match alors revenez. Full join Maintenant le dernier, qui ressemble √† la jointure crois√©e, la diff√©rence ici est que nous recherchons une correspondance et non un produit cart√©sien comme la jointure crois√©e. Nous chercherons la jointure dans toute la zone bleue, en validant fondamentalement les deux c√¥t√©s en fonction de notre contrainte de ‚Äúvalidation‚Äù, qui dans notre sc√©nario est zip_code.  La jointure compl√®te combine les deux tables, les donn√©es gauche et droite, et renvoie toutes les correspondances et toutes les correspondances , regardons la requ√™te Voici ce que nous aurons comme retour:  Ici, nous suivons le m√™me principe que les ‚Äújointures‚Äù avant, c‚Äôest ce qui n‚Äôa pas de correspondance nous avons encore les donn√©es, mais ‚Äúvide‚Äù Union Cette commande est tr√®s utile, car il est question d‚Äôobtenir des donn√©es √† partir de 2 tables, mais ne confondez bien s√ªr pas les deux. Ce que fait Union, c‚Äôest que nous allons combiner les donn√©es des deux c√¥t√©s, mais que nous ne renverrons que des donn√©es ‚Äúuniques‚Äù entre les deux, si ‚Äúidentiques‚Äù ne renvoient pas les doublons, par exemple, c‚Äôest ce qui se produit avec join. C‚Äôest la requ√™te que nous utilisons: C‚Äôest ce que nous aurons comme retour:  Comme vous pouvez le constater, nous sp√©cifions les colonnes que nous voulons, ce qui est obligatoire, car nous devons pr√©ciser lesquelles sont ‚Äú√©gales‚Äù afin qu‚Äôil puisse comparer et renvoyer des √©l√©ments uniques entre les deux. Une chose importante concernant cette commande est qu‚Äôil op√®re de mani√®re tr√®s efficace, cela signifie que l‚Äôordre peut changer. Order C‚Äôest une contrainte tr√®s utile pour organiser les donn√©es que vous demandez. Par cons√©quent, nous ne ‚Äúfiltrons‚Äù pas les donn√©es. En fait, il organise votre r√©ponse en fonction de certains crit√®res. Simplement, ordonnons notre requ√™te en fonction de l‚Äô√¢ge de nos clients: Et voici la r√©ponse √† laquelle vous devez vous attendre:  Alias Ceci n‚Äôest pas destin√© √† interroger quelque chose ou quelque chose comme √ßa, c‚Äôest juste un moyen de vous aider √† organiser le nom d‚Äôune table, c‚Äôest simplement un surnom . La syntaxe de base est la suivante: Et vous devriez obtenir quelque chose comme √ßa:  S√©parons pour chaque partie, d‚Äôabord ce que nous avons fait, nous s√©lectionnons ce que nous voulons, mais si vous faites attention, nous ajoutons un caract√®re ‚ÄùA‚Äù avant le nom de la colonne , dans notre nom de sc√©nario et code postal . Mais nous devons dire √† notre code SQL ce que ce personnage ou ‚Äúpseudo‚Äù signifie, n‚Äôest-ce pas?! Et nous le faisons apr√®s, lorsque nous disons FROM customer A, nous disons ici comment SQL devrait interpr√©ter cette lettre, ce devrait √™tre l‚Äôalias du client . Vous pouvez √©galement le faire lorsque vous avez plusieurs tables, par exemple: Vous pouvez voir que les deux sont ‚Äúidentiques‚Äù, mais nous renommons pour avoir un autre alias. Une autre chose que vous pouvez faire est de ‚Äúchanger‚Äù le nom de la table que vous retournez, par exemple: Si vous voyez ici, j‚Äôai utilis√© deux formats d‚Äôalias, pour le premier, je n‚Äôutilise pas l‚Äôalias pour savoir quelle colonne est, mais ce que je veux, c‚Äôest que le retour de cette colonne soit appel√© ‚Äú√Çge de la personne‚Äù et le second est l‚Äôalias fa√ßon de l‚Äôappel que nous avons d√©j√† appris, c‚Äôest le r√©sultat.  Delete Comme son nom l‚Äôindique, il s‚Äôagit d‚Äôune suppression, et je n‚Äôai pas besoin de vous avertir qu‚Äôil s‚Äôagit d‚Äôune commande tr√®s ‚Äúdangereuse‚Äù, alors faites attention, je vais montrer 2 syntaxe de base: Vous avez peut-√™tre remarqu√© que nous ne sp√©cifions aucune donn√©e particuli√®re. Nous allons donc tout supprimer, c‚Äôest simple, mais nous souhaitons supprimer une donn√©e sp√©cifique. Pour cela, proc√©dez comme suit: Ici, je dirais que la fa√ßon la plus s√ªre de faire, utilisez une personne sp√©cifique. Drop table Le sujet est sur la suppression, continuons avec ceci, la commande pr√©c√©dente est de supprimer les donn√©es d‚Äôune table / colonne, maintenant nous allons continuer, mais avec un autre type de suppression, celle qui supprime la table ou la supprime. C‚Äôest simple comme √ßa, mais vous devez √™tre encore plus prudent que la commande delete . Ici, vous allez laisser tomber la table des trous et il n‚Äôy a aucun moyen de r√©cup√©rer. Une autre diff√©rence majeure est que cela ne devrait pas √™tre utilis√© dans votre ‚Äúprogramme‚Äù. Cette commande ne devrait √™tre utilis√©e que par la commande de terminal lorsque vous savez ce qui doit √™tre fait ou supprim√©.","timeToRead":17,"frontmatter":{"title":"Principales commandes SQL/PostgreSQL que vous avez besoin de conna√Ætre","subtitle":"","tags":["SQL","PostgreSQL"],"date":"2019-04-14T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQoz2P4jwT+/fsHJB8/ftw9Z/WMFdsmL9nYPW9d66zVs1ds/vL5E1wBHDD8Rwd/ZyzbqJXYF9uxyrlktnZSf3THGuf8SYeOngDJ/f2LV/O/39OWbTbOmJTRtyarf5117tTSmdvSOpedPH2WgGaI3K4DRywzJwQ1LAuuX2yfPz2uc3XfvNWfPrwj4GyI3LMnj/xLJsbXzWxfuE03eUJ8+4rJsxddvXqFsLP/AvX/+3fg8LHV6zctWLVJP21iYuPsM2dOv/vwgZgAg7gfpOjS5atGyd1N05f///8bqzJ0zdevX799+/bTp08fPHj45MnTRctXHz194cHLDzcevfqD6mYsmk+fPr1v377169dv27Zt69ZtO7dvPXb28pErD7ccu/bq/ReQy/E7+/fv38CA+f79+7Nnz/6BAdDOn7/+ELYZovo/cQAAExNKPTC47rUAAAAASUVORK5CYII=","aspectRatio":1.7777777777777777,"src":"/static/769fd2188f26939bc5770b83a10e20f3/9ecf6/postgres.png","srcSet":"/static/769fd2188f26939bc5770b83a10e20f3/4c9af/postgres.png 930w,\n/static/769fd2188f26939bc5770b83a10e20f3/9ecf6/postgres.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","bio":"D√©veloppeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/sql-principes/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"authorId":"ludo","limit":9,"skip":18,"numPages":5,"currentPage":3}}}