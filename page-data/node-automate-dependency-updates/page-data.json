{"componentChunkName":"component---src-templates-post-tsx","path":"/node-automate-dependency-updates/","webpackCompilationHash":"28b74a5dec589e4586df","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQY023PvUrDUBTA8ZuCtoMoOLQ4dWhN14x2kEKXFkGoohQ/QBexOHRycAidKkgHHRq69APRoTjFJYODIA6+gSBYfYMmfYLE/5VT6NALP845NyeHc9UoCHZRQvonCLKKE4ZhAXYURTsYoE9dIy5iCzfUJnEdV+RF4iu6ikFH2EPxazzOcJmg4Rnn5C8ysIEOHqTe5/sT3qXOwYOtRr5/wLAqzpCTDXu4p2ETtyjgGJ/cX+se8jeU9fa4RBt5vWENpjzdkoGPcGg4RQsbOMEFmnBRRwVDHEK/yFXfvr/CoPjvZLKcdByDyzWGeajigzorGy0oOeRJiUtITe/pX1XzDk3buIMltSFR/zTtic3060X+8z8PsEUt8G3LVQAAAABJRU5ErkJggg==","width":400,"height":128,"src":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png","srcSet":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png 1x"}}},"markdownRemark":{"html":"<p>Une application Node raisonnablement grande aura des centaines de dépendances. Les garder tous à jour est une chose qu’un développeur doit réaliser à un moment ou à un autre. Soit vous ignorez les mises à jour des dépendances jusqu’à ce que vous soyez coincé avec un très ancien ensemble de dépendances qui entravent votre progression avec les vulnérabilités de sécurité ou vous passez votre précieux temps de développement d’application à tester manuellement les mises à jour sur une cadence raisonnable.</p>\n<p>Voyons comment automatiser ce processus dans un environnement d’entreprise en supposant que vous ayez un environnement CI/CD et un repo GitHub privé.</p>\n<h2>Ingrédients</h2>\n<ol>\n<li>Tests unitaires solides pour votre code. Points bonus si vous avez des tests de e2e et des tests snapshot pour les composants de l’interface utilisateur.</li>\n<li><code>next-update</code> <em>Un paquet npm qui teste si vos dépendances peuvent être mises à jour sans casser les tests</em>.</li>\n<li><code>hub</code> CLI Il s’agit d’une application en ligne de commande de Git “Hub” qui peut interagir avec votre GitHub repo. <code>hub</code> est exactement similaire à <code>git</code> CLI et constitue un remplacement immédiat, mais dispose des fonctionnalités supplémentaires pour interagir avec GitHub. Pratique pour ouvrir une Pull Request après l’opération de mise à jour.</li>\n</ol>\n<h2>Recette</h2>\n<ul>\n<li><code>npm install next-update --save-dev</code>\nInstallez next-update en tant que dev-dependency.</li>\n<li>Configurez un script npm <code>dep:update</code> dans votre section de scripts du fichier <code>package.json</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token comment\">// package.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"a-sample-node-project\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A sample node project\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node app.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"dep:update\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next-update\"</span> <span class=\"token comment\">// Configure an npm script</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"next-update\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.6.0\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code>npm run dep:update</code>\nExécutez le script. <code>next-update</code> ira de l’avant et trouvera tous les nouveaux paquets. Les met à jour en séquence et conserve la mise à jour si vos tests réussissent.</li>\n<li>Téléchargez et installez le <code>hub</code> cli</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># download-hub.sh</span>\n<span class=\"token assign-left variable\">HUB_CLI</span><span class=\"token operator\">=</span>/opt/hub-linux/bin/hub\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token operator\">!</span> -f <span class=\"token variable\">$HUB_CLI</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token function\">wget</span> https://github.com/github/hub/releases/download/v2.12.2/hub-linux-amd64-2.12.2.tgz\n  <span class=\"token function\">tar</span> zxvf hub-linux-amd64-2.12.2.tgz\n  <span class=\"token function\">rm</span> -rf hub-linux-amd64-2.12.2.tgz /opt/hub-linux\n  <span class=\"token function\">mv</span> hub-linux-amd64-2.12.2 /opt/hub-linux\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Configurez hub</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> config --global --replace-all hub.host github.yourdomain.com\n<span class=\"token function\">git</span> config --global --replace-all hub.protocol <span class=\"token function\">git</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<ul>\n<li>Demander au bot d’ouvrir une Pull Request</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token variable\">$HUB_CLI</span> <span class=\"token function\">add</span> package.json package-lock.json\n<span class=\"token variable\">$HUB_CLI</span> commit -m <span class=\"token string\">\"[BOT] Automated dependency update\"</span>\n<span class=\"token variable\">$HUB_CLI</span> pull-request <span class=\"token punctuation\">\\</span>\n  --push <span class=\"token punctuation\">\\</span>\n  -m <span class=\"token string\">\"Pull Request Subject\"</span> <span class=\"token punctuation\">\\</span>\n  -m <span class=\"token string\">\"Pull Request Description\"</span> <span class=\"token punctuation\">\\</span>\n  --no-edit <span class=\"token punctuation\">\\</span>\n  --reviewer user-id1,user-id2</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Raccordez ce script dans votre environnement CI/CD pour qu’il s’exécute quotidiennement</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Une application Node raisonnablement grande aura des centaines de dépendances. Les garder tous à jour est une chose qu’un développeur doit réaliser à un moment ou à un autre. Soit vous ignorez les mises à jour des dépendances jusqu’à ce que vous soyez coincé avec un très ancien ensemble de dépendances qui entravent votre progression avec les vulnérabilités de sécurité ou vous passez votre précieux temps de développement d’application à tester manuellement les mises à jour sur une cadence raisonnable."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Voyons comment automatiser ce processus dans un environnement d’entreprise en supposant que vous ayez un environnement CI/CD et un repo GitHub privé."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Ingrédients"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tests unitaires solides pour votre code. Points bonus si vous avez des tests de e2e et des tests snapshot pour les composants de l’interface utilisateur."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"next-update"}]},{"type":"text","value":" "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Un paquet npm qui teste si vos dépendances peuvent être mises à jour sans casser les tests"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hub"}]},{"type":"text","value":" CLI Il s’agit d’une application en ligne de commande de Git “Hub” qui peut interagir avec votre GitHub repo. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hub"}]},{"type":"text","value":" est exactement similaire à "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" CLI et constitue un remplacement immédiat, mais dispose des fonctionnalités supplémentaires pour interagir avec GitHub. Pratique pour ouvrir une Pull Request après l’opération de mise à jour."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Recette"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm install next-update --save-dev"}]},{"type":"text","value":"\nInstallez next-update en tant que dev-dependency."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Configurez un script npm "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"dep:update"}]},{"type":"text","value":" dans votre section de scripts du fichier "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"package.json"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"json"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-json","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// package.json"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"name\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"a-sample-node-project\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"version\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"0.0.1\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"description\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"A sample node project\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"test\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"jest\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"node app.js\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"dep:update\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"next-update\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Configure an npm script"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"devDependencies\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"next-update\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"^3.6.0\""}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","property"]},"children":[{"type":"text","value":"\"dependencies\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm run dep:update"}]},{"type":"text","value":"\nExécutez le script. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"next-update"}]},{"type":"text","value":" ira de l’avant et trouvera tous les nouveaux paquets. Les met à jour en séquence et conserve la mise à jour si vos tests réussissent."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Téléchargez et installez le "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hub"}]},{"type":"text","value":" cli"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# download-hub.sh"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"HUB_CLI"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"/opt/hub-linux/bin/hub\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"!"}]},{"type":"text","value":" -f "},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HUB_CLI"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"then"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" https://github.com/github/hub/releases/download/v2.12.2/hub-linux-amd64-2.12.2.tgz\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"tar"}]},{"type":"text","value":" zxvf hub-linux-amd64-2.12.2.tgz\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"rm"}]},{"type":"text","value":" -rf hub-linux-amd64-2.12.2.tgz /opt/hub-linux\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"mv"}]},{"type":"text","value":" hub-linux-amd64-2.12.2 /opt/hub-linux\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fi"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Configurez hub"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" config --global --replace-all hub.host github.yourdomain.com\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" config --global --replace-all hub.protocol "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Demander au bot d’ouvrir une Pull Request"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HUB_CLI"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" package.json package-lock.json\n"},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HUB_CLI"}]},{"type":"text","value":" commit -m "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"[BOT] Automated dependency update\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","variable"]},"children":[{"type":"text","value":"$HUB_CLI"}]},{"type":"text","value":" pull-request "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  --push "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  -m "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Pull Request Subject\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  -m "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Pull Request Description\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  --no-edit "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\\"}]},{"type":"text","value":"\n  --reviewer user-id1,user-id2"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Raccordez ce script dans votre environnement CI/CD pour qu’il s’exécute quotidiennement"}]}],"data":{"quirksMode":false}},"excerpt":"Une application Node raisonnablement grande aura des centaines de dépendances. Les garder tous à jour est une chose qu’un développeur doit réaliser à un moment ou à un autre. Soit vous ignorez les mises à jour des dépendances jusqu’à ce que vous soyez coincé avec un très ancien ensemble de dépendances qui entravent votre progression avec les vulnérabilités de sécurité ou vous passez votre précieux temps de développement d’application à tester manuellement les mises à jour sur une cadence raisonnable. Voyons comment automatiser ce processus dans un environnement d’entreprise en supposant que vous ayez un environnement CI/CD et un repo GitHub privé. Ingrédients Tests unitaires solides pour votre code. Points bonus si vous avez des tests de e2e et des tests snapshot pour les composants de l’interface utilisateur. next-update Un paquet npm qui teste si vos dépendances peuvent être mises à jour sans casser les tests. hub CLI Il s’agit d’une application en ligne de commande de Git “Hub” qui peut interagir avec votre GitHub repo. hub est exactement similaire à git CLI et constitue un remplacement immédiat, mais dispose des fonctionnalités supplémentaires pour interagir avec GitHub. Pratique pour ouvrir une Pull Request après l’opération de mise à jour. Recette npm install next-update --save-dev\nInstallez next-update en tant que dev-dependency. Configurez un script npm dep:update dans votre section de scripts du fichier package.json npm run dep:update\nExécutez le script. next-update ira de l’avant et trouvera tous les nouveaux paquets. Les met à jour en séquence et conserve la mise à jour si vos tests réussissent. Téléchargez et installez le hub cli Configurez hub Demander au bot d’ouvrir une Pull Request Raccordez ce script dans votre environnement CI/CD pour qu’il s’exécute quotidiennement","timeToRead":2,"frontmatter":{"title":"Automatisez les mises à jour des dépendances","subtitle":"Voyons comment automatiser ce processus dans un environnement d'entreprise en supposant que vous ayez un environnement CI/CD et un repo GitHub privé.","userDate":"10 August 2019","date":"2019-08-10T14:00:00.000Z","tags":["Node.js"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABqyn8s1EcD//EABoQAQACAwEAAAAAAAAAAAAAAAEAAgMREiL/2gAIAQEAAQUCt6Lruc6jUTJU7//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECESFBcf/aAAgBAQAGPwJoblu0cFWEvRn/xAAdEAACAgIDAQAAAAAAAAAAAAAAAREhMWFBUYGR/9oACAEBAAE/Iai1LQ5jEVYJ38MVHkrSkQ8d/aKQoP/aAAwDAQACAAMAAAAQbz//xAAXEQEAAwAAAAAAAAAAAAAAAAAAARFh/9oACAEDAQE/EIKx/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPxCS9f/EABwQAQEBAQACAwAAAAAAAAAAAAERIQAxQVFhgf/aAAgBAQABPxAAqoN+Hsvt1wWQJ9POkMmdE3+hB5KT9nMSBAi5GuDMprM3v//Z","aspectRatio":1.5005861664712778,"src":"/static/8756b203d47a4deaf400dbe6dbdbc9ba/c108b/board-game-challenge.jpg","srcSet":"/static/8756b203d47a4deaf400dbe6dbdbc9ba/f8f18/board-game-challenge.jpg 930w,\n/static/8756b203d47a4deaf400dbe6dbdbc9ba/c108b/board-game-challenge.jpg 1280w","sizes":"(max-width: 1280px) 100vw, 1280px"}}},"author":{"id":"ludo","name":"Wyffels Ludovic","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png 1x"}}]}}}},"relatedPosts":{"totalCount":26,"edges":[{"node":{"id":"5a9f4e28-76a1-5c32-9601-a4e1921c3776","timeToRead":5,"excerpt":"Bien que le titre de cet article soit un peu trompeur, car nous ne souhaitons pas vraiment communiquer directement entre les composants. Nos composants doivent être isolés et encapsulés. J’ai choisi ce titre parce que je pense que les développeurs aux prises avec ce problème le googleront de cette façon. Comment communiquer entre les composants? C’est le sujet sur lequel j’ai vu beaucoup de nouveaux développeurs angular lutter pour communiquer entre les composants. Je vais vous montrer les trois approches les plus courantes, avec des exemples qui correspondent à différents cas d’utilisation. Il y a aussi le “moyen de redux” que je pourrais couvrir dans un autre article à l’avenir.   Imaginez le cas d’utilisation de la barre latérale dans votre application. La barre latérale est ouverte ou fermée. Vous avez le composant side-bar et ensuite vous avez un composant (ou plusieurs composants) qui peuvent l’ouvrir / le fermer ou demander son état. Je décrirai trois manières de mettre en oeuvre ce comportement Passer la référence d’un composant à un autre Communication par le composant parent Communication à travers le service  1. Passer la référence d’un composant à un autre Cette solution doit être utilisée lorsque les composants ont une dépendance entre eux. Par exemple, dropdown et dropdown toggle. Ils ne peuvent généralement pas exister l’un sans l’autre.  Demo Nous allons créer le composant side-bar-toggle qui aura le composant side-bar en entrée et en cliquant sur le bouton bascule nous ouvrirons / fermerons le composant side-bar. Voici le code pertinent:  app.component.html side-bar-toggle.component.ts side-bar.component.ts 2. Communication par le composant parent Peut être utilisé lorsqu’il est facile de contrôler l’état partagé entre des composants via leur composant parent et que vous ne souhaitez pas créer de nouveau service ou créer du code standard, à cause d’une variable.  Demo La mise en oeuvre de cette approche est presque la même que la précédente, mais le composant side-bar-toggle ne reçoit pas de composant side-bar. Au lieu de cela, le composant parent contient la propriété sideBarIsOpened qui est transmise au composant side-bar. app.component.html app.component.ts side-bar-toggle.component.ts side-bar.component.ts 3. Communication à travers le service Enfin, cette option est utile et doit être utilisée lorsque vous avez un composant contrôlé ou que son état est demandé à plusieurs instances.   Nous avons maintenant plusieurs emplacements dans l’application qui devront accéder à notre composant sibe-bar. Voyons comment nous le faisons. Nous allons maintenant créer side-bar.service.ts donc nous aurons: side-bar.service.ts side-bar.component.ts side-bar.component.html  Les services de la barre latérale auront une méthode et un événement à changer pour que chaque composant qui injectera ce service puisse être averti de l’ouverture ou de la bascule d’un panneau. Dans cet exemple, aucun composant latéral ni composant latéral ne comporte de paramètres d’entrée, car ils communiquent via le service. Maintenant le code:  app.component.html side-bar-toggle.component.ts side-bar.component.ts side-bar.service.ts","frontmatter":{"title":"3 façons de communiquer entre les composants Angular","subtitle":""},"fields":{"slug":"/angular-3way-communication/"}}},{"node":{"id":"f3d9e7d1-3a29-5f66-b17f-926e06970fe8","timeToRead":5,"excerpt":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel GitHub . Nous allons configurer Travis CI de manière à ce que lors de la mise en place d’un nouveau commit pour notre application Angular, celui-ci: Exécuter le linter Lancer nos tests unitaires Lancer nos tests E2E Construire notre application pour la production Déployé vers GitHub Pages Définitions Test continu (CT) Les tests continus consistent à exécuter des tests automatisés dans le cadre du pipeline de livraison de logiciels pour obtenir un retour immédiat sur les risques commerciaux associés à une version candidate du lociel. Intégration Continue (CI) L’intégration continue est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code source que le résultat des modifications ne produit pas de régression dans l’application développée. En pratique Ok, ces définitions sont bien. Mais, en pratique, qu’est-ce qu’ils signifient vraiment? Pour les besoins de cet article, je vais utiliser des définitions similaires, mais très pragmatiques et spécifiques: CT Nos tests sont exécutés automatiquement avant chaque déploiement. Et notre code ne sera pas déployé si des tests échouent. CI Transférer des modifications dans une branche spécifique de notre repo GitHub lance un processus de déploiement automatisé. Créer une application Angular Pour commencer, créez une nouvelle application Angular en utilisant Angular CLI. Aller sur: http://localhost:4200 GitHub Créer un nouveau repo GitHub: travis-demo Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-être d’abord vous engager si vous avez effectué des mises à jour. Assurez-vous de remplacer ludovicwyffels par votre propre identifiant GitHub. Travis CI Inscrivez-vous à Travis CI en utilisant votre compte GitHub. Accédez à votre profil pour voir la liste des repos. Si vous avez déjà un compte, vous devrez utiliser le bouton Sync account pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-être utiliser le filtre pour voir réellement votre repo si vous en avez beaucoup. Vous pouvez cliquer sur le bouton Paramètres à droite du repo. Ajouter une configuration Travis CI Afin de dire à Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI. Créez un fichier à la racine de votre espace de travail appelé .travis.yml avec le contenu suivant: Pour le --base-ref vous devrez utiliser votre propre identifiant GitHub. Ce fichier indique à Travis CI de procéder comme suit: Utilisez Node.js Surveillez uniquement la branche principale pour connaître les modifications. Avant d’exécuter l’un des scripts, installez Angular CLI Assurez-vous que l’application respecte nos règles en matière de linting utilisant ng lint. Construisez notre application en utilisant ng build. Après avoir ajouté le fichier de configuration Travis CI, commiter et pousser. Après avoir effectué cette opération, passez au tableau de bord Travis CI pour afficher le journal Travis CI au fur et à mesure de la création de votre application. Vous devrez peut-être cliquer sur l’onglet Current pour le voir se développer. À l’extrême droite du journal, vous pouvez cliquer sur Follow log pour faciliter l’affichage du journal mis à jour. Une fois que Travis CI a terminé notre script et créé l’application, vous verrez l’icône virer au vert pour vous informer que votre script s’est terminé avec succès. Test continu Maintenant que nous avons créé nos applications, allons dans le monde des tests continus en laissant Travis CI exécuter nos tests unitaires à chaque nouveau commit. Malheureusement, nous ne pouvons pas simplement npm run test sur Travis CI. En effet, nous ne pouvons pas réellement lancer une interface graphique de navigateur. Nous allons donc utiliser Headless Chrome pour exécuter nos tests unitaires. Suivez les instructions pour créer un nouveau script npm comme celui-ci: Nous pouvons maintenant exécuter nos tests unitaires en utilisant Headless Chrome comme ceci: Maintenant, ajouter npm run test-headless à notre fichier .travis.yml dans la section script comme ceci: Commiter et push sur GitHub: Après avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet exécuter les tests unitaires, puis faire le build. Intégration continue Maintenant que nous testons et buildons, nous souhaitons déployer notre application. Nous devons créer un jeton d’accès personnel GitHub. Suivez ces instructions. Dans le tableau de bord Travis CI, accédez à votre projet. En haut à droite, cliquez sur Paramètres. Faites défiler jusqu’à la section Variables d’environnement. Ajoutez une nouvelle variable d’environnement nommée: GITHUB_TOKEN Pour la valeur, collez la valeur réelle de votre jeton d’accès personnel GitHub que vous avez généré. Cliquez sur Ajouter. Déploiement sur les pages GitHub Enfin, configurons Travis CI pour le déploiement sur GitHub Pages. Ajoutez une section de déploiement à votre .travis.yml. A ce stade, votre fichier devrait resembler à ceci: Encore une fois, assurez-vous que vous utilisez votre propre identifiant GitHub au lien de ludovicwyffels. Ceci indique à Travis CI d’utiliser notre jeton GitHub à partir de la variable d’environnement: GITHUB_TOKEN En outre, il spécifie que les fichiers à déployer proviennent de notre dossier dist: dist/travis-demo Engagez-vous et appuyez sur GitHub: Nous devrions également pouvoir accéder à l’URL de nos pages GitHub et voir notre application déployée.","frontmatter":{"title":"Angular DevOps: CT/CI avec Travis CI et Github Pages","subtitle":"Utilisation de Travis CI pour implémenter les tests continus (CT) et l'intégration continue (CI) afin de déployer notre application Angular sur Github Pages"},"fields":{"slug":"/angular-travis-ctci/"}}},{"node":{"id":"5781f9e3-7217-5de4-a788-eae72ca9f482","timeToRead":2,"excerpt":"La plupart des exemples de code couvrant le kit AWS SDK comme ci-dessous, c’est à dire qu’ils importent l’intégralité du kit AWS même s’ils utilisent seulement quelques services AWS, parfois un seul (AWS DynamoDB).  Cependant, la méthode recommandée pour initialiser divers clients de service AWS consiste à ne les importer que lorsque nécessaire, comme ci-dessous. Économise des temps de chargement et de la mémoire précieux, particulièrement utile dans les environnements à ressources de calcul comme un périphérique IoT ou dans une fonction AWS Lamba.  NB: vous pouvez toujours accéder à l’espace de noms AWS global sans chaque service AWS associé en écrivant sous le code. Cette technique est utile lorsque vous appliquez la même configuration à plusieurs services AWS individuels, par exemple pour fournir les mêmes informations d’identification à tous les services AWS. const aws = require('aws-sdk/global'); Consultez la documentation officielle d’AWS pour plus d’informations ci-dessous. https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/creating-and-calling-service-objects.html Bonne programmation!","frontmatter":{"title":"AWS SDK pour Node.js: Meilleures pratiques","subtitle":""},"fields":{"slug":"/aws-sdk/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/node-automate-dependency-updates/","prev":{"excerpt":"Utilisations de PM2 PM2 a beaucoup d’utilisations, jetons un coup d’oeil à quelques-unes d’entre elles: Redémarrage après un crash: PM2 nous permet de maintenir les processus en cours d’exécution Suivi et gestion des processus à distance: un portail web vous permet de garder un oeil sur les precessus distants et de les gérer. Il ne se contente pas d’exécuter des applications Node: PM2 n’est pas limité aux seuls processus Node.js, c’est vrai, vous pouvez même l’utiliser pour garder votre serveur Minecraft en ligne. PM2 peut mémoriser tous vos processus et les redémarrer après un redémarrage du système. Et bien plus encore. Pour commencer La première chose que nous devons faire est d’installer PM2 globalement sur votre machine : Commandes de base Venons-en aux principe de base de son utilisation. Pour démarrer un processus sous PM2, il suffit de lancer pm2 start <app>. App étant le nom du fihier que vous exécutez. PM2 produira quelque chose comme ceci Faites attention à ce qu’il dis sous id. Si vous oubliez, lancez pm2 list. Si vous voulez ajouter un nom au processus lorsque vous le lancez, vous pouvez utiliser le paramètre --name (pm2 start app.js --name my-api). Votre application fonctionne maintenant sous PM2, si elle plante, PM2 la redémarrera. Redémarrage en cas de modification de fichier Une autre fonctionnalité impressionnante que PM2 a est de redémarrer quand un fichier dans le répertoire de travail change. Pour que PM2 regarde notre répertoire et redémmarre les changements de fichier, incluez --watch lorsque vous démarrez votre application. Persistance jusqu’au redémarrage PM2 nous permet également de démarrer nos processus lorsque notre serveur (re)démarre. Commencez tout ce que vous voulez avoir en cours d’exécution tout le temps à travers pm2 start et puis exécutez pm2 save. Maintenant, quand notre système redémarre, PM2 démarrera tous les processus que nous avions en cours d’exécution lorsque nous avons lancé pm2 save. PM2 fait beaucoup de choses, je vais vous laisser découvrir le reste par vous même d’autres fonctions Le mode cluster Commandes Description pm2 start app.js -i 0 Démarre un maximum de processus avec LB en fonction des CPU disponibles. Listen Commandes Description pm2 list Afficher l’état de tous les processus pm2 jlist Impression de la liste des processus en JSON brut pm2 prettylist Impression de la liste des processus en JSON embelli pm2 describe 0 Afficher toutes les informations concernant un spécifique pm2 monit Surveiller tous les processus Logs Commandes Description pm2 logs [--raw] Afficher tous les journaux de processus en streaming pm2 flush Vider tous les fichiers logs pm2 reloadLogs Recharger tous les logs Actions Commandes Description pm2 stop all Arrêter tous les processus pm2 restart all Redémarrer tous les processus pm2 reload all Rechargement des temps d’arrêt 0s (pour les applications NETWORKED) pm2 stop 0 Arrêt d’un id de processus spécifique pm2 restart 0 Redémarrer un id de processus spécifique pm2 delete 0 Supprimer le processus de la liste pm2 delete all Supprimer tous les processus de la liste PM2 fait beaucoup de choses, dont la plupart sortent du cadre de cette brève introduction. A l’avenir, nous pourrions couvrir le mode cluster de PM2, la gestion des processus à distance et plus encore. Merci de votre lecture !","timeToRead":3,"frontmatter":{"title":"Prise en main de PM2, le gestionnaire de processus Node.js","subtitle":"PM2, ou Process Manager 2 est un gestionnaire de processus de production incroyablement polyvalent, écrit en Node.js.","tags":["PM2","Node.js"],"category":["Node.js"],"date":"2019-08-01T21:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7777777777777777,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7sbJEUL/AP/EABgQAQEAAwAAAAAAAAAAAAAAAAEAEBIh/9oACAEBAAEFAltmOmf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAIDEy/9oACAEBAAY/AoZX/8QAGRABAAIDAAAAAAAAAAAAAAAAAQARICEx/9oACAEBAAE/IUHpid7xtiVh/9oADAMBAAIAAwAAABAUD//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAAIDAAAAAAAAAAAAAAABEQBBIFHh/9oACAEBAAE/EFQSFpvAquOmid+YIS3Tw//Z","sizes":"(max-width: 1280px) 100vw, 1280px","src":"/static/73813d7b6a5ab8956ab1d3105c143941/c108b/pm2.jpg","srcSet":"/static/73813d7b6a5ab8956ab1d3105c143941/f8f18/pm2.jpg 930w,\n/static/73813d7b6a5ab8956ab1d3105c143941/c108b/pm2.jpg 1280w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-pm2/"}},"next":{"excerpt":"Que l’on soit backend, frontend, il y a une chose qui nous rassemble, c’est notre gestionnaire de source et son utilisation. Dans cet article, je vais vous présenter le conventional-changelog qui vous permettra de produire un historique de super qualité 🙌! Le problème Combien d’entre vous sont tombés sur des projets avec un historique qui ressemble à cela: 🤕 Comment s’y retrouver? Comment exploiter un historique qui ne vous donne quasiment jamais d’information. La solution, c’est d’utiliser le Conventional-Changelog (oui, on dirait une pub de télé-achat 😝). Qu’est-ce que c’est le conventional-changelog? C’est bien de vous vendre une solution, mais il faudrait peut-être expliquer ce que c’est… en vrai. Le Conventional-Changelog est une manière d’écrire ses commits dans les projets. Il existe plusieurs “flavours”, je vais vous détailler la version Angular. Le format est le suivant: Si ce format est bien appliqué, cela peut donner ce type de texte de commit : C’est un peu plus agréable à lire non ? Je vais vous décrire les différentes parties de cette convention et comment bien les utiliser. Type Le type permet de représenter de manière succincte le type d’action que vous avez fait sur le projet : feat: Ajout d’une fonctionnalité fix: Correction perf: Amélioration des performances docs: Ajout de documentation style: Linting du code refactor: Modification du code, mutualisation et autres modifs afin d’améliorer le projet test: Ajout de tests unitaires, intégration, end-to-end chore: Tâche ménagère, comme mettre à jour les dépendances, reconfigurer la CI… On ne peut mettre qu’un seul type par commit, donc finis les commits qui contiennent une feature et un fix en même temps… Scope Ici, pas de liste imposée, juste le titre de l’élément sur lequel une modification a été faite. Nous avons tendance à définir clairement les scopes du projet à l’avance afin que tout le monde commit avec les mêmes scopes. Pour exemple, sur une application orientée “e-commerce”, on pourrait avoir les scopes suivants : homepage search my-account product-details order admin Parfois, ce scope peut être omis… car il n’y en a pas forcément ou vous avez touché à l’application de manière globale. Dans ce cas, laissez vide 😅 Et par contre, comme pour le type, il ne peut y avoir qu’un seul scope. Donc si vous pensez avoir deux scopes… faites deux commit différents Subject Le sujet doit contenir une description courte du changement effectué dans le commit. Quelques conseils pour formater le message : Utiliser l’impératif Utiliser le présent Pas de 1er lettre en majuscule Pas de point . à la fin du sujet Body Le body est la partie “principale” du commit. J’ai tendance à dire qu’elle doit contenir le “Pourquoi” du commit. Si vous avez fait une modification structurante ou si la méthode d’implémentation est particulière, écrivez-le dans le body ! C’est un point de vue qui est personnel, mais je pense que le body est le meilleur endroit pour accueillir un commentaire… car un message de commit ne se désynchronise jamais du code. Footer Cette dernière partie permet de placer les références vers toutes les issues, User stories & co. On s’en sert généralement pour lier (Linked to) ou clôturer (Closes) les issues directement depuis git. Autre élément qui peut être ajouté dans ce footer est la notion de Breaking Change. Il suffit d’ajouter BREAKING CHANGE: suivi du détail de ce fameux breaking change. Je suis obligé d’écrire tout cela à chaque fois? Non, rassurez-vous, vous n’êtes pas obligé… même s’il est bien de mettre un max d’information dans le message de commit. La convention veut que seule la 1ère ligne soit obligatoire. Donc, libre à vous, de ne pas mettre de body et de footer Conclusion Avec cette convention, vous prendrez plaisir à fouiller dans l’historique de votre projet, trouver la source d’une modification et surtout savoir “Pourquoi cela a été fait comme cela !” Et quand l’on regarde, la différence entre l’ancienne version : et la nouvelle (certes, sur des projets différents): Cela est quand même bien plus clair ! Référence Git Commit Message Conventions","timeToRead":4,"frontmatter":{"title":"Bien gérer ses textes de commit (partie 1)","subtitle":"Que l’on soit backend, frontend, il y a une chose qui nous rassemble, c’est notre gestionnaire de source et son utilisation. Dans cet article, je vais vous présenter le conventional-changelog qui vous permettra de produire un historique de super qualité !","tags":["Git","Node.js"],"category":["Git","Node.js"],"date":"2019-08-11T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5056461731493098,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABVLywQM4t/8QAGRABAQEAAwAAAAAAAAAAAAAAAgEAAxIi/9oACAEBAAEFAjYbGa/OO5x2O//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwFiP//EAB0QAAIBBAMAAAAAAAAAAAAAAAABMgIQERIhQVH/2gAIAQEABj8ClwVbPD6JCG/Lf//EABwQAAMAAgMBAAAAAAAAAAAAAAABESExQVGBkf/aAAgBAQABPyGUSNvqLg0lKYL1eiZVcsToWHs//9oADAMBAAIAAwAAABAzL//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ECf/xAAWEQEBAQAAAAAAAAAAAAAAAAABMRD/2gAIAQIBAT8QFjMP/8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUZFh/9oACAEBAAE/EAltBA8O42KxjwXf2Jc+6ZIoPW0uXQptIchpjqk//9k=","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg","srcSet":"/static/bb024aed8b63b69834a2bfb23baa20cf/f8f18/nature.jpg 930w,\n/static/bb024aed8b63b69834a2bfb23baa20cf/81ef8/nature.jpg 1200w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/git-manage-commit-text-part1/"}},"primaryTag":"Node.js","primaryCategory":"Node.js"}}}