{"componentChunkName":"component---src-templates-post-tsx","path":"/angular-travis-ctci/","webpackCompilationHash":"28b74a5dec589e4586df","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQY023PvUrDUBTA8ZuCtoMoOLQ4dWhN14x2kEKXFkGoohQ/QBexOHRycAidKkgHHRq69APRoTjFJYODIA6+gSBYfYMmfYLE/5VT6NALP845NyeHc9UoCHZRQvonCLKKE4ZhAXYURTsYoE9dIy5iCzfUJnEdV+RF4iu6ikFH2EPxazzOcJmg4Rnn5C8ysIEOHqTe5/sT3qXOwYOtRr5/wLAqzpCTDXu4p2ETtyjgGJ/cX+se8jeU9fa4RBt5vWENpjzdkoGPcGg4RQsbOMEFmnBRRwVDHEK/yFXfvr/CoPjvZLKcdByDyzWGeajigzorGy0oOeRJiUtITe/pX1XzDk3buIMltSFR/zTtic3060X+8z8PsEUt8G3LVQAAAABJRU5ErkJggg==","width":400,"height":128,"src":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png","srcSet":"/static/2b5eaa0de166a8b5faebad4955c2200c/647de/ghost-logo.png 1x"}}},"markdownRemark":{"html":"<p>Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel GitHub . Nous allons configurer Travis CI de manière à ce que lors de la mise en place d’un nouveau commit pour notre application Angular, celui-ci:</p>\n<ul>\n<li>Exécuter le linter</li>\n<li>Lancer nos tests unitaires</li>\n<li>Lancer nos tests E2E</li>\n<li>Construire notre application pour la production</li>\n<li>Déployé vers GitHub Pages</li>\n</ul>\n<h2>Définitions</h2>\n<h3>Test continu (CT)</h3>\n<p><strong>Les <a href=\"https://en.wikipedia.org/wiki/Continuous_testing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tests continus</a></strong> consistent à exécuter des tests automatisés dans le cadre du pipeline de livraison de logiciels pour obtenir un retour immédiat sur les risques commerciaux associés à une version candidate du lociel.</p>\n<h3>Intégration Continue (CI)</h3>\n<p><strong>L’<a href=\"https://en.wikipedia.org/wiki/Continuous_integration\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">intégration continue</a></strong> est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code source que le résultat des modifications ne produit pas de régression dans l’application développée.</p>\n<h3>En pratique</h3>\n<p>Ok, ces définitions sont bien. Mais, en pratique, qu’est-ce qu’ils signifient vraiment? Pour les besoins de cet article, je vais utiliser des définitions similaires, mais très pragmatiques et spécifiques:</p>\n<h3>CT</h3>\n<p>Nos tests sont exécutés automatiquement avant chaque déploiement. Et notre code ne sera pas déployé si des tests échouent.</p>\n<h3>CI</h3>\n<p>Transférer des modifications dans une branche spécifique de notre repo GitHub lance un processus de déploiement automatisé.</p>\n<h2>Créer une application Angular</h2>\n<p>Pour commencer, créez une nouvelle application Angular en utilisant <em>Angular CLI</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">ng new travis-demo\n<span class=\"token builtin class-name\">cd</span> travis-demo\nng serve</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Aller sur: <a href=\"http://localhost:4200\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:4200</a></p>\n<h2>GitHub</h2>\n<p>Créer un nouveau repo GitHub: <code>travis-demo</code></p>\n<p>Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-être d’abord vous engager si vous avez effectué des mises à jour.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit -am <span class=\"token string\">\"initial\"</span>\n<span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/ludovicwyffels/travis-demo.git\n<span class=\"token function\">git</span> push -u origin master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Assurez-vous de remplacer <strong>ludovicwyffels</strong> par votre propre identifiant GitHub.</p>\n<h2>Travis CI</h2>\n<p>Inscrivez-vous à <a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Travis CI</a> en utilisant votre compte GitHub.</p>\n<p>Accédez à votre profil pour voir la liste des repos.</p>\n<p>Si vous avez déjà un compte, vous devrez utiliser le bouton <strong>Sync account</strong> pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-être utiliser le filtre pour voir réellement votre repo si vous en avez beaucoup.</p>\n<p>Vous pouvez cliquer sur le bouton Paramètres à droite du repo.</p>\n<h2>Ajouter une configuration Travis CI</h2>\n<p>Afin de dire à Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI.</p>\n<p>Créez un fichier à la racine de votre espace de travail appelé <code>.travis.yml</code> avec le contenu suivant:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10\"</span>\n<span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> trusty\n<span class=\"token key atrule\">sudo</span><span class=\"token punctuation\">:</span> required\n<span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> master\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g @angular/cli\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> ng lint\n<span class=\"token punctuation\">-</span> ng build <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>prod <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>base<span class=\"token punctuation\">-</span>href https<span class=\"token punctuation\">:</span>//ludovicwyffels.github.io/travis<span class=\"token punctuation\">-</span>demo/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Pour le <code>--base-ref</code> vous devrez utiliser votre propre identifiant GitHub.</p>\n<p>Ce fichier indique à Travis CI de procéder comme suit:</p>\n<ol>\n<li>Utilisez Node.js</li>\n<li>Surveillez uniquement la branche principale pour connaître les modifications.</li>\n<li>Avant d’exécuter l’un des scripts, installez <strong>Angular CLI</strong></li>\n<li>Assurez-vous que l’application respecte nos règles en matière de linting utilisant <code>ng lint</code>.</li>\n<li>Construisez notre application en utilisant <code>ng build</code>.</li>\n</ol>\n<p>Après avoir ajouté le fichier de configuration Travis CI, commiter et pousser.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> .travis.yml\n<span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Travis CI configuration\"</span>\n<span class=\"token function\">git</span> push</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Après avoir effectué cette opération, passez au <strong>tableau de bord Travis CI</strong> pour afficher le journal Travis CI au fur et à mesure de la création de votre application. Vous devrez peut-être cliquer sur l’onglet <strong>Current</strong> pour le voir se développer. À l’extrême droite du journal, vous pouvez cliquer sur <strong>Follow log</strong> pour faciliter l’affichage du journal mis à jour.</p>\n<p>Une fois que Travis CI a terminé notre script et créé l’application, vous verrez l’icône virer au vert pour vous informer que votre script s’est terminé avec succès.</p>\n<h2>Test continu</h2>\n<p>Maintenant que nous avons créé nos applications, allons dans le monde des <strong>tests continus</strong> en laissant <strong>Travis CI</strong> exécuter nos <strong>tests unitaires</strong> à chaque nouveau commit.</p>\n<p>Malheureusement, nous ne pouvons pas simplement <code>npm run test</code> sur Travis CI. En effet, nous ne pouvons pas réellement lancer une interface graphique de navigateur. Nous allons donc utiliser <strong>Headless Chrome</strong> pour exécuter nos tests unitaires.</p>\n<p>Suivez les instructions pour créer un nouveau script npm comme celui-ci:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">&quot;test-headless&quot;: &quot;ng test --watch=false --browsers=ChromeHeadless&quot;,</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nous pouvons maintenant exécuter nos tests unitaires en utilisant Headless Chrome comme ceci:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run test-headless</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Maintenant, ajouter <code>npm run test-headless</code> à notre fichier <strong>.travis.yml</strong> dans la section script comme ceci:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ng lint\n  <span class=\"token punctuation\">-</span> npm run test<span class=\"token punctuation\">-</span>headless\n  <span class=\"token punctuation\">-</span> ng build <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>prod <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>base<span class=\"token punctuation\">-</span>href https<span class=\"token punctuation\">:</span>//ludovicwyffels.github.io/travis<span class=\"token punctuation\">-</span>demo/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Commiter et push sur GitHub:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> .travis\n<span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Added unit for Travis CI using Headless Chrome\"</span>\n<span class=\"token function\">git</span> push</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Après avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet exécuter les tests unitaires, puis faire le build.</p>\n<h2>Intégration continue</h2>\n<p>Maintenant que nous testons et buildons, nous souhaitons déployer notre application.</p>\n<p>Nous devons créer un jeton d’accès personnel GitHub. Suivez <a href=\"https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ces instructions.</a></p>\n<p>Dans le tableau de bord Travis CI, accédez à votre projet. En haut à droite, cliquez sur <strong>Paramètres</strong>. Faites défiler jusqu’à la section <strong>Variables d’environnement</strong>.</p>\n<p>Ajoutez une nouvelle variable d’environnement nommée: <code>GITHUB_TOKEN</code></p>\n<p>Pour la valeur, collez la valeur réelle de votre jeton d’accès personnel GitHub que vous avez généré. Cliquez sur <strong>Ajouter</strong>.</p>\n<h2>Déploiement sur les pages GitHub</h2>\n<p>Enfin, configurons Travis CI pour le déploiement sur GitHub Pages.</p>\n<p>Ajoutez une section de déploiement à votre <strong>.travis.yml</strong>. A ce stade, votre fichier devrait resembler à ceci:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n<span class=\"token key atrule\">node_js</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"10\"</span>\n<span class=\"token key atrule\">dist</span><span class=\"token punctuation\">:</span> trusty\n<span class=\"token key atrule\">sudo</span><span class=\"token punctuation\">:</span> required\n<span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> master\n<span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm install <span class=\"token punctuation\">-</span>g @angular/cli\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ng lint\n  <span class=\"token punctuation\">-</span> npm run test<span class=\"token punctuation\">-</span>headless\n  <span class=\"token punctuation\">-</span> ng build <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>prod <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>base<span class=\"token punctuation\">-</span>href https<span class=\"token punctuation\">:</span>//ludovicwyffels.github.io/travis<span class=\"token punctuation\">-</span>demo/\n<span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">provider</span><span class=\"token punctuation\">:</span> pages\n  <span class=\"token key atrule\">skip_cleanup</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">github_token</span><span class=\"token punctuation\">:</span> $GITHUB_TOKEN\n  <span class=\"token key atrule\">local_dir</span><span class=\"token punctuation\">:</span> dist/travis<span class=\"token punctuation\">-</span>demo\n  <span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Encore une fois, assurez-vous que vous utilisez <strong>votre propre identifiant GitHub</strong> au lien de ludovicwyffels.</p>\n<p>Ceci indique à Travis CI d’utiliser notre jeton GitHub à partir de la variable d’environnement: <code>GITHUB_TOKEN</code></p>\n<p>En outre, il spécifie que les fichiers à déployer proviennent de notre dossier <strong>dist</strong>: <code>dist/travis-demo</code></p>\n<p>Engagez-vous et appuyez sur GitHub:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Deploy to GitHub pages\"</span>\n<span class=\"token function\">git</span> push</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Nous devrions également pouvoir accéder à l’URL de nos pages GitHub et voir notre application déployée.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">https://ludovicwyffels.github.io/travis-demo/ </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel GitHub . Nous allons configurer Travis CI de manière à ce que lors de la mise en place d’un nouveau commit pour notre application Angular, celui-ci:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Exécuter le linter"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Lancer nos tests unitaires"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Lancer nos tests E2E"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Construire notre application pour la production"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Déployé vers GitHub Pages"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Définitions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Test continu (CT)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Les "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Continuous_testing","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"tests continus"}]}]},{"type":"text","value":" consistent à exécuter des tests automatisés dans le cadre du pipeline de livraison de logiciels pour obtenir un retour immédiat sur les risques commerciaux associés à une version candidate du lociel."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Intégration Continue (CI)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"L’"},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Continuous_integration","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"intégration continue"}]}]},{"type":"text","value":" est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code source que le résultat des modifications ne produit pas de régression dans l’application développée."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"En pratique"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, ces définitions sont bien. Mais, en pratique, qu’est-ce qu’ils signifient vraiment? Pour les besoins de cet article, je vais utiliser des définitions similaires, mais très pragmatiques et spécifiques:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"CT"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nos tests sont exécutés automatiquement avant chaque déploiement. Et notre code ne sera pas déployé si des tests échouent."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"CI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Transférer des modifications dans une branche spécifique de notre repo GitHub lance un processus de déploiement automatisé."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Créer une application Angular"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour commencer, créez une nouvelle application Angular en utilisant "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Angular CLI"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"ng new travis-demo\n"},{"type":"element","tagName":"span","properties":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"cd"}]},{"type":"text","value":" travis-demo\nng serve"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Aller sur: "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:4200","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"http://localhost:4200"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Créer un nouveau repo GitHub: "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"travis-demo"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-être d’abord vous engager si vous avez effectué des mises à jour."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -am "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"initial\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" remote "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" origin https://github.com/ludovicwyffels/travis-demo.git\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push -u origin master"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Assurez-vous de remplacer "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ludovicwyffels"}]},{"type":"text","value":" par votre propre identifiant GitHub."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Travis CI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Inscrivez-vous à "},{"type":"element","tagName":"a","properties":{"href":"https://travis-ci.org/","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"Travis CI"}]},{"type":"text","value":" en utilisant votre compte GitHub."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Accédez à votre profil pour voir la liste des repos."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Si vous avez déjà un compte, vous devrez utiliser le bouton "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Sync account"}]},{"type":"text","value":" pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-être utiliser le filtre pour voir réellement votre repo si vous en avez beaucoup."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Vous pouvez cliquer sur le bouton Paramètres à droite du repo."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Ajouter une configuration Travis CI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Afin de dire à Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Créez un fichier à la racine de votre espace de travail appelé "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".travis.yml"}]},{"type":"text","value":" avec le contenu suivant:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yml"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-yml","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"language"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" node_js\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node_js"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"10\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"dist"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" trusty\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" required\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"before_script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"g @angular/cli\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng lint\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng build "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"prod "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"base"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"href https"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//ludovicwyffels.github.io/travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"demo/"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour le "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"--base-ref"}]},{"type":"text","value":" vous devrez utiliser votre propre identifiant GitHub."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ce fichier indique à Travis CI de procéder comme suit:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Utilisez Node.js"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Surveillez uniquement la branche principale pour connaître les modifications."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Avant d’exécuter l’un des scripts, installez "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Angular CLI"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Assurez-vous que l’application respecte nos règles en matière de linting utilisant "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ng lint"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Construisez notre application en utilisant "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ng build"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Après avoir ajouté le fichier de configuration Travis CI, commiter et pousser."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .travis.yml\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -am "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Travis CI configuration\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Après avoir effectué cette opération, passez au "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"tableau de bord Travis CI"}]},{"type":"text","value":" pour afficher le journal Travis CI au fur et à mesure de la création de votre application. Vous devrez peut-être cliquer sur l’onglet "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Current"}]},{"type":"text","value":" pour le voir se développer. À l’extrême droite du journal, vous pouvez cliquer sur "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Follow log"}]},{"type":"text","value":" pour faciliter l’affichage du journal mis à jour."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Une fois que Travis CI a terminé notre script et créé l’application, vous verrez l’icône virer au vert pour vous informer que votre script s’est terminé avec succès."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Test continu"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maintenant que nous avons créé nos applications, allons dans le monde des "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"tests continus"}]},{"type":"text","value":" en laissant "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Travis CI"}]},{"type":"text","value":" exécuter nos "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"tests unitaires"}]},{"type":"text","value":" à chaque nouveau commit."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Malheureusement, nous ne pouvons pas simplement "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm run test"}]},{"type":"text","value":" sur Travis CI. En effet, nous ne pouvons pas réellement lancer une interface graphique de navigateur. Nous allons donc utiliser "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Headless Chrome"}]},{"type":"text","value":" pour exécuter nos tests unitaires."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Suivez les instructions pour créer un nouveau script npm comme celui-ci:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-text","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"\"test-headless\": \"ng test --watch=false --browsers=ChromeHeadless\","}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous pouvons maintenant exécuter nos tests unitaires en utilisant Headless Chrome comme ceci:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" run test-headless"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maintenant, ajouter "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm run test-headless"}]},{"type":"text","value":" à notre fichier "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":".travis.yml"}]},{"type":"text","value":" dans la section script comme ceci:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yml"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-yml","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng lint\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm run test"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"headless\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng build "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"prod "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"base"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"href https"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//ludovicwyffels.github.io/travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"demo/"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Commiter et push sur GitHub:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .travis\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -am "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Added unit for Travis CI using Headless Chrome\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Après avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet exécuter les tests unitaires, puis faire le build."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Intégration continue"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maintenant que nous testons et buildons, nous souhaitons déployer notre application."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous devons créer un jeton d’accès personnel GitHub. Suivez "},{"type":"element","tagName":"a","properties":{"href":"https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"ces instructions."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Dans le tableau de bord Travis CI, accédez à votre projet. En haut à droite, cliquez sur "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Paramètres"}]},{"type":"text","value":". Faites défiler jusqu’à la section "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Variables d’environnement"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ajoutez une nouvelle variable d’environnement nommée: "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"GITHUB_TOKEN"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Pour la valeur, collez la valeur réelle de votre jeton d’accès personnel GitHub que vous avez généré. Cliquez sur "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Ajouter"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Déploiement sur les pages GitHub"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Enfin, configurons Travis CI pour le déploiement sur GitHub Pages."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ajoutez une section de déploiement à votre "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":".travis.yml"}]},{"type":"text","value":". A ce stade, votre fichier devrait resembler à ceci:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yml"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-yml","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"language"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" node_js\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node_js"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"10\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"dist"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" trusty\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" required\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"before_script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"g @angular/cli\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng lint\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm run test"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"headless\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" ng build "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"prod "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"base"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"href https"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//ludovicwyffels.github.io/travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"demo/\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"deploy"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"provider"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" pages\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"skip_cleanup"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github_token"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $GITHUB_TOKEN\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"local_dir"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" dist/travis"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"demo\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"on"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" master"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Encore une fois, assurez-vous que vous utilisez "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"votre propre identifiant GitHub"}]},{"type":"text","value":" au lien de ludovicwyffels."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ceci indique à Travis CI d’utiliser notre jeton GitHub à partir de la variable d’environnement: "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"GITHUB_TOKEN"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"En outre, il spécifie que les fichiers à déployer proviennent de notre dossier "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"dist"}]},{"type":"text","value":": "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"dist/travis-demo"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Engagez-vous et appuyez sur GitHub:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -am "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"Deploy to GitHub pages\""}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]},{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Nous devrions également pouvoir accéder à l’URL de nos pages GitHub et voir notre application déployée."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-text","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"https://ludovicwyffels.github.io/travis-demo/ "}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]}],"data":{"quirksMode":false}},"excerpt":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel GitHub . Nous allons configurer Travis CI de manière à ce que lors de la mise en place d’un nouveau commit pour notre application Angular, celui-ci: Exécuter le linter Lancer nos tests unitaires Lancer nos tests E2E Construire notre application pour la production Déployé vers GitHub Pages Définitions Test continu (CT) Les tests continus consistent à exécuter des tests automatisés dans le cadre du pipeline de livraison de logiciels pour obtenir un retour immédiat sur les risques commerciaux associés à une version candidate du lociel. Intégration Continue (CI) L’intégration continue est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code source que le résultat des modifications ne produit pas de régression dans l’application développée. En pratique Ok, ces définitions sont bien. Mais, en pratique, qu’est-ce qu’ils signifient vraiment? Pour les besoins de cet article, je vais utiliser des définitions similaires, mais très pragmatiques et spécifiques: CT Nos tests sont exécutés automatiquement avant chaque déploiement. Et notre code ne sera pas déployé si des tests échouent. CI Transférer des modifications dans une branche spécifique de notre repo GitHub lance un processus de déploiement automatisé. Créer une application Angular Pour commencer, créez une nouvelle application Angular en utilisant Angular CLI. Aller sur: http://localhost:4200 GitHub Créer un nouveau repo GitHub: travis-demo Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-être d’abord vous engager si vous avez effectué des mises à jour. Assurez-vous de remplacer ludovicwyffels par votre propre identifiant GitHub. Travis CI Inscrivez-vous à Travis CI en utilisant votre compte GitHub. Accédez à votre profil pour voir la liste des repos. Si vous avez déjà un compte, vous devrez utiliser le bouton Sync account pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-être utiliser le filtre pour voir réellement votre repo si vous en avez beaucoup. Vous pouvez cliquer sur le bouton Paramètres à droite du repo. Ajouter une configuration Travis CI Afin de dire à Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI. Créez un fichier à la racine de votre espace de travail appelé .travis.yml avec le contenu suivant: Pour le --base-ref vous devrez utiliser votre propre identifiant GitHub. Ce fichier indique à Travis CI de procéder comme suit: Utilisez Node.js Surveillez uniquement la branche principale pour connaître les modifications. Avant d’exécuter l’un des scripts, installez Angular CLI Assurez-vous que l’application respecte nos règles en matière de linting utilisant ng lint. Construisez notre application en utilisant ng build. Après avoir ajouté le fichier de configuration Travis CI, commiter et pousser. Après avoir effectué cette opération, passez au tableau de bord Travis CI pour afficher le journal Travis CI au fur et à mesure de la création de votre application. Vous devrez peut-être cliquer sur l’onglet Current pour le voir se développer. À l’extrême droite du journal, vous pouvez cliquer sur Follow log pour faciliter l’affichage du journal mis à jour. Une fois que Travis CI a terminé notre script et créé l’application, vous verrez l’icône virer au vert pour vous informer que votre script s’est terminé avec succès. Test continu Maintenant que nous avons créé nos applications, allons dans le monde des tests continus en laissant Travis CI exécuter nos tests unitaires à chaque nouveau commit. Malheureusement, nous ne pouvons pas simplement npm run test sur Travis CI. En effet, nous ne pouvons pas réellement lancer une interface graphique de navigateur. Nous allons donc utiliser Headless Chrome pour exécuter nos tests unitaires. Suivez les instructions pour créer un nouveau script npm comme celui-ci: Nous pouvons maintenant exécuter nos tests unitaires en utilisant Headless Chrome comme ceci: Maintenant, ajouter npm run test-headless à notre fichier .travis.yml dans la section script comme ceci: Commiter et push sur GitHub: Après avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet exécuter les tests unitaires, puis faire le build. Intégration continue Maintenant que nous testons et buildons, nous souhaitons déployer notre application. Nous devons créer un jeton d’accès personnel GitHub. Suivez ces instructions. Dans le tableau de bord Travis CI, accédez à votre projet. En haut à droite, cliquez sur Paramètres. Faites défiler jusqu’à la section Variables d’environnement. Ajoutez une nouvelle variable d’environnement nommée: GITHUB_TOKEN Pour la valeur, collez la valeur réelle de votre jeton d’accès personnel GitHub que vous avez généré. Cliquez sur Ajouter. Déploiement sur les pages GitHub Enfin, configurons Travis CI pour le déploiement sur GitHub Pages. Ajoutez une section de déploiement à votre .travis.yml. A ce stade, votre fichier devrait resembler à ceci: Encore une fois, assurez-vous que vous utilisez votre propre identifiant GitHub au lien de ludovicwyffels. Ceci indique à Travis CI d’utiliser notre jeton GitHub à partir de la variable d’environnement: GITHUB_TOKEN En outre, il spécifie que les fichiers à déployer proviennent de notre dossier dist: dist/travis-demo Engagez-vous et appuyez sur GitHub: Nous devrions également pouvoir accéder à l’URL de nos pages GitHub et voir notre application déployée.","timeToRead":5,"frontmatter":{"title":"Angular DevOps: CT/CI avec Travis CI et Github Pages","subtitle":"Utilisation de Travis CI pour implémenter les tests continus (CT) et l'intégration continue (CI) afin de déployer notre application Angular sur Github Pages","userDate":"29 April 2019","date":"2019-04-29T08:00:00.000Z","tags":["Angular","DevOps","Typescript","Node.js"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz2P4/+/f/79/geQ/MPkfGfyDYIQgWBUUALkM/1HBPzBA6EUS/48BGH6/ePF1yfK7lTV3Fi76/uwZWB3I1I+fX57eu/TKqU0/fn0BciFWvXr1qrysLCQoaN3atSDNb1vaHylrPpk8bY2M/LWWtq9/fj9/+uz3r2+Xzi1c3puzeXH59Wubfv36/fr16z9//mRlZNRUV/f29MTFxGxYv57hfd+EV8npX67fOBafeHvCpMXr17c0tVy/cq63PK2hIru5OG3h3I7TZ06VlJRs2LAhODDwx48fQDvXrFmTnprK8HXn7rcZORe9/Y6mpL3ev//Ry5dXLl16/vzlhNbaSYVZrQkxi2dNe//h44EDBx4+fBgYELB7166fP34AGR3t7aAA+7F7783M7Kd790FCBhLmJ1as2RQcvy214O6JMyA///kDJPfs2bNkyZLr168nJSZ++vQJZ2j/+/Pn+4/vP//9QQ5tIPnz50+4GrBmYEhCEFbw7x9mhEH0M/ynAFCkGQDmsz6sxuzErwAAAABJRU5ErkJggg==","aspectRatio":1.7777777777777777,"src":"/static/1a448c2debbe7a75dd52ebe4c3d9c37e/9ecf6/ngTravisGit.png","srcSet":"/static/1a448c2debbe7a75dd52ebe4c3d9c37e/4c9af/ngTravisGit.png 930w,\n/static/1a448c2debbe7a75dd52ebe4c3d9c37e/9ecf6/ngTravisGit.png 1600w","sizes":"(max-width: 1600px) 100vw, 1600px"}}},"author":{"id":"ludo","name":"Wyffels Ludovic","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQ4y2MwsXf5T03MMGogGBvbOYNpUwdXOIbJwdgwNQQNhCk0snX6r2thC8Y6QGxg7QCWA/FBcrgMxepCkAZrV6//EYmpYBydkvHfMzjiv5mj2//whJT/Nm7ecEMJGgjykp6V/f+AqLj/O/Ye+L8diA8dO/m/pbv/v72n3/+tu/f9D45N/K9naYcSFESFoRXQlSCX2rh7g/kgr1u5epIWhiAMCi/3wLD/fVNn/u+fNgtMT5g+6//kmXOB/Jn/PYLCwWrINnDijDlAPBvKJ8NAZC+DIgCkGYRBbJAYSV5GjpTte/b/PwiMkLj0nP8xqVn/Dxw9AY6kwOh40iIFlmzCgUkmKjnjvx0wdu08fMFskJi1mxfxyQY9YetAEzJyQic5YaNnPeTgIDnrjZaHJGMACtTMXoVAJ6sAAAAASUVORK5CYII=","width":400,"height":400,"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png","srcSet":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png 1x"}}]}}}},"relatedPosts":{"totalCount":2,"edges":[{"node":{"id":"5a9f4e28-76a1-5c32-9601-a4e1921c3776","timeToRead":5,"excerpt":"Bien que le titre de cet article soit un peu trompeur, car nous ne souhaitons pas vraiment communiquer directement entre les composants. Nos composants doivent être isolés et encapsulés. J’ai choisi ce titre parce que je pense que les développeurs aux prises avec ce problème le googleront de cette façon. Comment communiquer entre les composants? C’est le sujet sur lequel j’ai vu beaucoup de nouveaux développeurs angular lutter pour communiquer entre les composants. Je vais vous montrer les trois approches les plus courantes, avec des exemples qui correspondent à différents cas d’utilisation. Il y a aussi le “moyen de redux” que je pourrais couvrir dans un autre article à l’avenir.   Imaginez le cas d’utilisation de la barre latérale dans votre application. La barre latérale est ouverte ou fermée. Vous avez le composant side-bar et ensuite vous avez un composant (ou plusieurs composants) qui peuvent l’ouvrir / le fermer ou demander son état. Je décrirai trois manières de mettre en oeuvre ce comportement Passer la référence d’un composant à un autre Communication par le composant parent Communication à travers le service  1. Passer la référence d’un composant à un autre Cette solution doit être utilisée lorsque les composants ont une dépendance entre eux. Par exemple, dropdown et dropdown toggle. Ils ne peuvent généralement pas exister l’un sans l’autre.  Demo Nous allons créer le composant side-bar-toggle qui aura le composant side-bar en entrée et en cliquant sur le bouton bascule nous ouvrirons / fermerons le composant side-bar. Voici le code pertinent:  app.component.html side-bar-toggle.component.ts side-bar.component.ts 2. Communication par le composant parent Peut être utilisé lorsqu’il est facile de contrôler l’état partagé entre des composants via leur composant parent et que vous ne souhaitez pas créer de nouveau service ou créer du code standard, à cause d’une variable.  Demo La mise en oeuvre de cette approche est presque la même que la précédente, mais le composant side-bar-toggle ne reçoit pas de composant side-bar. Au lieu de cela, le composant parent contient la propriété sideBarIsOpened qui est transmise au composant side-bar. app.component.html app.component.ts side-bar-toggle.component.ts side-bar.component.ts 3. Communication à travers le service Enfin, cette option est utile et doit être utilisée lorsque vous avez un composant contrôlé ou que son état est demandé à plusieurs instances.   Nous avons maintenant plusieurs emplacements dans l’application qui devront accéder à notre composant sibe-bar. Voyons comment nous le faisons. Nous allons maintenant créer side-bar.service.ts donc nous aurons: side-bar.service.ts side-bar.component.ts side-bar.component.html  Les services de la barre latérale auront une méthode et un événement à changer pour que chaque composant qui injectera ce service puisse être averti de l’ouverture ou de la bascule d’un panneau. Dans cet exemple, aucun composant latéral ni composant latéral ne comporte de paramètres d’entrée, car ils communiquent via le service. Maintenant le code:  app.component.html side-bar-toggle.component.ts side-bar.component.ts side-bar.service.ts","frontmatter":{"title":"3 façons de communiquer entre les composants Angular","subtitle":""},"fields":{"slug":"/angular-3way-communication/"}}},{"node":{"id":"f3d9e7d1-3a29-5f66-b17f-926e06970fe8","timeToRead":5,"excerpt":"Cet article explique comment utiliser Travis CI pour surveiller les modifications apportées à la branche principale de notre référentiel GitHub . Nous allons configurer Travis CI de manière à ce que lors de la mise en place d’un nouveau commit pour notre application Angular, celui-ci: Exécuter le linter Lancer nos tests unitaires Lancer nos tests E2E Construire notre application pour la production Déployé vers GitHub Pages Définitions Test continu (CT) Les tests continus consistent à exécuter des tests automatisés dans le cadre du pipeline de livraison de logiciels pour obtenir un retour immédiat sur les risques commerciaux associés à une version candidate du lociel. Intégration Continue (CI) L’intégration continue est un ensemble de pratiques utilisées en génie logiciel consistant à vérifier à chaque modification de code source que le résultat des modifications ne produit pas de régression dans l’application développée. En pratique Ok, ces définitions sont bien. Mais, en pratique, qu’est-ce qu’ils signifient vraiment? Pour les besoins de cet article, je vais utiliser des définitions similaires, mais très pragmatiques et spécifiques: CT Nos tests sont exécutés automatiquement avant chaque déploiement. Et notre code ne sera pas déployé si des tests échouent. CI Transférer des modifications dans une branche spécifique de notre repo GitHub lance un processus de déploiement automatisé. Créer une application Angular Pour commencer, créez une nouvelle application Angular en utilisant Angular CLI. Aller sur: http://localhost:4200 GitHub Créer un nouveau repo GitHub: travis-demo Nous devons maintenant ajouter le repo GitHub en tant que distant de notre repo Git local. Vous devrez peut-être d’abord vous engager si vous avez effectué des mises à jour. Assurez-vous de remplacer ludovicwyffels par votre propre identifiant GitHub. Travis CI Inscrivez-vous à Travis CI en utilisant votre compte GitHub. Accédez à votre profil pour voir la liste des repos. Si vous avez déjà un compte, vous devrez utiliser le bouton Sync account pour que votre nouveau repo apparaisse dans la liste. De plus, vous devrez peut-être utiliser le filtre pour voir réellement votre repo si vous en avez beaucoup. Vous pouvez cliquer sur le bouton Paramètres à droite du repo. Ajouter une configuration Travis CI Afin de dire à Travis CI de faire quelque chose avec notre repo, nous devons ajouter un fichier de configuration Travis CI. Créez un fichier à la racine de votre espace de travail appelé .travis.yml avec le contenu suivant: Pour le --base-ref vous devrez utiliser votre propre identifiant GitHub. Ce fichier indique à Travis CI de procéder comme suit: Utilisez Node.js Surveillez uniquement la branche principale pour connaître les modifications. Avant d’exécuter l’un des scripts, installez Angular CLI Assurez-vous que l’application respecte nos règles en matière de linting utilisant ng lint. Construisez notre application en utilisant ng build. Après avoir ajouté le fichier de configuration Travis CI, commiter et pousser. Après avoir effectué cette opération, passez au tableau de bord Travis CI pour afficher le journal Travis CI au fur et à mesure de la création de votre application. Vous devrez peut-être cliquer sur l’onglet Current pour le voir se développer. À l’extrême droite du journal, vous pouvez cliquer sur Follow log pour faciliter l’affichage du journal mis à jour. Une fois que Travis CI a terminé notre script et créé l’application, vous verrez l’icône virer au vert pour vous informer que votre script s’est terminé avec succès. Test continu Maintenant que nous avons créé nos applications, allons dans le monde des tests continus en laissant Travis CI exécuter nos tests unitaires à chaque nouveau commit. Malheureusement, nous ne pouvons pas simplement npm run test sur Travis CI. En effet, nous ne pouvons pas réellement lancer une interface graphique de navigateur. Nous allons donc utiliser Headless Chrome pour exécuter nos tests unitaires. Suivez les instructions pour créer un nouveau script npm comme celui-ci: Nous pouvons maintenant exécuter nos tests unitaires en utilisant Headless Chrome comme ceci: Maintenant, ajouter npm run test-headless à notre fichier .travis.yml dans la section script comme ceci: Commiter et push sur GitHub: Après avoir pusher, passez au tableau de bord Travis CI pour regarder votre projet exécuter les tests unitaires, puis faire le build. Intégration continue Maintenant que nous testons et buildons, nous souhaitons déployer notre application. Nous devons créer un jeton d’accès personnel GitHub. Suivez ces instructions. Dans le tableau de bord Travis CI, accédez à votre projet. En haut à droite, cliquez sur Paramètres. Faites défiler jusqu’à la section Variables d’environnement. Ajoutez une nouvelle variable d’environnement nommée: GITHUB_TOKEN Pour la valeur, collez la valeur réelle de votre jeton d’accès personnel GitHub que vous avez généré. Cliquez sur Ajouter. Déploiement sur les pages GitHub Enfin, configurons Travis CI pour le déploiement sur GitHub Pages. Ajoutez une section de déploiement à votre .travis.yml. A ce stade, votre fichier devrait resembler à ceci: Encore une fois, assurez-vous que vous utilisez votre propre identifiant GitHub au lien de ludovicwyffels. Ceci indique à Travis CI d’utiliser notre jeton GitHub à partir de la variable d’environnement: GITHUB_TOKEN En outre, il spécifie que les fichiers à déployer proviennent de notre dossier dist: dist/travis-demo Engagez-vous et appuyez sur GitHub: Nous devrions également pouvoir accéder à l’URL de nos pages GitHub et voir notre application déployée.","frontmatter":{"title":"Angular DevOps: CT/CI avec Travis CI et Github Pages","subtitle":"Utilisation de Travis CI pour implémenter les tests continus (CT) et l'intégration continue (CI) afin de déployer notre application Angular sur Github Pages"},"fields":{"slug":"/angular-travis-ctci/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/angular-travis-ctci/","prev":{"excerpt":"Depuis que j’ai découvert TypeScript, je l’utilise pour toutes mes applications JavaScript. Il y a tellement d’avantages à utiliser TypeScript que vous aurez besoin d’un argument convaincant pour me permettre d’écrire quoi que ce soit en JavaScript Vanilla. Dans cet article, je vais vous montrer comment configurer un environnement de développement simple pour écrire une application Node.js en TypeScript. Permettez-moi de commencer par dire qu’il existe probablement un millier de façons différentes de créer des applications Node.js en TypeScript. Je vais juste montrer la façon dont j’aime le faire moi-même. Si vous n’avez pas envie de lire tout cet article, vous pouvez trouver mon projet de démarrage ici: https://github.com/toxsickcoder/node-typescript-starter . Il contient des fonctionnalités supplémentaires dont nous ne discuterons pas dans cet article. Package.json Comme je l’ai déjà dit, il y a beaucoup de façons différentes de le faire. J’aime utiliser Webpack pour mes projets TypeScript. Commençons par créer un package.json. Vous pouvez générer un package.json à l’aide de la commande npm init ou copier-coller le code ci-dessous et le modifier. Commençons par une simple configuration Webpack pour un projet JavaScript Node.js. Après avoir terminé la configuration de base, j’ajouterai TypeScript. L’application Comme mentionné précédemment, nous allons commencer par une application JavaScript, puis convertir celle-ci en TypeScript. Créons un répertoire src/ avec un main.js et information-logger.js avec certaines fonctionnalités de Node.js: Ce script de base enregistre certaines informations d’application et système sur la console. Je peux voir la sortie suivante après avoir exécuté le node main.js Webpack La première chose à faire avant d’utiliser Webpack est d’installer les dépendances nécessaires. N’oubliez pas d’utiliser l’indicateur -D car il s’agit de devDependencies. Vous avez peut-être remarqué que je n’ai pas installé webpack-dev-server. C’est parce que nous créons une application Node.js. Plus tard, je vais utiliser nodemon qui a le même objectif. webpack.config.js La prochaine étape consiste à créer un fichier webpack.config.js où nous indiquerons à Webpack comment il doit traiter notre code. Comme vous pouvez le constater, il ne faut pas grand-chose pour commencer avec Webpack. Les deux seules options requises sont entry et target. Nous déclarons notre point d’entrée à l’aide du champ entry et nous informons Webpack que nous travaillons dans Node.js avec le champ target. Nous pouvons utiliser le champ mode pour indiquer à Webpack qu’il doit se concentrer sur la vitesse de compilation (développement), ou sur l’obfuscation et la minification (production). Pour faciliter le débogage, nous utilisons le champ devtool pour indiquer que nous voulons des sources maps si nous nous exécutons en développement. De cette façon, s’il y a une erreur, nous pouvons facilement trouver l’endroit où elle s’est produite dans notre code. Pour utiliser Webpack, nous allons créer quelques commandes npm: Nous pouvons maintenant construire notre application en exécutant l’une ou l’autre de ces commandes. Il créera un répertoire dist/ avec le fichier de sortie main.js à l’intérieur. Notre projet devrait ressembler à ceci maintenant: nodemon Vous avez peut-être remarqué qu’après l’exécution d’une commande de démarrage, Webpack s’arrête après la construction de l’application. Il ne surveille pas les modifications de fichiers que nous apportons. Et puisque nous travaillons avec Node.js, nous ne pouvons pas utiliser le serveur webpack-dev-server. Heureusement, nous pouvons utiliser nodemon pour résoudre ce problème. C’est un outil spécialement conçu à cet effet: redémarrer les applications Node.js pendant le développement. Commençons par installer le nodemon-webpack-plugin. N’oubliez pas le flag -D car c’est une devDependency. Créons un nouveau flag nodemon et ajoutons le plug-in à notre fichier webpack.config.js. Lorsque nous passerons le flag nodemon, nous définirons la configuration de la surveillance Webpack et nous ajouterons le plug-in nodemon . La configuration de la surveillance Webpack reconstruira l’application lorsque nous modifierons un fichier. Le plug-in nodemon redémarrera l’application une fois la reconstruction terminée. Nous devrons également mettre à jour nos commandes npm. J’ai également créé des commandes de construction, sans le flag nodemon. Voilà, une configuration de base Webpack pour l’application Node.js. La prochaine étape est d’ajouter TypeScript! TypeScript Et maintenant, au moment que nous attendions tous, ajoutons TypeScript! Commençons par installer les dépendances dont nous avons besoin. S’agissant d’un projet Node.js, nous devons également installer les typings associés. Je travaille sur la version LTS de Node.js, la version 10. C’est pourquoi la version ^10.0.0 de @types/node. ts-loader Nous allons utiliser le plug-in Webpack ts-loader pour compiler notre TypeScript. Pour ce faire, nous devons dire à Webpack de traiter les fichiers TypeScript avec le plug-in ts-loader. Nous devons modifier notre extension de fichier d’ entrée en .ts et indiquer à Webpack qu’il doit également résoudre les fichiers .ts (Webpack ne fonctionne qu’avec les fichiers .js par défaut). tsconfig.json Si nous essayons d’exécuter notre application maintenant, elle se plantera. Il nous manque encore un fichier tsconfig.json. Alors créons-en un. Je préfère les fichiers tsconfig stricts, comme vous pouvez le voir ci-dessus. Tu n’as pas à faire ça. J’aime également définir une cible élevée (esnext ou es2018) car Node.js offre un excellent support pour les nouvelles fonctionnalités JavaScript. L’application Nous devons toujours changer l’extension des fichiers JavaScript de .js à .ts. Faisons-le et essayons de lancer le projet. Après avoir exécuté le projet, nous pouvons immédiatement constater que nous avons commis une “erreur” dans l’application de test que nous avons créée. Nous ne pouvons pas déstructurer notre champ name du package.json car il est déjà défini ou nous l’écraserions. Faisons donc quelques modifications pour créer les fichiers. Si vous avez tout suivi, voici à quoi devrait ressembler notre structure de projet: Et nous sommes prêts à écrire des applications Node.js en TypeScript! Note finale Je suis sûr qu’il existe des milliers de façons différentes d’écrire des applications Node.js dans TypeScript. Ce n’est en aucun cas la façon dont vous devriez le faire, c’est une façon de le faire. Les prochaines étapes pourraient être l’intégration de TSLint, l’ajout d’un fichier Docker, la configuration d’un pipeline CI…","timeToRead":7,"frontmatter":{"title":"Comment écrire des applications Node.js en TypeScript","subtitle":"Et simplifiez leur maintenance tout en créant moins de bugs.","tags":["Node.js","TypeScript","Javascript"],"category":["Node.js"],"date":"2019-04-27T08:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7777777777777777,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVQoz41Qu07DQBDMd/BDKfgTUP4hKAV0KKSJQJRpoxSRLEHBI0oVS0ljOU/HhgIs2cjYzsN3u3tczhKKohx4itWududm5kriTwAAEem2pYNZngZBwIFvIJajYXQXi1margA5x62WnCu4nlOrXjyardtl2ei1Kudnd/eN65urj9QehW0krlPekZMk9lzPmg+spOO8268vz+OJNRyamYj99TS/0dpW/FUYRr9eCJFl20KZEZEzmVb+E5LCOmPO5xcjcSB7xLYQbGmevtl12XEAWbvj6ORy9DD7FupJrbLagGs33fnTrkOU1fI39b7vRZkKIv7JXBxHyHnafTtIggqSi+MHFk154/b4x+YAAAAASUVORK5CYII=","sizes":"(max-width: 1600px) 100vw, 1600px","src":"/static/8b378c07791d424a4afbd8bf14b92449/9ecf6/node-js-ts.png","srcSet":"/static/8b378c07791d424a4afbd8bf14b92449/4c9af/node-js-ts.png 930w,\n/static/8b378c07791d424a4afbd8bf14b92449/9ecf6/node-js-ts.png 1600w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-typescript/"}},"next":{"excerpt":"Dans le passé, vous avez peut-être utilisé des notifications dans votre programme en utilisant quelque chose comme PubNub ou pusher ou un autre service tiers.\nMais ce module, web-push, nous permet de le faire sans l’aide de l’un de ces services tiers. Avez-vous déjà entendu parler de service worker? Si vous ne connaissez pas ce qu’est une progressive web apps, il y a peu de chance que le terme de service worker vous parle Définition d’un service worker Les service workers jouent essentiellement le rôle de serveurs proxy placés entre une application web, et le navigateur ou le réseau (lorsque disponible.) Ils sont destinés (entre autres choses) à permettre la création d’expériences de navigation déconnectée efficaces, en interceptant les requêtes réseau et en effectuant des actions appropriées selon que le réseau est disponible et que des ressources mises à jour sont à disposition sur le serveur. Ils permettront aussi d’accéder aux APIs de notifications du serveur (push) et de synchronisation en arrière-plan.  Plus d’information sur son fonctionnement sur : un guide pour débutant la documentation de mozilla Le service worker fonctionne avec les dernières versions de Chrome et Firefox, je ne crois pas que Edge le support encore. Mais ce n’est pas grave puisque Edge va bientôt changer son moteur pour Chromium. Module web-push Commençons un nouveau projet en installant les dépendances Créons un fichier index.js Nous avons besoin de générer des clés, pour se faire: ou  Vous obtenez une paire de clés privées/public comme ceux-ci: On va les utiliser tout de suite Il nous reste a configurer un dossier statique, en ajoutant la ligne suivante dans notre fichier index.js Redémarrer le serveur. Créer le dossier client client/index.html client/client.js Dans le service Worker, nous allons juste écouter les événements push client/worker.js Ouvrer dans votre navigateur Chrome/Firefox, l’URL localhost:5000, vous devriez avoir une popup vous demandant d’autoriser ou non les notifications","timeToRead":5,"frontmatter":{"title":"Push notification","subtitle":"Contruire une notification en utilisant Node.js et un module appelé web push.","tags":["Node.js","Javascript"],"category":["Node.js"],"date":"2019-05-04T20:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5003750937734435,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABfzVFgNka/8QAGhAAAgMBAQAAAAAAAAAAAAAAAgMAARESMf/aAAgBAQABBQJ+R90xnAwm6Ty5Ivf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAfEAABBAAHAAAAAAAAAAAAAAAAAQIREhATIjFygZH/2gAIAQEABj8CZyFrtBqcsmXXsonuH//EABwQAAIBBQEAAAAAAAAAAAAAAAERABAhMUFRYf/aAAgBAQABPyFARlCTfkBYLIfYMKzgj5QxZNSoB7Gh/9oADAMBAAIAAwAAABCr3//EABYRAQEBAAAAAAAAAAAAAAAAAAEAIf/aAAgBAwEBPxAdsb//xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQIBAT8Qsa//xAAbEAEBAQADAQEAAAAAAAAAAAABEQAhMUGBkf/aAAgBAQABPxAdGbFMpczJoSiHzDIXB3kxRCCFk+TIZQLs5ff3cHv/2Q==","sizes":"(max-width: 2000px) 100vw, 2000px","src":"/static/65314db62cb2374caf4cf5b8ceab49a1/883ab/webpush.jpg","srcSet":"/static/65314db62cb2374caf4cf5b8ceab49a1/f8f18/webpush.jpg 930w,\n/static/65314db62cb2374caf4cf5b8ceab49a1/0e6ff/webpush.jpg 1860w,\n/static/65314db62cb2374caf4cf5b8ceab49a1/883ab/webpush.jpg 2000w"}}},"author":{"id":"ludo","bio":"Développeur senior. Fullstack + DevOps","avatar":{"children":[{"fixed":{"src":"/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png"}}]}}},"fields":{"layout":"post","slug":"/node-push-notification/"}},"primaryTag":"Angular","primaryCategory":"DevOps"}}}