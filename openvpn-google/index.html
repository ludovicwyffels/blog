<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.5a281cbf59aff81516dd.css">.gatsby-highlight{font-size:.8em;margin-bottom:1.5em}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#c1def1}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#c1def1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #ddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #ddd}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:green;font-style:italic}.token.namespace{opacity:.7}.token.string{color:#a31515}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.inserted,.token.number,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.language-json .token.boolean,.language-json .token.number,.token.atrule,.token.attr-value,.token.keyword,code[class*=language-css]{color:#00f}.token.function{color:#393a34}.language-autohotkey .token.tag,.token.deleted{color:#9a050f}.language-autohotkey .token.keyword,.token.selector{color:#00009f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.language-json .token.property,.token.class-name{color:#2b91af}.token.selector,.token.tag{color:maroon}.token.attr-name,.token.entity,.token.property,.token.regex{color:red}.token.directive.tag .tag{background:#ff0;color:#393a34}.line-numbers .line-numbers-rows{border-right-color:#a5a5a5}.line-numbers-rows>span:before{color:#2b91af}.line-highlight{background:rgba(193,222,241,.2);background:-webkit-linear-gradient(left,rgba(193,222,241,.2) 70%,rgba(221,222,241,0));background:linear-gradient(90deg,rgba(193,222,241,.2) 70%,rgba(221,222,241,0))}:not(pre)>code{background-color:rgba(27,31,35,.05);margin:0;padding:.2em .4em}:not(pre)>code,pre{border-radius:3px;font-size:85%}pre{line-height:1.45;overflow:auto;padding:16px}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px dashed #ddd;text-decoration:none;transition:border .3s ease}.newer-posts{left:0}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.pagination{position:relative;width:100%;max-width:100%;margin:1rem auto;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;transition:all .2s ease}@media (max-width:500px){.hide{display:none}}</style><meta name="generator" content="Gatsby 2.17.7"/><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="canonical" href="https://ludovicwyffels.dev/openvpn-google/" data-baseprotocol="https:" data-basehost="ludovicwyffels.dev"/><title data-react-helmet="true">Configuration d&#x27;un serveur OpenVPN sur Google Compute Engine</title><link data-react-helmet="true" rel="icon" href="/static/favicon-36e47e74810a0d8c32a77f495c49cf8e.ico" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="J’ai récemment commencé à utiliser OpenVPN et à profiter des différentes options qu’il propose, notamment le masquage du trafic VPN sous TCP…"/><meta data-react-helmet="true" property="og:site_name" content="Code avec Ludo"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Configuration d&#x27;un serveur OpenVPN sur Google Compute Engine"/><meta data-react-helmet="true" property="og:description" content="J’ai récemment commencé à utiliser OpenVPN et à profiter des différentes options qu’il propose, notamment le masquage du trafic VPN sous TCP…"/><meta data-react-helmet="true" property="og:url" content="https://ludovicwyffels.github.io/openvpn-google/"/><meta data-react-helmet="true" property="og:image" content="https://ludovicwyffels.github.io/static/3bf8405e70096f9e75e8c849f54b0d1f/de998/openvpn.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2019-04-14T08:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="Google Cloud"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Configuration d&#x27;un serveur OpenVPN sur Google Compute Engine"/><meta data-react-helmet="true" name="twitter:description" content="J’ai récemment commencé à utiliser OpenVPN et à profiter des différentes options qu’il propose, notamment le masquage du trafic VPN sous TCP…"/><meta data-react-helmet="true" name="twitter:url" content="https://ludovicwyffels.github.io/openvpn-google/"/><meta data-react-helmet="true" name="twitter:image" content="https://ludovicwyffels.github.io/static/3bf8405e70096f9e75e8c849f54b0d1f/de998/openvpn.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="ludo"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Google Cloud"/><meta data-react-helmet="true" property="og:image:width" content="810"/><meta data-react-helmet="true" property="og:image:height" content="456"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-138733938-1', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      
      
      
      
      
      }</script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-2de1e6511d45930aad45.js"/><link as="script" rel="preload" href="/styles-a66bae0be496036e5af8.js"/><link as="script" rel="preload" href="/app-d3f6cae5f31a1f98cf39.js"/><link as="script" rel="preload" href="/commons-337eaefa30ba2d857830.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-8de9d3a3f6669b02f668.js"/><link as="fetch" rel="preload" href="/page-data/openvpn-google/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion-css="1f94ib9">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0);}body{overflow-x:hidden;color:#3b474d;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}::selection{text-shadow:none;background:#cbeafb;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote small:before{content:'\2014 \00A0';}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:700;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5rem;font-weight:700;}@media (max-width:500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2rem;}@media (max-width:500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width:500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#f4f8fb;}</style><style data-emotion-css="1mpact1">.css-1mpact1 .site-main{background:#fff;padding-bottom:4vw;}</style><style data-emotion-css="1tchvvq">.css-1tchvvq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-1tchvvq .site-main{background:#fff;padding-bottom:4vw;}</style><div class="css-1tchvvq e21u3lc0"><style data-emotion-css="7n4c3k">.css-7n4c3k{position:relative;padding:0 4vw;position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#0a0b0c no-repeat center center;background-size:cover;}</style><header class="css-7n4c3k"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><style data-emotion-css="1gzkrzj">.css-1gzkrzj{position:relative;z-index:300;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.25rem;}</style><nav class="css-1gzkrzj"><style data-emotion-css="72a8gi">.css-72a8gi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding-bottom:80px;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width:700px){.css-72a8gi{margin-right:0;padding-left:4vw;}}</style><div class="css-72a8gi e1psa8dr0"><style data-emotion-css="1trdsxq">.css-1trdsxq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;}.css-1trdsxq li{display:block;margin:0;padding:0;text-transform:uppercase;}.css-1trdsxq li a{display:block;margin:0;padding:10px 12px;color:#fff;opacity:0.8;}.css-1trdsxq li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}</style><ul role="menu" class="css-1trdsxq"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/node-js/">Node.js</a></li><li role="menuitem"><a href="/tags/dev-ops/">DevOps</a></li><li role="menuitem"><a href="/about">About</a></li></ul></div><style data-emotion-css="cniab2">.css-cniab2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;}@media (max-width:700px){.css-cniab2{display:none;}}</style><div class="css-cniab2 e1psa8dr1"><style data-emotion-css="1im5alu">.css-1im5alu{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1im5alu a:last-of-type{padding-right:20px;}</style><div class="css-1im5alu e1psa8dr2"><style data-emotion-css="1pe98dy">.css-1pe98dy{font-size:1.2em;font-weight:500;}</style><span class="css-1pe98dy"> Follow me </span><style data-emotion-css="1l1dftb">.css-1l1dftb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:10px;color:#fff;opacity:0.8;}.css-1l1dftb:hover{opacity:1;}.css-1l1dftb svg{height:1.8rem;fill:#fff;}</style><a href="https://github.com/ludovicwyffels" title="Github" target="_blank" rel="noopener noreferrer" class="css-1l1dftb"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></nav></div></header><style data-emotion-css="9696is">.css-9696is{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 4vw;}</style><main id="site-main" class="site-main css-9696is"><div class="css-s2cjas"><style data-emotion-css="1cj30xk">.css-1cj30xk{position:relative;z-index:50;}</style><article class="css-1cj30xk"><style data-emotion-css="29d3h2">.css-29d3h2{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center;}@media (max-width:500px){.css-29d3h2{padding:14vw 3vw 10vw;}}</style><header class="css-29d3h2 e1jujlwv0"><style data-emotion-css="1p0u1zc">.css-1p0u1zc{display:block;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.4rem;font-weight:600;text-transform:uppercase;}@media (max-width:500px){.css-1p0u1zc{font-size:1.2rem;line-height:1.3em;}}</style><section class="css-1p0u1zc e1jujlwv1"><style data-emotion-css="et0m70">.css-et0m70{color:#3eb0ef;}</style><time dateTime="2019-04-14T08:00:00.000Z" class="css-et0m70 e1jujlwv2">14 April 2019</time><style data-emotion-css="m5hopj">.css-m5hopj{display:inline-block;margin:0 6px 1px;}</style><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/google-cloud/">#<!-- -->Google Cloud</a><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/open-vpn/">#<!-- -->OpenVPN</a><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/vpn/">#<!-- -->VPN</a></section><style data-emotion-css="ldwdh4">.css-ldwdh4{margin:0;color:#0b0c0e;}@media (max-width:500px){.css-ldwdh4{font-size:2.9rem;}}</style><h1 class="css-ldwdh4 e1jujlwv3">Configuration d&#x27;un serveur OpenVPN sur Google Compute Engine</h1></header><style data-emotion-css="3wq2tr">.css-3wq2tr{margin:0 -10vw -165px;height:800px;background:#c5d2d9 center center;background-size:cover;border-radius:5px;}@media (max-width:1170px){.css-3wq2tr{margin:0 -4vw -100px;height:calc(100vw / 16 * 9);border-radius:0;}}@media (max-width:800px){.css-3wq2tr{height:calc(100vw / 16 * 9);}}@media (max-width:500px){.css-3wq2tr{margin-bottom:4vw;height:calc(100vw / 16 * 9);}}</style><figure class="css-3wq2tr e1jujlwv4"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:56.29629629629629%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHtZYUFyf/EABkQAAIDAQAAAAAAAAAAAAAAAAECABESIP/aAAgBAQABBQLRss023H//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAABBAMAAAAAAAAAAAAAAAAAAQIRICEiMv/aAAgBAQAGPwJdTDJOKf/EABoQAAICAwAAAAAAAAAAAAAAAAABESEgMUH/2gAIAQEAAT8hqJULbAuzrD//2gAMAwEAAgADAAAAEPz/AP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQMBAT8QUTll/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxAEe2l//8QAHBABAQACAgMAAAAAAAAAAAAAAREAISAxQVFh/9oACAEBAAE/EBhvcvvVw0sN8wxo2hndH6a4f//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3bf8405e70096f9e75e8c849f54b0d1f/de998/openvpn.jpg 810w" sizes="(max-width: 810px) 100vw, 810px" /><img loading="lazy" sizes="(max-width: 810px) 100vw, 810px" srcset="/static/3bf8405e70096f9e75e8c849f54b0d1f/de998/openvpn.jpg 810w" src="/static/3bf8405e70096f9e75e8c849f54b0d1f/de998/openvpn.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion-css="1ywavxh">.css-1ywavxh{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff;}@media (max-width:1170px){.css-1ywavxh{padding:5vw 7vw 0;}}@media (max-width:800px){.css-1ywavxh{font-size:1.9rem;}}.css-1ywavxh:before{content:'';position:absolute;top:15px;left:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg);}.css-1ywavxh:after{content:'';position:absolute;top:15px;right:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg);}.css-1ywavxh h1{text-align:center;}.css-1ywavxh h1,.css-1ywavxh h2,.css-1ywavxh h3,.css-1ywavxh h4,.css-1ywavxh h5,.css-1ywavxh h6,.css-1ywavxh p,.css-1ywavxh ul,.css-1ywavxh ol,.css-1ywavxh dl,.css-1ywavxh pre,.css-1ywavxh blockquote,.css-1ywavxh .post-full-comments,.css-1ywavxh .footnotes{min-width:100%;}.css-1ywavxh li{word-break:break-word;}.css-1ywavxh li p{margin:0;}.css-1ywavxh a{color:#000;word-break:break-word;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1ywavxh a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}.css-1ywavxh strong,.css-1ywavxh em{color:#0a0b0c;}.css-1ywavxh small{display:inline-block;line-height:1.6em;}.css-1ywavxh li:first-child{margin-top:0;}.css-1ywavxh .gatsby-resp-image-link{box-shadow:none;}.css-1ywavxh img,.css-1ywavxh video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width:1040px){.css-1ywavxh img,.css-1ywavxh video{width:100%;}}.css-1ywavxh img[src$='#full']{max-width:none;width:100vw;}.css-1ywavxh img + br + small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1ywavxh iframe{margin:0 auto !important;}.css-1ywavxh blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;text-align:left;font-size:0.8em;}.css-1ywavxh blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1ywavxh blockquote p:last-child{margin-bottom:0;}.css-1ywavxh .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em;}.css-1ywavxh hr{margin:4vw 0;}.css-1ywavxh hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1ywavxh h1,.css-1ywavxh h2,.css-1ywavxh h3,.css-1ywavxh h4,.css-1ywavxh h5,.css-1ywavxh h6{color:#0b0c0e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1ywavxh h1{margin:0.5em 0 0.2em 0;font-size:4.6rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h1{font-size:2.8rem;}}.css-1ywavxh h2{margin:0.5em 0 0.2em 0;font-size:3.6rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h2{font-size:2.6rem;}}.css-1ywavxh h3{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h3{font-size:2.2rem;}}.css-1ywavxh h4{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h4{font-size:2.2rem;}}.css-1ywavxh h5{display:block;margin:0.5em 0;padding:1em 0 1.5em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width:1180px){.css-1ywavxh h5{max-width:1060px;}}@media (max-width:500px){.css-1ywavxh h5{padding:0 0 0.5em;font-size:2.2rem;}}.css-1ywavxh h6{margin:0.5em 0 0.2em 0;font-size:2.3rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h6{font-size:2rem;}}.css-1ywavxh table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1ywavxh table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 0 center,radial-gradient(ellipse at right,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 100% center;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1ywavxh table td:first-child{background-image:linear-gradient( to right,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-size:20px 100%;background-repeat:no-repeat;}.css-1ywavxh table td:last-child{background-image:linear-gradient( to left,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat;}.css-1ywavxh table th{color:#15171A;font-size:1.2rem;font-weight:700;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1ywavxh table th,.css-1ywavxh table td{padding:6px 12px;border:#e9ebec 1px solid;}@media (max-width:500px){.css-1ywavxh{padding:0;}.css-1ywavxh:before{display:none;}.css-1ywavxh:after{display:none;}}</style><section class="post-full-content css-1ywavxh eeqhoro0"><div><p>J’ai récemment commencé à utiliser OpenVPN et à profiter des différentes options qu’il propose, notamment le masquage du trafic VPN sous TCP:443 (autrement appelé HTTPS). Personnellement, j’aime utiliser GCE pour héberger mes VPN, car je profite de la puissance et de la personnalisation que cela procure.</p>
<p>Cependant, il n’y avait absolument aucun tutoriel sur la configuration d’OpenVPN sur GCE. Il existe 10 étapes dans ce didacticiel, mais chaque étape peut exécuter plusieurs lignes de code.</p>
<p>Si vous essayez simplement d’ajouter plus de clients, passer aux étapes 4, 9 et 10.</p>
<h2>Table des matières</h2>
<p>[[toc]]</p>
<h2>1. Création de l’instance</h2>
<p>Nous voulons utiliser une instance <code>n1-standard-1</code> pour sa durabilité et son coût. Dirigez-vous vers le moteur de calcul et cliquez sur “CREATE INSTANCE”.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:450px">
      <a class="gatsby-resp-image-link" href="/static/bc1d8c0fe43fbdbd290421761c57cb77/13283/1.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:139.33333333333334%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAIAAADuuAg3AAAACXBIWXMAAAsSAAALEgHS3X78AAACjUlEQVQ4y41Uh3KjMBDV///cZeZcEhfsuFJtBAihyj1JPkJsp7zBO2vBtrfaJZvNZrVaLZdLSqkxRkqplJIeXdfhxHr0Iwx/SFmWRVFcPWBfegS9rms4cl+P4G3dA7/EWkPpNUliKDhCVK01DCDhIs/z8/kMdyGU0jajMr7IhruPiZDqQtvi2jStbLmsG8F5JzoHRG6apvYQwp25orQVyoZqiBA6p/pS60ulKXOSMY7EK49gDwUShTDGhspD2vbGgjXWaGu1J+k/N4CP4iP1/t8NqIugqsPhAK+h1A9KRyQPPN3RTtq2RZ92u12SJO/v76Bnv9+fPKDjHLKoVFYqyP4zCOfcFcaYUhqNQfwgAeQWdCSu/XNvjIAIQssCBfdfY9zqoWwCr43s16mlTB2Pe/gCBTsPKHuPNE0f3TljpJVVZpPqkpkiz1DBECdkHm7oc2N8AOOisZ00uOJRtAmRERCvH23AAnjdbre4M8QNg3KWSn80cCDsETgPMwMvBJ1AaSgVShzHaDv4v2PoKxBcD6QBs+PxCBdo+zCGd9w+AndbRFG0WCxms9l6vQ71oGz4ClclZHgHZAdDIoWoKoyum54QNtwTQHh8F7lu+GQevb29TqdTbJUsyzBAoRNPO3TXZ3M4pS8vf2bz+WQy+euBzNEqEPGDMX5tyy4e2BiQ2EoD4T8Yj+fulyR/zDPiIL1xh4Zqx46e9xmrb7t1PGHdIe2wfahHUCDxCr0IuzXQeRtJ1naRW91rbO/X+WsgKWzvW88g9SeMjLnK0iTPEriO4xMGq/810Cpb1Lao7LU2VdtD5tRtnItbPRLbp2w0ZF6pJ5sER22nWae5MJ0wvDNOkXgsF3hlhDTcP+ahc/8AbrFWxxhIqn8AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/bc1d8c0fe43fbdbd290421761c57cb77/8ffb1/1.webp 293w, /static/bc1d8c0fe43fbdbd290421761c57cb77/2809e/1.webp 450w" sizes="(max-width: 450px) 100vw, 450px" type="image/webp"/>
        <source srcSet="/static/bc1d8c0fe43fbdbd290421761c57cb77/f93ee/1.png 293w, /static/bc1d8c0fe43fbdbd290421761c57cb77/13283/1.png 450w" sizes="(max-width: 450px) 100vw, 450px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/bc1d8c0fe43fbdbd290421761c57cb77/13283/1.png" alt="1" title="1" loading="lazy"/>
      </picture>
  </a>
    </span></p>
<p>Configurez-le avec les options affichées, mais n’appuyez pas encore sur “Créer”</p>
<p>Si vous ne voyez pas l’image, nous utilisons une instance <code>n1-standard-1</code> (1 vCPU, 3,75 Go de mémoire) avec Ubuntu 16.04 LTS installé (vous pouvez choisir un espace de stockage, mais 10 Go suffisent). Puisque notre VPN utilisera TCP: 443, nous devons autoriser le trafic HTTPS maintenant ou plus tard. Vous pouvez donc également le faire immédiatement.</p>
<p>Appuyez sur le bouton “Gestion, sécurité, disques, réseau, …” pour ouvrir les options avancées. Cliquez sur l’onglet Réseau et cliquez sur le bouton d’édition en regard de l’interface réseau sélectionnée.</p>
<p>Cliquez sur le menu déroulant “Adresse IP externe” et sélectionnez “Créer une adresse IP”. Entrez un nom, puis appuyez sur “Réserver”. Cette opération associera une adresse IP statique à votre instance, ce qui est probablement ce que vous voulez, sauf si vous souhaitez régénérer les fichiers de configuration de quelque temps. En ce qui concerne les frais, Google ne facture pas les adresses IP statiques pendant leur utilisation. La machine <code>n1-standard-1</code> ne devrait pas vous coûter plus de 30 $ par mois. Certes, cela coûte un peu plus cher que la plupart des services VPN, mais la plupart des services VPN ne vous donnent pas un contrôle total :)</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:467px">
      <a class="gatsby-resp-image-link" href="/static/73eb40d4f0bb7c23d2790b3c426d1575/70a92/2.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:121.84154175588866%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsSAAALEgHS3X78AAAB1UlEQVQ4y5VUy47TMBT1zwE7FgiEWIOQALFkPWyQGDTLEa8VX8DHdAWVyqR5x06TJnEcv+JyOq7YMXGPnKsq9fU9957jkMufzYvr6vXX6s03+uoLfX5dhayXn+nb74y8+8GefCqfXpXProrHl/mD9+n9i4V17yJ9+CF79DEnwziVrN3teT8qIa3Uc8iatBsnTeQ0rX//urn5o7U6uNmFLWu0NYZYa7uua9vWOWeM0SYI0zQppYiUklLKGNvv9zjoEAxsJlrrKIrW63VxizRNd7vdPM94v1wZm/q+B/NhGBA55+Bil+CPIOM4RtttFG03m00cx03TGmPdEkDtmIzKtCqLIisRijxLk7ZtjpO7E0KII21wEOowCDeIuR9txyGjCx0YivBRNp3ouJLKcTFrEzxtEIjjbZomjFEYRisJt4T2jIfVdVGUjNWwSl3XFaX/5vk/nHrGGRAtyzJYpaoqiAy1kHx35RNtJOMY+ASZkM3r7P9e7hlbkZYkSZ7n0OA8e4K6rwkgGUQWG8aGkz3x4EqgPpLhU0S8CbEnKnmp4tVqhVjeAvnnmIRzXCZEbz3PPKQ48T140UEYcQ7D6WJgYGgbCuMH3p73MUDbGBgGiG49ixAg8S/mDk08LO0x+gAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/73eb40d4f0bb7c23d2790b3c426d1575/8ffb1/2.webp 293w, /static/73eb40d4f0bb7c23d2790b3c426d1575/d57f5/2.webp 467w" sizes="(max-width: 467px) 100vw, 467px" type="image/webp"/>
        <source srcSet="/static/73eb40d4f0bb7c23d2790b3c426d1575/f93ee/2.png 293w, /static/73eb40d4f0bb7c23d2790b3c426d1575/70a92/2.png 467w" sizes="(max-width: 467px) 100vw, 467px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/73eb40d4f0bb7c23d2790b3c426d1575/70a92/2.png" alt="2" title="2" loading="lazy"/>
      </picture>
  </a>
    </span></p>
<p>Vos interfaces réseau doivent ressembler à l’image. <strong>Veillez à activer le transfert IP</strong>, car cela ne peut plus être modifié après la création de l’instance.</p>
<p>En règle générale, vous souhaiterez probablement garder votre adresse IP externe secrète. Cela ne me dérange pas de rendre celui-ci public, car cette instance n’existera pas lorsque vous lirez ce tutoriel, et l’adresse IP appartiendra probablement à quelqu’un d’autre.</p>
<p>Appuyez sur “Terminé” et “Créer”. Une fois l’instance prête (un bouton “SSH” noir apparaîtra), cliquez ou double-cliquez sur le bonton “SSH” pour ouvrir une fenêtre SSH. Le reste de la configuration se fera sur cette machine, que nous appellerons le “server”.</p>
<h2>2. Installation OpenVPN et EasyRSA</h2>
<p>OpenVPN est (évidemment) le serveur VPN que nous utilisons, et EasyRSA est un paquet qui nous permettra de configurer une autorité de certification interne à utiliser.</p>
<p>Bien que ce ne soit généralement pas le cas, pour cette configuration, il est souvent nécessaire de lancer une mise à jour d’apt pour pouvoir installer un ou les deux packages. Les deux d’entre eux sont dans les dépôts par défaut d’Ubuntu.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> openvpn easy-rsa</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Temps de configurer.</p>
<h2>3. Mise en place du CA</h2>
<p>Comme OpenVPN utilise TLS/SSL, il a besoin de certificats pour chiffrer le trafic. Pour cela, nous devrons émettre nos propres certificats de confiance, ce que nous pouvons faire à l’aide de la CA que nous sommes sur le point de configurer.</p>
<p>Commençons par copier le <code>easy-rsa</code> de modèles du paquet <code>easy-rsa</code>.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash">make-cadir ~/openvpn-ca
<span class="token builtin class-name">cd</span> ~/openvpn-ca</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Il y a des valeurs que nous pouvons vouloir éditer, alors allons-y et <code>nano vars</code>. Si vous voulez utiliser vim, continuez, mais puisque j’essaie de garder mes tutoriels aussi simples que possible, j’utilise nano.</p>
<blockquote>
<p>À partir de ce moment, s’il y a une partie d’une commande qui dépend d’une valeur que vous choisissez, elle sera en gras. Tout le code qui n’est pas généré par un utilisateur sera en italique.</p>
</blockquote>
<p>Faites défiler vers le bas du fichier (ce n’est pas trop long) et vous devriez trouver ce qui suit:</p>
<div class="language-text extra-class">
<pre class="language-text code">export KEY_COUNTRY=&quot;<b>US</b>&quot;
export KEY_PROVINCE=&quot;<b>CA</b>&quot;
export KEY_CITY=&quot;<b>SanFrancisco</b>&quot;
export KEY_ORG=&quot;<b>Fort-Funston</b>&quot;
export KEY_EMAIL=&quot;<b>me@myhost.mydomain</b>&quot;
export KEY_OU=&quot;<b>MyOrganizationalUnit</b>&quot;
</pre>
</div>
<p>Éditez autant d’entre eux (ou aucun d’eux) que vous le souhaitez. Juste en dessous de ces valeurs devrait être <code>export KEY_NAME=&quot;EasyRSA&quot;</code>. Pour simplifier notre configuration, nous allons modifier cette ligne comme suit:</p>
<div class="language-text extra-class">
<pre class="language-text code">export KEY_NAME=&quot;<b>server</b>&quot;
</pre>
</div>
<p>Enregistrez et fermez le fichier (ctrl + x, y, entrez). Les variables que nous venons de modifier seront utilisées pour le processus de signature de notre autorité de certification. Toujours dans le <code>openvpn-ca</code>, exécutez la commande suivante:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token builtin class-name">source</span> vars</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Si vous avez bien fait, le re <code>NOTE: If you run ./clean-all, I will be doing a rm -rf on /home/<b>username</b>/openvpn-ca/keys</code>. C’est ce que nous voulons. Pour assurer un environnement de travail propre, nous allons lancer <code>./clean-all</code>.</p>
<p>Maintenant, construisons le CA</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash">./build-ca</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Toutes les variables que nous avons déjà définies doivent se renseigner elles-mêmes. Il suffit donc d’y accéder en appuyant plusieurs fois sur Entrée. À la fin, vous aurez une autorité de certification prête à commencer à signer.</p>
<p>Nous avons également besoin d’un certificat de serveur et d’une clé de cryptage pour garantir la sécurité de notre trafic.</p>
<p>Créons notre certificat de serveur et notre clé.</p>
<div class="language-bash extra-class">
<pre class="language-bash code">./build-key-server <b>server</b>
</pre>
</div>
<p>Passer à nouveau les invites de commande. Nous n’entrerons pas un mot de passe, cette fois. Les deux dernières invites vous obligent à entrer <code>y</code> pour signer le certificat. Assurez-vous de ne pas les ignorer!</p>
<p>Comme indiqué précédemment, nous avons également besoin d’une clé de chiffrement. Pour les besoins de ce didacticiel, nous allons générer une clé Diffie-Hellman, qui a tendance à être plutôt forte. Bien sûr, une grande [force] entraîne une grande [inefficacité]. Par conséquent, quelle que soit votre système, la commande suivante prendra probablement quelques minutes.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash">./build-dh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Nous renforcerons cela avec une signature HMAC, afin de nous assurer que la vérification de l’intégrité TLS est plus sûre.</p>
<div class="language-bash extra-class">
<pre class="language-bash code">openvpn --genkey --secret keys/<b>tiv</b>.key
</pre>
</div>
<h2>4. Générer un certificat client</h2>
<p>Naturellement, si vous allez utiliser une autorité de certification, votre client doit également disposer d’un certificat. Bien que vous puissiez le faire sur votre ordinateur client et que le serveur le signe, nous essayons de garder les choses simples et hébergées sur un seul ordinateur.</p>
<blockquote>
<p>Si vous avez plusieurs clients, vous pouvez suivre cette étape plusieurs fois. Assurez-vous simplement de rendre vos noms de client uniques.</p>
</blockquote>
<p>Assurez-vous que vous êtes dans le <code>openvpn-ca</code> et que votre fichier vars est synchronisé.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/openvpn-ca
<span class="token builtin class-name">source</span> vars</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Maintenant, nous allons construire une clé client en tant que telle:</p>
<div class="language-bash extra-class">
<pre class="language-bash code">./build-key <b>client</b>
</pre>
</div>
<p>Une fois de plus, tout doit être pré-rempli. Passez donc tous les éléments, sauf les deux dernières invites, qui vous demanderont de signer en entrant <code>y</code>.</p>
<h2>5. Configurer le serveur OpenVPN</h2>
<p>OpenVPN s’installe sous le répertoire <code>/etc/openvpn</code>. Pour que tout fonctionne, nous devons déplacer certains fichiers dans ce dossier.</p>
<div class="language-bash extra-class">
<pre class="language-bash code">cd ~/openvpn-ca/keys
sudo cp ca.crt server.crt server.key <b>tiv</b>.key dh2048.pem /etc/openvpn
</pre>
</div>
<p>Par défaut, OpenVPN est fourni avec un exemple de configuration. Par souci de simplicité, nous simplifierons la décompression dans notre dossier de configuration.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">gunzip -c /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz | sudo tee /etc/openvpn/server.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Ensuite, nous allons éditer le fichier de configuration:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/openvpn/server.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>La première étape consiste à trouver la directive <code>tls-auth</code>. Il y aura un point-virgule (<code>;</code>) à côté de la directive, que nous supprimerons. En dessous, nous ajouterons une ligne.</p>
<div class="language-text extra-class">
<pre class="language-text code">tls-auth <b>tiv</b>.key 0 # This file is secret
key-direction 0
</pre>
</div>
<p>Nous devons également chiffrer notre serveur, éditons donc les directives de chiffrement juste en dessous de cette section. Plus précisément, nous décommentons la ligne AES-128-CBC et ajouterons une directive <code>auth</code>.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">cipher AES-128-CBC
auth SHA256</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Ensuite, les paramètres d’utilisateur et de groupe:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">user nobody
group nogroup</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Facultativement, nous pourrions opter pour l’envoi de tout le trafic via le VPN. Pour cela, recherchez la directive <code>redirect-gateway</code> et décommentez-la.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">push &quot;redirect-gateway def1 bypass-dhcp&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Juste en dessous, il devrait y avoir quelques lignes d’<code>dhcp-option</code>. Décommentez ceux-là aussi.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">push &quot;dhcp-option DNS 208.67.222.222&quot;
push &quot;dhcp-option DNS 208.67.220.220&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Optionnellement, nous pouvons vouloir changer le port et le protocole sur lesquels OpenVPN fonctionne. La valeur par défaut est UDP: 1194, mais si votre réseau bloque les connexions VPN, ce sera probablement l’une des victimes. Le déguisement serait d’utiliser TCP: 443, qui est le port HTTPS.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">port 443

proto tcp
;proto udp</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div>
<p>Si vous n’avez pas utilisé «serveur» comme nom de serveur, vos fichiers <code>crt</code> ont un nom différent. Mettez-les à jour en conséquence.</p>
<div class="language-text extra-class">
<pre class="language-text code">cert <b>server</b>.crt
key <b>server</b>.key
</pre>
</div>
<p>Enregistrez et fermez le fichier.</p>
<h2>6. Préparer Ubuntu</h2>
<p>Bien que nous ayons déjà configuré le transfert IP, etc., nous devons apporter quelques modifications pour activer ces options.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/sysctl.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Recherchez la ligne suivante et supprimez le # (caractère de commentaire).</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">net.ipv4.ip_forward=1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Sauver et fermer. Pour mettre à jour les paramètres de session, exécutez:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> sysctl -p</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Ensuite, nous devons trouver et mettre à jour nos règles de pare-feu (UFW) pour masquer les clients. La première étape consiste à trouver l’interface sur laquelle nous fonctionnons:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ip route | grep default</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>L’interface que nous voulons est celle qui contient le mot “dev”. Dans notre cas, cela ressemble à ceci:</p>
<div class="language-text extra-class">
<pre class="language-text code">default via 10.138.0.1 dev <b>ens4</b>
</pre>
</div>
<p>Donc, notre interface est <code>ens4</code>. Avec cela, nous mettrons à jour nos règles de pare-feu:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/ufw/before.rules</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Au-dessus, là où il est indiqué <code>Don&#x27;t delete these required lines...</code> ajoutez le code suivant:</p>
<div class="language-text extra-class">
<pre class="language-text code"># OPENVPN
# NAT Table
*nat
:POSTROUTING ACCEPT [0:0] 
# OpenVPN client traffic
-A POSTROUTING -s 10.8.0.0/8 -o <b>ens4</b> -j MASQUERADE
COMMIT
# OPENVPN
</pre>
</div>
<p>Sauver et fermer. Ensuite, nous devons transférer les paquets.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/default/ufw</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Recherchez la directive <code>DEFAULT_FORWARD_POLICY</code> et remplacez-la de <code>&quot;DROP&quot;</code> par <code>&quot;ACCEPT&quot;</code>.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">DEFAULT_FORWARD_POLICY=&quot;ACCEPT&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Sauver et fermer.</p>
<h2>7. Lancer OpenVPN</h2>
<p>Pour démarrer le serveur, exécutez ce qui suit:</p>
<div class="language-bash extra-class">
<pre class="language-bash code">sudo systemctl start openvpn@<b>server</b>
</pre>
</div>
<p>Pour vérifier qu’il a bien démarré, lancez:</p>
<div class="language-bash extra-class">
<pre class="language-bash code">sudo systemctl status openvpn@<b>server</b>
</pre>
</div>
<p>Si tout se passe bien, vous devriez voir une sortie incluant <code>Active: active (running)</code>. Vous devrez peut-être <code>q</code> sur <code>q</code> pour quitter le panneau d’informations. Si cela vous convient, liez le service à la séquence de démarrage.</p>
<div class="language-bash extra-class">
<pre class="language-bash code">sudo systemctl enable openvpn@<b>server</b>
</pre>
</div>
<h2>8. Configuration d’une structure de configuration client</h2>
<p>Pour faciliter la configuration des configurations client, nous allons d’abord créer une structure. Pour commencer, créez un dossier de configuration pour stocker les fichiers de configuration du client.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">mkdir</span> -p ~/clients/files</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Les clés du client seront dans ces configurations, alors verrouillons les permissions sur le répertoire <code>files</code>.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">700</span> ~/clients/files</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Copiez l’exemple de configuration.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">cp</span> /usr/share/doc/openvpn/examples/sample-config-files/client.conf ~/clients/base.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Éditons le fichier:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">nano</span> ~/clients/base.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Trouvez la directive <code>remote</code>. Remplacez <code>my-server-1</code> par l’adresse IP externe publique attribuée à votre instance GCE. Si vous avez choisi un port autre que 1194, mettez-le à jour en conséquence.</p>
<div class="language-text extra-class">
<pre class="language-text code">remote <b>35.197.111.236 443</b>
</pre>
</div>
<p>Mettez également à jour votre protocole.</p>
<div class="language-text extra-class">
<pre class="language-text code">proto <b>tcp</b>
</pre>
</div>
<p>Décommentez l’utilisateur et le groupe:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">user nobody
group nogroup</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Trouvez les directives <code>ca</code>, <code>cert</code> et <code>key</code>, commentez-les, car nos configurations les incluront automatiquement.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text"># ca ca.crt
# cert client.crt
# key client.key</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Utilisez les mêmes paramètres de chiffrement et d’authentification que précédemment:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">cipher AES-128-CBC
auth SHA256</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Quelque part, nous devrons ajouter la <code>key-direction</code>. Assurez-vous d’utiliser 1, comme c’est le cas pour le client. 0 était pour le serveur.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">key-direction 1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Si votre configuration client actuelle est (ou sera) utilisée sur un périphérique Linux, ajoutez les éléments suivants:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">script-security 2
up /etc/openvpn/update-resolv-conf
down /etc/openvpn/update-resolv-conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Notez que si vous les incluez dans un environnement non-Linux (Android et macOS inclus dans un non-Linux), vos clients peuvent se comporter de manière étrange.</p>
<p>Sauver et fermer. Ensuite, nous devons écrire un script pour générer nos configs client rapidement et facilement.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">nano</span> ~/clients/gen_config.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>A l’intérieur, collez ce code:</p>
<pre class="language-text code">#!/bin/bash

# First argument: Client identifier

KEY_DIR=~/openvpn-ca/keys
OUTPUT_DIR=~/clients/files
BASE_CONFIG=~/clients/base.conf

cat ${BASE_CONFIG} \
    &lt;(echo -e &#x27;&lt;ca&gt;&#x27;) \
    ${KEY_DIR}/ca.crt \
    &lt;(echo -e &#x27;&lt;/ca&gt;\n&lt;cert&gt;&#x27;) \
    ${KEY_DIR}/${1}.crt \
    &lt;(echo -e &#x27;&lt;/cert&gt;\n&lt;key&gt;&#x27;) \
    ${KEY_DIR}/${1}.key \
    &lt;(echo -e &#x27;&lt;/key&gt;\n&lt;tls-auth&gt;&#x27;) \
    ${KEY_DIR}/<b>tiv</b>.key \
    &lt;(echo -e &#x27;&lt;/tls-auth&gt;&#x27;) \
    &gt; ${OUTPUT_DIR}/${1}.ovpn
</pre>
<p><a href="./02/gen_config.sh" download="">gen_config.sh</a></p>
<p>Le <code>{1}</code> fait ici référence au premier argument, qui sera notre nom de client. Assurez-vous de mettre à jour <strong>tiv</strong>.key fonction du nom de votre clé HMAC.</p>
<p>Autoriser l’exécution de ce script:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">700</span> ~/clients/gen_config.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<h2>9. Générer des configurations client</h2>
<p>Le pas que vous attendiez tous est enfin arrivé. Nous allons générer nos configurations client.</p>
<div class="language-bash extra-class">
<pre class="language-bash code">cd ~/clients
./gen_config.sh <b>client</b>
</pre>
</div>
<p>Vérifiez que cela a fonctionné en exécutant:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">ls</span> ~/clients/files</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Si tel est le cas, il devrait maintenant y avoir un fichier <code><b>client</b>.ovpn</code> dans ce répertoire. Nous devons télécharger ce fichier et le transférer sur nos appareils. Pour ce faire, cliquez sur l’icône représentant une roue en haut à droite de la session SSH, puis sélectionnez «Télécharger le fichier».</p>
<p>Le chemin pleinement qualifié devrait ressembler à ceci:</p>
<div class="language-text extra-class">
<pre class="language-text code">/home/<b>username</b>/clients/files/<b>client</b>.ovpn
</pre>
</div>
<h2>10. Installation sur les clients</h2>
<p>Pour Windows, téléchargez l’application client <a href="https://openvpn.net/index.php/open-source/downloads.html" target="_blank" rel="nofollow noopener noreferrer">OpenVPN</a>. Une fois installé, déplacez votre fichier <code><b>client</b>.ovpn</code> vers <code>C:\Program Files\OpenVPN\config</code>. Pour ouvrir OpenVPN, vous devez exécuter l’application en tant qu’administrateur. Une fois à l’intérieur, vous devriez voir et pouvoir vous connecter à votre VPN.</p>
<p>Pour macOS, la plupart des gens suggèrent d’utiliser <a href="https://tunnelblick.net/" target="_blank" rel="nofollow noopener noreferrer">Tunnelblick</a> bien que tout autre client OpenVPN (même s’il soit sans danger) soit probablement bon aussi. Une fois installé, vous devriez pouvoir faire glisser n’importe .ovpn fichier <code>.ovpn</code> sur l’icône Tunnelblick de la barre de menus pour installer la configuration. Utilisez la barre de menus pour vous connecter ensuite au VPN. Si vous êtes interrogé sur le plugin <code>down-root.so</code>, prenez une décision! Je l’ai sauté parce que je suis capable de reconnecter ma connexion, mais c’est à vous de décider.</p>
<p>Sous Linux, installez le paquet <code>openvpn</code> en utilisant votre gestionnaire de paquets. Les utilisateurs de CentOS devront d’abord installer <code>epel-release</code> utilisant <code>yum</code>. Une fois installé, lancez <code>ls /etc/openvpn</code>. Si la sortie <strong>ne</strong> présente <strong>pas</strong> de fichier <code>update-resolve-conf</code>, vous devez modifier votre fichier <code>.ovpn</code> et supprimer les lignes suivantes (si vous les avez ajoutées):</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">script-security 2
up /etc/openvpn/update-resolv-conf
down /etc/openvpn/update-resolv-conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Si vous n’avez jamais ajouté ces lignes mais trouvé un fichier <code>update-resolv-conf</code>, ajoutez-les! Les utilisateurs de CentOS devront modifier le <code>group</code> dans le fichier <code>.ovpn</code> de <code>nogroup</code> à <code>nobody</code> pour se conformer aux normes du système d’exploitation.</p>
<p>Pour vous connecter, lancez <code>sudo openvpn — config client .ovpn</code>.</p>
<p>Pour iOS, installez l’application <a href="https://itunes.apple.com/us/app/id590379981" target="_blank" rel="nofollow noopener noreferrer">OpenVPN Connect</a>. Ensuite, ouvrez iTunes sur votre ordinateur et accédez à iPhone&gt; Applications. Faites défiler jusqu’à la section «Partage de fichiers» et sélectionnez “OpenVPN”. Faites glisser votre fichier <code>.ovpn</code> dans le panneau “OpenVPN Documents”. Ouvrir l’application sur votre téléphone devrait maintenant afficher un message indiquant qu’un nouveau profil est prêt à être importé. Une fois importé, vous devriez pouvoir vous connecter au VPN.</p>
<p>Pour Android, installez l’application <a href="https://play.google.com/store/apps/details?id=net.openvpn.openvpn" target="_blank" rel="nofollow noopener noreferrer">OpenVPN Connect</a>. Ensuite, transférez votre fichier <code>.ovpn</code> n’importe où / de toute façon sur votre appareil (je viens d’utiliser Google Drive, mais cela peut ne pas être recommandé). Dans l’application, ouvrez le menu et cliquez sur “Importer”. Accédez à votre fichier <code>.ovpn</code> , cliquez dessus, puis appuyez sur “IMPORT” en haut à droite. Une fois terminé, vous devriez pouvoir vous connecter au VPN.</p>
<h2>Test du VPN</h2>
<p>Le moyen le plus simple de tester votre VPN serait de Google “quelle est mon adresse IP” avant et après la connexion. Votre adresse IP doit passer à l’adresse IP publique externe de votre instance GCE une fois que vous êtes connecté au VPN, puis à l’adresse IP de votre réseau une fois déconnectée du VPN.</p>
<p>Si tout s’est bien passé, c’est tout! Votre nouveau VPN est prêt à être utilisé.</p>
<h2>Crédits</h2>
<p>Cet article est basé en grande partie sur <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-openvpn-server-on-ubuntu-16-04" target="_blank" rel="nofollow noopener noreferrer">ce didacticiel de la communauté DigitalOcean</a>. Bien que la configuration elle-même soit assez similaire, j’ai pensé écrire un article séparé, car il existe quelques éléments clés différents dans GCE et il est assez facile de se tromper si vous le faites pour la première fois (je parle par expérience).</p>
<style lang="scss">
.content pre.code, 
.content pre[class*=&quot;language-&quot;].code {
  /* font-size: 10pt; */
  font-size: 0.85em;
  font-family: source-code-pro, Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;
  color: #fff;

  b {
    color: yellow;
    /* text-decoration:underline; */
    /* background-color: green; */
  }
}
</style></div><br/></section><style data-emotion-css="1a0mcpy">.css-1a0mcpy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 auto;padding:3vw 0 6vw 0;max-width:840px;}</style><footer class="css-1a0mcpy e7i2g8t0"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><section class="css-k008qs ejg85v20"><style data-emotion-css="2785xc">.css-2785xc{display:block;background:#e4eaed;border-radius:100%;object-fit:cover;margin-right:15px;width:60px;height:60px;}</style><img src="/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png" alt="ludo" class="css-2785xc"/><style data-emotion-css="fz4w57">.css-fz4w57 p{margin:0;color:#738a94;line-height:1.3em;}</style><section class="css-fz4w57 ejg85v22"><style data-emotion-css="1eii8n9">.css-1eii8n9{margin:8px 0 2px 0;padding:0;font-size:2rem;}.css-1eii8n9 a{color:#15171A;font-weight:700;}.css-1eii8n9 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h4 class="css-1eii8n9 ejg85v21"><a href="/author/ludo/">Wyffels Ludovic<!-- --> - @<!-- -->ludo</a></h4><p>Développeur senior. Fullstack + DevOps</p></section></section><style data-emotion-css="1zye22">.css-1zye22{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;}</style><div class="css-1zye22 efp23gn0"><style data-emotion-css="1hp0auc">.css-1hp0auc{display:block;padding:9px 16px;border:#adbac0 1px solid;color:#738a94;font-size:1.2rem;line-height:1;font-weight:500;border-radius:20px;-webkit-transition:all ease 0.2s;transition:all ease 0.2s;}.css-1hp0auc:hover{border-color:#3eb0ef;color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1hp0auc" href="/author/ludo/">Read More</a></div></footer></article></div></main><style data-emotion-css="1x0l29j">.css-1x0l29j{position:relative;padding:0 4vw;}</style><aside class="read-next css-1x0l29j"><div class="css-s2cjas"><style data-emotion-css="12kejdt">.css-12kejdt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0 0;}</style><div class="css-12kejdt e1jujlwv6"><style data-emotion-css="1jtzifo">.css-1jtzifo{position:relative;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171A center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;background-image:url(/static/9fb9647467dab072b9ebe36e9e52ae95/883ab/blog-cover.jpg);}.css-1jtzifo:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,0.8) 0%,rgba(0,20,40,0.7) 100%);border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);}</style><article class="css-1jtzifo ebc4v1c0"><style data-emotion-css="1d05jhl">.css-1d05jhl{position:relative;z-index:50;padding-top:20px;text-align:center;}</style><header class="css-1d05jhl ebc4v1c1"><style data-emotion-css="qbcumt">.css-qbcumt{display:block;font-size:1.3rem;line-height:1.3em;opacity:0.8;}</style><small class="css-qbcumt ebc4v1c2">— <!-- -->Code avec Ludo<!-- --> —</small><style data-emotion-css="y0gtj6">.css-y0gtj6{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}.css-y0gtj6 a{color:#fff;font-weight:300;-webkit-text-decoration:none;text-decoration:none;}.css-y0gtj6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-y0gtj6 ebc4v1c3"><a href="/tags/google-cloud/">Google Cloud</a></h3></header><style data-emotion-css="1x76w68">.css-1x76w68{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:80px;}.css-1x76w68 svg{width:40px;fill:transparent;stroke:#fff;stroke-width:0.5px;stroke-opacity:0.65;}</style><div class="css-1x76w68 ebc4v1c4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><style data-emotion-css="1mqgav7">.css-1mqgav7{position:relative;z-index:50;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.7rem;}.css-1mqgav7 ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none;}.css-1mqgav7 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}.css-1mqgav7 li a{display:block;padding:20px 0;border-bottom:rgba(255,255,255,0.3) 1px solid;color:#fff;font-weight:500;vertical-align:top;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;}.css-1mqgav7 li:first-of-type a{padding-top:10px;}.css-1mqgav7 li a:hover{opacity:1;}</style><div class="css-1mqgav7 ebc4v1c5"><ul><li><a aria-current="page" class="" href="/openvpn-google/">Configuration d&#x27;un serveur OpenVPN sur Google Compute Engine</a></li></ul></div><style data-emotion-css="t8u9qr">.css-t8u9qr{position:relative;margin:15px 0 3px 0;text-align:center;}.css-t8u9qr a{color:#fff;}</style><footer class="css-t8u9qr ebc4v1c6"><a href="/tags/google-cloud/">1 post<!-- --> →</a></footer></article><style data-emotion-css="1eugmea">.css-1eugmea{-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:300px;background:#fff center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;-webkit-transition:all 0.5s ease;transition:all 0.5s ease;}.css-1eugmea:hover{box-shadow:rgba(39,44,49,0.07) 8px 28px 50px,rgba(39,44,49,0.04) 1px 6px 12px;-webkit-transition:all 0.4s ease;transition:all 0.4s ease;-webkit-transform:translate3D(0,-1px,0) scale(1.02);-ms-transform:translate3D(0,-1px,0) scale(1.02);transform:translate3D(0,-1px,0) scale(1.02);}</style><article class="post-card  css-1eugmea"><style data-emotion-css="kufnxr">.css-kufnxr{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}</style><a class="post-card-image-link css-kufnxr" href="/js-map-filter-reduce/"><style data-emotion-css="8kte6t">.css-8kte6t{width:auto;height:200px;background:#c5d2d9 no-repeat center center;background-size:cover;}</style><div class="post-card-image css-8kte6t e4vx1ao0"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:56.25%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQoz2P4cNufbMRAV83vb4EQyZo/3/P/dNf/28OAr/cDIPoZiLQNqPPeaZ9nl3zP7fW6fNDr872A90RqfnvD/8/TwHmTnfpb7VMTLPasdfv2AGQ5sZr/vw2eM8lx8XTn6b2OM/ocifUz0AagVzcsds3LsFq3wGViu0N6kuWLK35AQQYigwroz5M7PN/e9Duwwf3WcR+Qn4l0NjBsgJ78/jDg4x3/n48CvpAU2sjRixzPABStw4O6JhVqAAAAAElFTkSuQmCC" alt="Map, filter, reduce cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/f10109a249e0ae09b060bb7269f1f4be/4c9af/js.png 930w,
/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" /><img loading="lazy" sizes="(max-width: 1600px) 100vw, 1600px" srcset="/static/f10109a249e0ae09b060bb7269f1f4be/4c9af/js.png 930w,
/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png 1600w" src="/static/f10109a249e0ae09b060bb7269f1f4be/9ecf6/js.png" alt="Map, filter, reduce cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion-css="123mfn9">.css-123mfn9{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="post-card-content css-123mfn9 e4vx1ao1"><style data-emotion-css="t0tfly">.css-t0tfly{position:relative;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:block;padding:25px 25px 0;color:#15171A;}.css-t0tfly:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-t0tfly" href="/js-map-filter-reduce/"><header class="post-card-header"><style data-emotion-css="z4f0wj">.css-z4f0wj{display:block;margin-bottom:4px;color:#738a94;font-size:1.2rem;line-height:1.15em;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-z4f0wj e4vx1ao2">Javascript</span><style data-emotion-css="8kn4zf">.css-8kn4zf{margin-top:0;}</style><h2 class="css-8kn4zf e4vx1ao3">Map, filter, reduce</h2></header><style data-emotion-css="1pcdrot">.css-1pcdrot{font-family:Georgia,serif;}</style><section class="css-1pcdrot e4vx1ao4"><p> <!-- -->Ces trois fonctions sont utiles pour parcourir une liste (ou un tableau) et effectuer une sorte de transformation ou de calcul.</p></section></a><style data-emotion-css="1uyhyqd">.css-1uyhyqd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:0 25px 25px;}</style><footer class="post-card-meta css-1uyhyqd e4vx1ao5"><style data-emotion-css="rv6jj5">.css-rv6jj5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap-reverse;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;margin:0;padding:0;list-style:none;}</style><ul class="css-rv6jj5 e4vx1ao6"></ul><style data-emotion-css="zb10i8">.css-zb10i8{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;color:#738a94;font-size:1.2rem;line-height:33px;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-zb10i8 e4vx1ao7">7<!-- --> min read</span></footer></div></article><article class="post-card  css-1eugmea"><a class="post-card-image-link css-kufnxr" href="/sql-principes/"><div class="post-card-image css-8kte6t e4vx1ao0"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:56.25%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQoz2P4jwT+/fsHJB8/ftw9Z/WMFdsmL9nYPW9d66zVs1ds/vL5E1wBHDD8Rwd/ZyzbqJXYF9uxyrlktnZSf3THGuf8SYeOngDJ/f2LV/O/39OWbTbOmJTRtyarf5117tTSmdvSOpedPH2WgGaI3K4DRywzJwQ1LAuuX2yfPz2uc3XfvNWfPrwj4GyI3LMnj/xLJsbXzWxfuE03eUJ8+4rJsxddvXqFsLP/AvX/+3fg8LHV6zctWLVJP21iYuPsM2dOv/vwgZgAg7gfpOjS5atGyd1N05f///8bqzJ0zdevX799+/bTp08fPHj45MnTRctXHz194cHLDzcevfqD6mYsmk+fPr1v377169dv27Zt69ZtO7dvPXb28pErD7ccu/bq/ReQy/E7+/fv38CA+f79+7Nnz/6BAdDOn7/+ELYZovo/cQAAExNKPTC47rUAAAAASUVORK5CYII=" alt="Principales commandes SQL/PostgreSQL que vous avez besoin de connaître cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/769fd2188f26939bc5770b83a10e20f3/4c9af/postgres.png 930w,
/static/769fd2188f26939bc5770b83a10e20f3/9ecf6/postgres.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" /><img loading="lazy" sizes="(max-width: 1600px) 100vw, 1600px" srcset="/static/769fd2188f26939bc5770b83a10e20f3/4c9af/postgres.png 930w,
/static/769fd2188f26939bc5770b83a10e20f3/9ecf6/postgres.png 1600w" src="/static/769fd2188f26939bc5770b83a10e20f3/9ecf6/postgres.png" alt="Principales commandes SQL/PostgreSQL que vous avez besoin de connaître cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-123mfn9 e4vx1ao1"><a class="post-card-content-link css-t0tfly" href="/sql-principes/"><header class="post-card-header"><span class="css-z4f0wj e4vx1ao2">SQL</span><h2 class="css-8kn4zf e4vx1ao3">Principales commandes SQL/PostgreSQL que vous avez besoin de connaître</h2></header><section class="css-1pcdrot e4vx1ao4"><p> </p></section></a><footer class="post-card-meta css-1uyhyqd e4vx1ao5"><ul class="css-rv6jj5 e4vx1ao6"></ul><span class="css-zb10i8 e4vx1ao7">17<!-- --> min read</span></footer></div></article></div></div></aside><style data-emotion-css="ls7udo">.css-ls7udo{position:relative;padding:0 4vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-ls7udo"><style data-emotion-css="t78pr">.css-t78pr{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255,255,255,0.7);font-size:1.3rem;}.css-t78pr a{color:rgba(255,255,255,0.7);}.css-t78pr a:hover{color:rgba(255,255,255,1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width:650px){.css-t78pr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-t78pr"><section class="copyright"><a href="/">Code avec Ludo</a> © <!-- -->2019</section><style data-emotion-css="j0kq43">.css-j0kq43{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-j0kq43 a{position:relative;margin-left:20px;}.css-j0kq43 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-j0kq43 a:first-of-type:before{display:none;}@media (max-width:650px){.css-j0kq43 a:first-child{margin-left:0;}}</style><nav class="css-j0kq43 ezq0cw30"><a href="/privacy">Privacy</a><a href="/terms">Terms</a><a href="https://github.com/ludovicwyffels" target="_blank" rel="noopener noreferrer">Github</a><a href="https://gitlab.com/ludovic.wyffels" target="_blank" rel="noopener noreferrer">GitLab</a></nav></div></footer></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/openvpn-google/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d3f6cae5f31a1f98cf39.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-8de9d3a3f6669b02f668.js"],"component---src-templates-blog-tsx":["/component---src-templates-blog-tsx-cbbd58ac642353bc3c12.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-4eb7290b5f30be4939b9.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-53e9ceafd06fd14e2045.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-ba7f7cecce5c18bc0937.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-04a42297891d0ac71317.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-2394617d3e323ff50358.js"],"component---src-pages-privacy-tsx":["/component---src-pages-privacy-tsx-2da6ed2f481018e0a5f5.js"],"component---src-pages-terms-tsx":["/component---src-pages-terms-tsx-c9184a30ddc7b61c4d0f.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-8de9d3a3f6669b02f668.js" async=""></script><script src="/commons-337eaefa30ba2d857830.js" async=""></script><script src="/app-d3f6cae5f31a1f98cf39.js" async=""></script><script src="/styles-a66bae0be496036e5af8.js" async=""></script><script src="/webpack-runtime-2de1e6511d45930aad45.js" async=""></script></body></html>