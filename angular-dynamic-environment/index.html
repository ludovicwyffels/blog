<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8101c1d85ecf28c4a4f5.css">.authorCard-module--authorCardSection--3Xspq{display:flex}.authorCard-module--authorCardName--3HnMH{margin:8px 0 2px;padding:0;font-size:2rem}.authorCard-module--authorCardName--3HnMH a{color:#000;font-weight:700}.authorCard-module--authorCardName--3HnMH a:hover{text-decoration:none}.authorCard-module--authorCardContent--3jBBV p{margin:0;color:#647a83;line-height:1.3em}.siteNavLogo-module--container--2Eieh{flex-shrink:0;display:block;margin-right:24px;padding:11px 0;color:#fff;font-size:1.7rem;line-height:1em;font-weight:700;letter-spacing:-.5px}.siteNavLogo-module--container--2Eieh:hover{text-decoration:none}.siteNavLogo-module--container--2Eieh img{display:block;width:auto;height:21px}.footer-module--siteFooter--1ncU1{position:relative;padding:20px 4vw 60px;color:#fff;background:#000}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;color:hsla(0,0%,100%,.7);font-size:1.3rem}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY a{color:hsla(0,0%,100%,.7)}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY a:hover{color:#fff;text-decoration:none}@media (max-width:650px){.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY{flex-direction:column}}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav{display:flex}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a{position:relative;margin-left:20px}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:before{content:"";position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:first-of-type:before{display:none}@media (max-width:650px){.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:first-of-type{margin-left:0}}.shared-module--outer--3ayIs{position:relative;padding:0 4vw}.shared-module--inner--35I1L{margin:0 auto;max-width:1040px;width:100%}.shared-module--SiteMain--1L3AH{z-index:100;flex-grow:1}.shared-module--SiteTitle--LzNSD{z-index:10;margin:0;padding:0;font-size:3.8rem;font-weight:700}.shared-module--SiteDescription--xZ-xT{z-index:10;margin:0;padding:5px 0;font-size:2.2rem;font-weight:300;letter-spacing:.5px;opacity:.8}.shared-module--PostFeed--yxeHl{position:relative;display:flex;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0}@media (min-width:900px){.shared-module--PostFeedRaise--3lm-9{margin-top:-70px;padding-top:0}}.shared-module--SocialLink--Ya1gh{display:flex;justify-content:center;align-items:center;margin:0;padding:10px;color:#fff;opacity:.8}.shared-module--SocialLink--Ya1gh:hover{opacity:1}.shared-module--SocialLink--Ya1gh svg{height:1.8rem;fill:#fff}.shared-module--SiteHeader--11Q-_{position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#15171a no-repeat 50%;background-size:cover}.shared-module--SiteHeaderContent--EPPk3{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10vw 4vw;min-height:200px;max-height:450px;text-align:center}.shared-module--SiteHeaderStyles--2X95r{content:"";position:absolute;top:0;right:0;bottom:auto;left:0;z-index:10;display:block;height:80px;background:linear-gradient(rgba(0,0,0,.1),transparent)}.shared-module--SiteHeaderStyles--2X95r:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;display:block;background:rgba(0,0,0,.18)}.shared-module--SiteHeaderStyles--2X95r:after{content:"";position:absolute;top:0;right:0;bottom:auto;left:0;z-index:10;display:block;height:80px;background:linear-gradient(rgba(0,0,0,.1),transparent)}@media (max-width:700px){.shared-module--SiteHeaderStyles--2X95r{padding-right:0;padding-left:0}}.shared-module--AuthorProfileImage--3bfVw{display:block;background:#c5d2d9;border-radius:100%;-o-object-fit:cover;object-fit:cover;margin-right:15px;width:60px;height:60px}.sitenav-module--container--2f7Mf{position:relative;z-index:300;display:flex;justify-content:space-between;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.2rem}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavLeft--37Wnn{display:flex;align-items:center;overflow-x:auto;overflow-y:hidden;margin-right:10px;padding-bottom:80px;letter-spacing:.4px;white-space:nowrap;-webkit-overflow-scrolling:touch;-ms-overflow-scrolling:touch}@media (max-width:700px){.sitenav-module--container--2f7Mf .sitenav-module--SiteNavLeft--37Wnn{margin-right:0;padding-left:4vw}}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa{flex-shrink:0;display:flex;align-items:center;height:40px}@media (max-width:700px){.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa{display:none}}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SocialLinks--3bj4A{flex-shrink:0;display:flex;align-items:center}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SocialLinks--3bj4A a:last-of-type{padding-right:20px}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SubscribeButton--3gIQb{display:block;padding:4px 10px;border:1px solid #fff;color:#fff;font-size:1.2rem;line-height:1em;border-radius:10px;opacity:.8}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SubscribeButton--3gIQb :hover{text-decoration:none;opacity:1;cursor:pointer}@media (min-width:900px){.sitenav-module--HomeNavRaise--2C7hy{position:relative;top:-70px}}SiteNavStyles{position:relative;z-index:300;display:flex;justify-content:space-between;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.2rem}.sitenav-module--NavStyles--gmMAk{display:flex;margin:0 0 0 -12px;padding:0;list-style:none}.sitenav-module--NavStyles--gmMAk li{display:block;margin:0;padding:0;text-transform:uppercase}.sitenav-module--NavStyles--gmMAk li a{display:block;margin:0;padding:10px 12px;color:#fff;opacity:.8}.sitenav-module--NavStyles--gmMAk li a:hover{text-decoration:none;opacity:1}.postCard-module--container--3MBpY{flex:1 1 300px;display:flex;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:300px;background:#fff 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);transition:all .5s ease}.postCard-module--container--3MBpY:hover{box-shadow:8px 28px 50px rgba(39,44,49,.07),1px 6px 12px rgba(39,44,49,.04);transition:all .4s ease;transform:translate3D(0,-1px,0) scale(1.02)}.postCard-module--PostCardImageLink--1-_rO{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0}.postCard-module--PostCardImage--1ooSS{width:auto;height:200px;background:#d3d3d3 no-repeat 50%;background-size:cover}.postCard-module--PostCardContent--LjkYR{flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}.postCard-module--PostCardContentLink--37umd{position:relative;flex-grow:1;display:block;padding:25px 25px 0;color:#15171a}.postCard-module--PostCardContentLink--37umd:hover{text-decoration:none}.postCard-module--PostCardTags--jyRjj{display:block;margin-bottom:4px;color:#647a83;font-size:1.2rem;line-height:1.15em;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.postCard-module--PostCardTitle--1JrkM{margin-top:0}.postCard-module--PostCardExcerpt--3gUSF{font-family:Georgia,serif}.postCard-module--PostCardMeta--2EEJ7{display:flex;justify-content:space-between;align-items:flex-end;padding:0 25px 25px}.postCard-module--AuthorList--12tT0{display:flex;flex-wrap:wrap-reverse;margin:0;padding:0;list-style:none}.postCard-module--AuthorListItem--32xbX{position:relative;flex-shrink:0;margin:0;padding:0}.postCard-module--AuthorListItem--32xbX :first-of-type{z-index:10}.postCard-module--AuthorListItem--32xbX :nth-of-type(2){z-index:9}.postCard-module--AuthorListItem--32xbX :nth-of-type(3){z-index:8}.postCard-module--AuthorListItem--32xbX :nth-of-type(4){z-index:7}.postCard-module--AuthorListItem--32xbX :nth-of-type(5){z-index:6}.postCard-module--AuthorListItem--32xbX :nth-of-type(6){z-index:5}.postCard-module--AuthorListItem--32xbX :nth-of-type(7){z-index:4}.postCard-module--AuthorListItem--32xbX :nth-of-type(8){z-index:3}.postCard-module--AuthorListItem--32xbX :nth-of-type(9){z-index:2}.postCard-module--AuthorListItem--32xbX :nth-of-type(10){z-index:1}.postCard-module--AuthorListItem--32xbX:hover .postCard-module--AuthorNameTooltip--1xdhE{opacity:1;transform:translateY(0)}.postCard-module--AuthorNameTooltip--1xdhE{position:absolute;bottom:105%;z-index:999;display:block;padding:2px 8px;color:#fff;font-size:1.2rem;letter-spacing:.2px;white-space:nowrap;background:#15171a;border-radius:3px;box-shadow:0 12px 26px rgba(39,44,49,.08),1px 3px 8px rgba(39,44,49,.03);opacity:0;transition:all .3s cubic-bezier(.4,.01,.165,.99);transform:translateY(6px);pointer-events:none}@media (max-width:650px){.postCard-module--AuthorNameTooltip--1xdhE{display:none}}.postCard-module--StaticAvatar--3PQRl{display:block;overflow:hidden;margin:0 -5px;width:34px;height:34px;border:2px solid #fff;border-radius:100%}.postCard-module--AuthorProfileImage--31jei{display:block;width:100%;height:100%;background:#c5d2d9;border-radius:100%;-o-object-fit:cover;object-fit:cover}.postCard-module--ReadingTime--3LVUu{flex-shrink:0;margin-left:20px;color:#647a83;font-size:1.2rem;line-height:33px;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.PostFullContent{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff}@media (max-width:1170px){.PostFullContent{padding:5vw 7vw 0}}@media (max-width:800px){.PostFullContent{font-size:1.9rem}}.PostFullContent:before{left:-5px;transform:rotate(-5deg)}.PostFullContent:after,.PostFullContent:before{content:"";position:absolute;top:15px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,.15);-webkit-filter:blur(5px);filter:blur(5px)}.PostFullContent:after{right:-5px;transform:rotate(5deg)}.PostFullContent .footnotes,.PostFullContent .post-full-comments,.PostFullContent blockquote,.PostFullContent dl,.PostFullContent h1,.PostFullContent h2,.PostFullContent h3,.PostFullContent h4,.PostFullContent h5,.PostFullContent h6,.PostFullContent ol,.PostFullContent p,.PostFullContent pre,.PostFullContent ul{min-width:100%}.PostFullContent li{word-break:break-word}.PostFullContent li p{margin:0}.PostFullContent a{color:#000;word-break:break-word;box-shadow:inset 0 -1px 0 #0f7dba}.PostFullContent a:hover{color:#0f7dba;text-decoration:none}.PostFullContent em,.PostFullContent strong{color:#15171a}.PostFullContent small{display:inline-block;line-height:1.6em}.PostFullContent li:first-of-type{margin-top:0}.PostFullContent .gatsby-resp-image-link{box-shadow:none}.PostFullContent img,.PostFullContent video{display:block;margin:1.5em auto;max-width:1040px;height:auto}@media (max-width:1040px){.PostFullContent img,.PostFullContent video{width:100%}}.PostFullContent img[src$="#full"]{max-width:none;width:100vw}.PostFullContent img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center}.PostFullContent iframe{margin:0 auto!important}.PostFullContent blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:3px solid #0f7dba}.PostFullContent blockquote p{margin:0 0 1em;color:inherit;font-size:inherit;line-height:inherit;font-style:italic}.PostFullContent blockquote p:last-child{margin-bottom:0}.PostFullContent code{padding:0 5px 2px;font-size:.8em;line-height:1em;font-weight:400!important;background:#e5eff5;border-radius:3px}.PostFullContent p code{word-break:break-all}.PostFullContent pre{overflow-x:auto;padding:20px;max-width:100%;border:1px solid #15171a;color:#e5eff5;font-size:1.4rem;line-height:1.5em;background:#15171a;border-radius:5px}.PostFullContent pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent}.PostFullContent pre code :not(span){color:inherit}.PostFullContent .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em}.PostFullContent hr{margin:4vw 0}.PostFullContent hr:after{content:"";position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#c5d2d9;box-shadow:0 0 0 5px #fff;transform:rotate(45deg)}.PostFullContent h1,.PostFullContent h2,.PostFullContent h3,.PostFullContent h4,.PostFullContent h5,.PostFullContent h6{color:#15171a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.PostFullContent h1{margin:.5em 0 .2em;font-size:4.6rem;font-weight:700}@media (max-width:500px){.PostFullContent h1{font-size:2.8rem}}.PostFullContent h2{margin:.5em 0 .2em;font-size:3.6rem;font-weight:700}@media (max-width:500px){.PostFullContent h2{font-size:2.6rem}}.PostFullContent h3{margin:.5em 0 .2em;font-size:2.8rem;font-weight:700}@media (max-width:500px){.PostFullContent h3{font-size:2.2rem}}.PostFullContent h4{margin:.5em 0 .2em;font-size:2.8rem;font-weight:700}@media (max-width:500px){.PostFullContent h4{font-size:2.2rem}}.PostFullContent h5{display:block;margin:.5em 0;padding:1em 0 1.5em;border:0;color:#0f7dba;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center}@media (min-width:1180px){.PostFullContent h5{max-width:1060px}}@media (max-width:500px){.PostFullContent h5{padding:0 0 .5em;font-size:2.2rem}}.PostFullContent h6{margin:.5em 0 .2em;font-size:2.3rem;font-weight:700}@media (max-width:500px){.PostFullContent h6{font-size:2rem}}.PostFullContent table{display:inline-block;overflow-x:auto;margin:.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,.2) 0,transparent 75%) 0,radial-gradient(ellipse at right,rgba(0,0,0,.2) 0,transparent 75%) 100%;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat}.PostFullContent table td:first-of-type{background-image:linear-gradient(90deg,#fff 50%,hsla(0,0%,100%,0));background-size:20px 100%;background-repeat:no-repeat}.PostFullContent table td:last-child{background-image:linear-gradient(270deg,#fff 50%,hsla(0,0%,100%,0));background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat}.PostFullContent table th{color:#15171a;font-size:1.2rem;font-weight:700;letter-spacing:.2px;text-align:left;text-transform:uppercase;background-color:#e5eff5}.PostFullContent table td,.PostFullContent table th{padding:6px 12px;border:1px solid #e5eff5}@media (max-width:500px){.PostFullContent{padding:0}.PostFullContent :after,.PostFullContent :before{display:none}}.PostFullContent code[class*=language-],.PostFullContent pre[class*=language-]{background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.PostFullContent pre[class*=language-]{overflow:auto;padding:1.3125rem}.PostFullContent pre[class*=language-]::selection{background:#27292a}.PostFullContent pre[class*=language-]::selection,.PostFullContent pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}.PostFullContent :not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.PostFullContent .token.attr-name{color:#addb67;font-style:italic}.PostFullContent .token.comment{color:#809393}.PostFullContent .token.string,.PostFullContent .token.url{color:#addb67}.PostFullContent .token.variable{color:#d6deeb}.PostFullContent .token.number{color:#f78c6c}.PostFullContent .token.builtin,.PostFullContent .token.char,.PostFullContent .token.constant,.PostFullContent .token.function{color:#82aaff}.PostFullContent .token.punctuation{color:#c792ea}.PostFullContent .token.doctype,.PostFullContent .token.selector{color:#c792ea;font-style:italic}.PostFullContent .token.class-name{color:#ffcb8b}.PostFullContent .token.keyword,.PostFullContent .token.operator,.PostFullContent .token.tag{color:#ffa7c4}.PostFullContent .token.boolean{color:#ff5874}.PostFullContent .token.property{color:#80cbc4}.PostFullContent .token.namespace{color:#b2ccd6}.PostFullContent pre[data-line]{padding:1em 0 1em 3em;position:relative}.PostFullContent .gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.PostFullContent .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.PostFullContent .gatsby-highlight{border-radius:0}}.PostFullContent .gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.postFullFooter-module--container--2PA5n{display:flex;justify-content:space-between;align-items:center;margin:0 auto;padding:3vw 0 6vw;max-width:840px}.postFullFooterRight-module--container--1A7hv{flex-shrink:0;margin-left:20px}.postFullFooterRight-module--container--1A7hv .postFullFooterRight-module--authorCardButton--2Zo5V{display:block;padding:9px 16px;border:1px solid #647b84;color:#647a83;font-size:1.2rem;line-height:1;font-weight:500;border-radius:20px;transition:all .2s ease}.postFullFooterRight-module--container--1A7hv .postFullFooterRight-module--authorCardButton--2Zo5V:hover{border-color:#0f7dba;color:#0f7dba;text-decoration:none}.wrapper-module--container--39cxo{display:flex;flex-direction:column;min-height:100vh}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}img{max-width:100%}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{overflow-x:hidden}body{color:#2d373b;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::selection{text-shadow:none;background:#6fc4f3}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{margin:0;padding:0;border:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171a;font-weight:500;text-align:right}dd{margin:0 0 5px;text-align:left}blockquote{margin:1.5em 0;padding:0 1.6em;border-left:.5em solid #e5eff5}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\\2014 \\00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#0d6da2;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em;font-size:5rem;font-weight:700}@media (max-width:500px){h1{font-size:2.2rem}}h2{margin:1.5em 0 .5em;font-size:2rem}@media (max-width:500px){h2{font-size:1.8rem}}h3{margin:1.5em 0 .5em;font-size:1.8rem;font-weight:500}@media (max-width:500px){h3{font-size:1.7rem}}h4{margin:1.5em 0 .5em;font-size:1.6rem;font-weight:500}h5,h6{margin:1.5em 0 .5em;font-size:1.4rem;font-weight:500}body{background:#f4f8fb}.pagination-module--container--jH0P2{padding:0 4vw 4vh;background:#fff;text-align:center}.pagination-module--container--jH0P2 div{display:inline-block}.pagination-module--container--jH0P2 a{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell;background:#fff;color:#000;float:left;padding:8px 16px;text-decoration:none;transition:background-color .3s;border:1px solid #ddd;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);border-radius:6px;margin:0 4px 5px;min-width:50px}.pagination-module--container--jH0P2 a.pagination-module--active--2gHKl{box-shadow:inset 3px 0 0 0 #141619}.pagination-module--container--jH0P2 a:hover:not(.pagination-module--active--2gHKl){background-color:#ddd}.pagination-module--container--jH0P2 a:hover{text-decoration:none}.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{padding:8px;min-width:40px;pointer-events:none;cursor:default;opacity:.6}@media (max-width:550px){.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{min-width:30px}}@media (max-width:400px){.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{display:none}}@media (max-width:550px){.pagination-module--container--jH0P2 .pagination-module--next--1rF_K,.pagination-module--container--jH0P2 .pagination-module--previous--WUxFk{display:none}}.readNextCard-module--container--J4I2n{position:relative;flex:1 1 300px;display:flex;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171a 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03)}.readNextCard-module--container--J4I2n:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,.8),rgba(0,20,40,.7));border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.readNextCard-module--ReadNextCardHeader--3M6PZ{position:relative;z-index:50;padding-top:20px;text-align:center}.readNextCard-module--ReadNextCardHeaderSitetitle--1FkpC{display:block;font-size:1.3rem;line-height:1.3em;opacity:.8}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;letter-spacing:1px}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx a{color:#fff;font-weight:300;text-decoration:none}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx a:hover{text-decoration:none}.readNextCard-module--ReadNextDivider--1WD0f{position:relative;display:flex;justify-content:center;height:80px}.readNextCard-module--ReadNextDivider--1WD0f svg{width:40px;fill:transparent;stroke:#fff;stroke-width:.5px;stroke-opacity:.65}.readNextCard-module--ReadNextCardContent--phuA0{position:relative;z-index:50;flex-grow:1;display:flex;font-size:1.7rem}.readNextCard-module--ReadNextCardContent--phuA0 ul{display:flex;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none}.readNextCard-module--ReadNextCardContent--phuA0 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;letter-spacing:-.5px}.readNextCard-module--ReadNextCardContent--phuA0 li a{display:block;padding:20px 0;border-bottom:1px solid hsla(0,0%,100%,.3);color:#fff;font-weight:500;vertical-align:top;transition:opacity .3s ease}.readNextCard-module--ReadNextCardContent--phuA0 li:first-of-type a{padding-top:10px}.readNextCard-module--ReadNextCardContent--phuA0 li a:hover{opacity:1}.readNextCard-module--ReadNextCardFooter--jt8zz{position:relative;margin:15px 0 3px;text-align:center}.readNextCard-module--ReadNextCardFooter--jt8zz a{color:#fff}#site-main{background:#fff;padding-bottom:4vw}.PostFull{position:relative;z-index:50}.NoImage .post-full-content{padding-top:0}.NoImage .post-full-content:after,.NoImage .post-full-content:before{display:none}.PostFullHeader{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center}@media (max-width:500px){.PostFullHeader{padding:14vw 3vw 10vw}}.PostFullMeta{display:flex;justify-content:center;align-items:center;color:#647a83;font-size:1.4rem;font-weight:600;text-transform:uppercase}@media (max-width:500px){.PostFullMeta{font-size:1.2rem;line-height:1.3em}}.PostFullMetaDate{color:#0f7dba}.PostFullTitle{margin:0;color:#15171a}@media (max-width:500px){.PostFullTitle{font-size:2.9rem}}.PostFullImage{margin:0 -10vw -165px;height:800px;background:#c5d2d9 50%;background-size:cover;border-radius:5px}@media (max-width:1170px){.PostFullImage{margin:0 -4vw -100px;height:600px;border-radius:0}}@media (max-width:800px){.PostFullImage{height:400px}}@media (max-width:500px){.PostFullImage{margin-bottom:4vw;height:350px}}.DateDivider{display:inline-block;margin:0 6px 1px}.ReadNextFeed{display:flex;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0}.progress-read-module--container--Xf3HB{background:#e5eff5;height:5px;width:100vw;opacity:1%;position:fixed;top:0;z-index:200}.progress-read-module--container--Xf3HB .progress-read-module--bar--2CgAA{background:#0f7dba;height:100%}site-main{background:#fff;padding-bottom:4vw}._404-module--siteNavCenter--1xW_t{display:flex;justify-content:center;align-items:center;text-align:center}._404-module--siteNavCenter--1xW_t .site-nav-logo{margin-right:0}._404-module--errorTemplate--2Q6Vk{padding:7vw 4vw}._404-module--errorTemplate--2Q6Vk ._404-module--errorCode--Iss6n{margin:0;font-size:12vw;line-height:1em;letter-spacing:-5px;opacity:.3}._404-module--errorTemplate--2Q6Vk ._404-module--errorDescription--1CGfX{margin:0;color:#647a83;font-size:3rem;line-height:1.3em;font-weight:400}._404-module--errorTemplate--2Q6Vk ._404-module--errorLink--3fWWe{display:inline-block;margin-top:5px}</style><meta name="generator" content="Gatsby 2.20.8"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"/><link rel="canonical" href="https://ludovicwyffels.dev/angular-dynamic-environment/" data-baseprotocol="https:" data-basehost="ludovicwyffels.dev"/><title data-react-helmet="true">Gestion des environnements Angular en livraison continue</title><link data-react-helmet="true" rel="icon" href="/static/favicon-36e47e74810a0d8c32a77f495c49cf8e.ico" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a…"/><meta data-react-helmet="true" property="og:site_name" content="Code avec Ludo"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Gestion des environnements Angular en livraison continue"/><meta data-react-helmet="true" property="og:description" content="Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a…"/><meta data-react-helmet="true" property="og:url" content="https://ludovicwyffels.github.io/angular-dynamic-environment/"/><meta data-react-helmet="true" property="og:image" content="https://ludovicwyffels.github.io/static/fc4a9d82e0465367f3d289f60d0b6834/ec6c5/bloom.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2019-09-08T17:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="Angular"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Gestion des environnements Angular en livraison continue"/><meta data-react-helmet="true" name="twitter:description" content="Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a…"/><meta data-react-helmet="true" name="twitter:url" content="https://ludovicwyffels.github.io/angular-dynamic-environment/"/><meta data-react-helmet="true" name="twitter:image" content="https://ludovicwyffels.github.io/static/fc4a9d82e0465367f3d289f60d0b6834/ec6c5/bloom.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="ludo"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Angular"/><meta data-react-helmet="true" property="og:image:width" content="1280"/><meta data-react-helmet="true" property="og:image:height" content="853.3333333333334"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-138733938-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-138733938-1', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link as="script" rel="preload" href="/webpack-runtime-de59e2899aa2916b22ce.js"/><link as="script" rel="preload" href="/framework-6465712a6c92a1af50c9.js"/><link as="script" rel="preload" href="/app-6724754fa77a53783161.js"/><link as="script" rel="preload" href="/styles-d395c19ae921add20f73.js"/><link as="script" rel="preload" href="/29107295-41804fe01aaec7b50b5b.js"/><link as="script" rel="preload" href="/commons-97558ea08fa7f76c1664.js"/><link as="script" rel="preload" href="/0236af8b77f5faa3b8b718fd6651682318b14e5d-8ca8147869df1097a087.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-a755419bd62d49b119ee.js"/><link as="fetch" rel="preload" href="/page-data/angular-dynamic-environment/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion-css="0"></style><div class="progress-read-module--container--Xf3HB" style="display:none"><div class="progress-read-module--bar--2CgAA" style="width:0%"></div></div><div class="wrapper-module--container--39cxo PostTemplate"><style data-emotion-css="7n4c3k">.css-7n4c3k{position:relative;padding:0 4vw;position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#0a0b0c no-repeat center center;background-size:cover;}</style><header class="css-7n4c3k"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><nav class="false sitenav-module--container--2f7Mf"><div class="sitenav-module--SiteNavLeft--37Wnn"><a class="site-nav-logo siteNavLogo-module--container--2Eieh" href="/"><img src="/static/7d3993478cb88fc18c502e8e98013386/497c6/logo.png" alt="Code avec Ludo"/></a><ul class="sitenav-module--NavStyles--gmMAk" role="menu"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/node-js/">Node.js</a></li><li role="menuitem"><a href="/tags/dev-ops/">DevOps</a></li><li role="menuitem"><a href="/about">About</a></li></ul></div><div class="sitenav-module--SiteNavRight--2MOoa"><div class="sitenav-module--SocialLinks--3bj4A"><a class="shared-module--SocialLink--Ya1gh" href="https://github.com/ludovicwyffels" title="Github" target="_blank" rel="noopener noreferrer"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Github</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></nav></div></header><style data-emotion-css="9696is">.css-9696is{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 4vw;}</style><main id="site-main" class="site-main css-9696is"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><style data-emotion-css="1cj30xk">.css-1cj30xk{position:relative;z-index:50;}</style><article class="css-1cj30xk"><header class="PostFullHeader"><section class="PostFullMeta"><time dateTime="2019-09-08T17:00:00.000Z" class="PostFullMetaDate">8 September 2019</time><span class="DateDivider">/</span><a href="/tags/angular/">Angular</a><style data-emotion-css="bosr71">.css-bosr71{width:10px;}</style><div class="css-bosr71"></div><a href="/tags/typescript/">Typescript</a><div class="css-bosr71"></div></section><h1 class="PostFullTitle">Gestion des environnements Angular en livraison continue</h1></header><figure class="PostFullImage"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:66.66666666666667%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGSyjpVIQD/xAAaEAEBAQADAQAAAAAAAAAAAAACAQMAERIh/9oACAEBAAEFAsR700BMKlkvVeifBPn/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPwHIRH//xAAbEAACAgMBAAAAAAAAAAAAAAAAARExAhASIv/aAAgBAQAGPwJJ0dYyoepR6ZZ//8QAGRABAQEBAQEAAAAAAAAAAAAAAQARMUEh/9oACAEBAAE/IQpM7+IwFOMhJie2P9Mlexf/2gAMAwEAAgADAAAAEMQP/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8QiH//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EE6KaW2H/8QAGhABAQEAAwEAAAAAAAAAAAAAAREAITFBcf/aAAgBAQABPxB44qsZZqokmpY+XKXwX5l59YPJhhB4CazDXo3/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/fc4a9d82e0465367f3d289f60d0b6834/2f037/bloom.jpg 930w,
/static/fc4a9d82e0465367f3d289f60d0b6834/ec6c5/bloom.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/fc4a9d82e0465367f3d289f60d0b6834/2f037/bloom.jpg 930w,
/static/fc4a9d82e0465367f3d289f60d0b6834/ec6c5/bloom.jpg 1280w" src="/static/fc4a9d82e0465367f3d289f60d0b6834/ec6c5/bloom.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><section class="post-full-content PostFullContent"><div><p>Dans les applications métiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque étape a sa configuration pour accéder aux systèmes périphériques spécifiques à l’environnement. Pour ce faire, nous devons gérer les configurations basées sur les stages.</p>
<p>Angular CLI est livré avec certains concepts intégrés permettant de gérer différents environnements.</p>
<p>Mais quelle est leur fiabilité dans un environnement de livraison continu ? 🤔</p>
<h2>Livraison continue - une courte introduction</h2>
<p>La livraison continue résulte du mouvement agile. La rétroaction itérative est à la base. Il est essentiel d’apprendre des expériences pratiques et d’intégrer ces commentaires.</p>
<p>La livraison continue prend des idées agiles et définit une approche pour livrer des logiciels testés automatiquement dans des cycles courts.</p>
<blockquote>
<p>La diffusion continue consiste à créer un pipeline pour automatiser le processus de publication du logiciel</p>
</blockquote>
<h2>Étapes de livraison continue</h2>
<p>Un schéma typique dans la livraison continue est le <em>steging</em>. Dans une configuration de livraison continue typique, nous avons différents stages avec des objectifs différents.
Chaque validation entraîne une exécution du pipeline sur notre serveur CI. Les exécutions réussies sur la branche <code>master</code> entraînent un déploiement sur l’un de nos stages.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1000px">
      <a class="gatsby-resp-image-link" href="/static/13c78901660c3a1ee09b0f1d126463e2/332ff/continuous-deployment.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:74.06143344709898%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACM0lEQVQoz41Ty27TQBS1+BV+hb9gyZIFX9AVG8QXFLHogkWlImVXJCgooikNIYQmcRInsePHeDx+x287fozDddNGgpaHNbKu7txz7rmPYbb/8dV1XZRlXW/Lsko3ebbJwQA/czcO/hDaZRfIsHdOCE2yjaBiP4qQbo95CfCU1r+DKSTJC8VeP3xzctDpbeutHyd5UWNrdfD68SX7LozLMS9WFa0oZeprAMCAW7fXimE5a59VyYPDoyfv2zTLJd0KohyZ3MmXR4PlW9cvWEEqq6oB76VKWJ8KSpSkjc6qaqvayvObW2CndRCHPO7ZniYTey6pUZIBivGiTZjkYMmGB0E75fWvtYAobLo1bWw/ih0/hLwQw7Dc1dPnL047/ePW8bOXh1le7LRU1xSa6QiIYMsBLeDf5IVmu3tyRhY6n85bIjbap6+6o4lMLBHrXhiZrqc7awMaECWgJYgTkDoTVXCGSRrE6T2jgiGNltLFcAbaojQDCsDziHC8hDDpDqdXs4WqkdGcz4uSadpBG420af5NvQtZO/s6XCoa0i3L9cM4lTRDt90fHL+QVKhFISbddfvOntw0CRICRjVsoFghTUC4Mxj3xpyEyVJWoQvMvftIb/dsCiDTBbyMiYLJxYDtDifEsFYyKco/gPfDB8kzEblBKGFDJuY3dsGtVIHgFvdhYLLM397DrcGJaCnK5/3h2eX3j91BfzL7PO/Lnsb88z014y0KzXJU00aGBQebtuUEcPUTlGpFB9V0AEcAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/13c78901660c3a1ee09b0f1d126463e2/14b47/continuous-deployment.webp 293w, /static/13c78901660c3a1ee09b0f1d126463e2/91928/continuous-deployment.webp 585w, /static/13c78901660c3a1ee09b0f1d126463e2/e00f7/continuous-deployment.webp 1000w" sizes="(max-width: 1000px) 100vw, 1000px" type="image/webp"/>
        <source srcSet="/static/13c78901660c3a1ee09b0f1d126463e2/0ecc1/continuous-deployment.png 293w, /static/13c78901660c3a1ee09b0f1d126463e2/1bd4c/continuous-deployment.png 585w, /static/13c78901660c3a1ee09b0f1d126463e2/332ff/continuous-deployment.png 1000w" sizes="(max-width: 1000px) 100vw, 1000px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/13c78901660c3a1ee09b0f1d126463e2/332ff/continuous-deployment.png" alt="Continuous Deployment" title="Continuous Deployment" loading="lazy" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
      </picture>
  </a>
    </span></p>
<p>Dans l’exemple ci-dessus, la phase de <code>test</code> contient une snapshot de la branche <code>master</code>. À certains intervalles, par exemple, après chaque sprint, nous pouvons déployer au stade intermédiaire (<code>staging</code>). C’est à ce stade que les tests de réception finaux sont effectués. Une fois accepté, l’artefact est déplacé en production.</p>
<p>Bien sûr, certaines entreprises ont un temps de production plus rapide. Certains déploient même chaque commit directement en production.</p>
<p>Mais dans la plupart des applications liées aux entreprises, il est bon d’avoir une étape avant la production. Cela permet à nos <em>product owners</em>, représentants commerciaux et testeurs d’avoir un dernier aperçu et de vérifier la logique métier.</p>
<h2>Build une fois - déployer partout</h2>
<p>Il est essentiel de ne construire votre artefact qu’une seule fois et de le déplacer d’une étape à l’autre.
Cette approche garantit que le même artefact qui a été testé entre également en production.</p>
<h2>Les environnements Angular et livraison continue, sont-il adapté ? 🤔</h2>
<p>Angular CLI est livrée avec un mécanisme intégré de fichier d’environnement. Voyons comment ils fonctionnent.</p>
<p>Lors de la génération d’un tout nouveau projet, il existe un <code>environment.ts</code>et un <code>envrironment.prod.ts</code>. De plus, nous pouvons toujours ajouter à ces fichiers de nouveaux fichiers d’environnement dans le dossier <code>environment</code> et les configurer dans votre fichier <code>angular.json</code>.</p>
<p>Pendant le build, l’environnement souhaité est ensuite transmis en tant qu’argument à la commande de build. Le CLI utilise ensuite le fichier d’environnement correct et remplace le fichier par défaut pendant le build, que nous pouvons ensuite importer avec la ligne suivante</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>environment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../environments/environment&#x27;</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Maintenant que nous connaissons le concept intégré de la CLI angulaire. Voyons en quoi cela correspond aux principes de la livraison continue.</p>
<p>Il est donc essentiel de noter que Angular CLI définit l’environnement pendant la construction. Cela signifie que nous devons créer notre application avant chaque déploiement sur une étape spécifique.</p>
<p>Cette approche comporte quelques risques.</p>
<p>Si vous créez votre application à chaque fois avant de déployer, il se peut que l’artefact que vous avez testé ne soit pas le même que celui qui entre en production.</p>
<blockquote>
<p>Il est important de réaliser qu’un processus de build n’est pas toujours déterministe. Même si le même code entre dans la construction, il n’est pas garanti que le même artefact sortira.</p>
</blockquote>
<p>L’artefact ne dépend pas seulement de votre code, il dépend également des bibliothèques tierces, des mises à jour du système d’exploitation ou d’autres modifications de l’environnement qui se produisent avec le temps.</p>
<p>Rappelez-vous à l’époque où nous avions un <code>package.lock.json</code>. À l’époque, les builds étaient encore moins prédictives. Les bibliothèques tierces apparaissent souvent avec un <code>^</code> dans notre <code>package.json</code>. Malgré <code>semver</code>, les nouvelles versions d’une bibliothèque tierce produisaient parfois une incompatibilité avec une autre dépendance qui entraînait la rupture de votre application.</p>
<blockquote>
<p>Plus vous pouvez maintenir la cohérence entre les déploiements, plus le déploiement en production est susceptible de se dérouler sans heurts.</p>
</blockquote>
<p><strong>La livraison continue et les fichiers d’environnement fournis par Angular CLI ne conviennent pas!</strong></p>
<p><strong>Dans la livraison continue, votre artefact doit obtenir des configurations spécifiques à l’environnement au démarrage ou à l’exécution. Angular CLI, en revanche, obtient ces configurations au moment du build.</strong></p>
<p>Alors, comment combiner les idées de la livraison continue avec notre application angulaire?</p>
<p>Il existe différentes approches pour combiner les idées de livraison continue avec Angular CLI. Chacun comporte des avantages et des inconvénients.</p>
<p>Regardons-les.</p>
<h2>Configurer l’hôte comme assets - Monter les fichiers de configuration par environnement</h2>
<p>Au lieu d’extraire la configuration sur un endpoint REST, nous extrayons directement un fichier JSON avec des configurations situées dans notre dossier <code>assets</code>.</p>
<p>Nous allons donc créer un dossier de <code>config</code> à l’intérieur <code>assets</code> et y placer un <code>JSON</code> contenant les configurations spécifiques à l’environnement local.</p>
<p>Mais comment charge-t-on le fichier <code>configuration.json</code>? Au travers d’un service au travers duquel nous récupérons le fichier à partir du dossier <code>assets</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HttpClient<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/common/http&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Observable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>shareReplay<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs/operators&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Configuration</span> <span class="token punctuation">{</span>
  resourceServerA<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  resourceServerB<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  stage<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>providedIn<span class="token operator">:</span> <span class="token string">&#x27;root&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ConfigAssetLoaderService</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token constant">CONFIG_URL</span> <span class="token operator">=</span> <span class="token string">&#x27;assets/config/config.json&#x27;</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> configuration$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Configuration<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> http<span class="token operator">:</span> HttpClient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">loadConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>configuration$<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>configuration$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span>Configuration<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONFIG_URL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">shareReplay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configuration$<span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code>ConfigurationAssetsLoaderService</code> charge maintenant notre fichier <code>assets/config/config.json</code> qui contient toutes les configurations. Mais comment pouvons-nous changer ces configurations par rapport à l’environnement actuel dans lequel nous nous trouvons?</p>
<p>Nous allons simplement héberger notre configuration sur chaque étape, puis monter le fichier <code>configuration.json</code> dans le dossier <code>assets</code>. Lorsque votre pod démarre, nous montons votre configuration dans le répertoire <code>assets/config</code>.</p>
<p>Il est important de noter que vous créez un dossier <code>config</code> à l’intérieur du dossier <code>assets</code>. Nous ne pouvons pas utiliser une hiérarchie à plat. Lors du montage, tous les fichiers du dossier monté sont supprimés.</p>
<p>La manière concrète de monter des volumes dépend de votre outil de CI. Sur mon projet, nous utilisons Kubernetes pour nos déploiements. Kubernetes nous fournit des <code>ConfigMaps</code> qui peuvent être une propriété ou même un fichier de configuration complet. Donc, sur Kubernetes, nous avons différents stages. Chaque stage héberge ensuite des configurations spécifiques et les monte dans notre dossier <code>assets/config</code> au démarrage du pod.</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset:linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/share/nginx/html/assets/config
    <span class="token key atrule">name</span><span class="token punctuation">:</span> yourVolumeName</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Nous avons maintenant vu deux approches dont la mise en oeuvre côté client est très similaire. Nous avons créé un service qui récupère les configurations à partir d’un endpoint REST ou du dossier <code>assets</code>.</p>
<p>Nous avons donc vu deux manières d’utiliser un service pour accéder à des configurations. Mais quand appelons-nous ces services?</p>
<p>Eh bien, réponse courte, c’est à vous de voir. Il y a des moments différents où il est logique de les appeler. Chacun vient avec des avantages et des inconvénients.</p>
<h2>Remplacer les configurations par environnement</h2>
<p>Dans cet exemple, nous utilisons les fichiers d’environnement Angular tels quels. Un <code>environment.ts</code>et un <code>environment.prod.ts</code>.</p>
<p>Même si nous avons plus de stages que la production et le développement, nous distinguons seulement ces deux-là. Pour le développement local, nous utilisons le fichier <code>environment.ts</code>. Tous les autres stages sont gérés par <code>environment.prod.ts</code>.</p>
<p>Mais comment ?</p>
<p>Notre <code>environment.prod.ts</code> ne contient pas les valeurs réelles; il contient des valeurs d’espace réservé qui seront écrasées à chaque étape par un script de construction.</p>
<p>Un exemple de fichier <code>environment.prod.ts</code> pourrait ressembler à ceci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token punctuation">{</span>
  resourceServerA<span class="token operator">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_RESOURCEA&#x27;</span><span class="token punctuation">,</span>
  resourceServerB<span class="token operator">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_RESOURCEB&#x27;</span><span class="token punctuation">,</span>
  stage<span class="token operator">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_STAGE&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Lorsque nous démarrons notre serveur Web, nous pouvons ensuite utiliser un script <code>start.sh</code> qui remplacera les espaces réservés.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

<span class="token comment"># replace static values with environment-variables</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">&quot;<span class="token variable">$RESOURCEA</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">sed</span> -i <span class="token string">&quot;s#REPLACED_BY_BUILD_RESOURCEA#<span class="token variable">$AUTHSERVER_URL</span>#g&quot;</span> /usr/share/nginx/html/main.*.bundle.js
<span class="token keyword">fi</span>

<span class="token comment"># start webserver</span>
<span class="token builtin class-name">exec</span> nginx</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Nous exécutons ensuite ce script au démarrage. Par exemple, dans notre fichier Docker.</p>
<div class="gatsby-highlight" data-language="dockerfile"><pre style="counter-reset:linenumber NaN" class="language-dockerfile line-numbers"><code class="language-dockerfile"><span class="token comment"># Dockerfile</span>
<span class="token punctuation">...</span>
<span class="token comment"># Start nginx via script, which replaces static urls with environment variables</span>
<span class="token keyword">ADD</span> start.sh /usr/share/nginx/start.sh
<span class="token keyword">RUN</span> chmod +x /usr/share/nginx/start.sh
<span class="token keyword">CMD</span> /usr/share/nginx/start.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Cette approche, du moins pour moi, est un peu “hacky”. Remplacer des chaînes dans un paquet n’est probablement pas le moyen le plus agréable. Il comporte en outre le risque de remplacer quelque chose qui ne devrait pas être remplacé.</p>
<p>Si vous décidez quand même d’utiliser cette approche, il est extrêmement important d’avoir de bons espaces réservés. Utilisez des caractères spéciaux que vous n’utilisez généralement pas dans les noms de variables.</p>
<h2>Conclusion</h2>
<p>Angular est livré avec des fichiers d’environnement qui nous permettent de gérer des configurations spécifiques à l’environnement. Ils ne répondent pas aux exigences d’une configuration de livraison continue.</p>
<p>Les fichiers d’environnement Angular sont utilisés pendant la phase de build. En mode de livraison continue, il est essentiel de déployer le même artefact à différents stages. Par conséquent, nous devons transmettre les configurations d’environnement au démarrage ou à l’exécution.</p>
<p>En fonction de votre configuration, nous pouvons charger des configurations via un service. Soit directement à partir d’un backend ou de notre dossier d’actifs.</p>
<p>Il est donc recommandé de les mettre en cache.</p>
<hr/>
<p>Un des gros défauts de la façon dont Angular CLI traite les environnements, dans la culture DevOps c’est mieux de <strong>build une seule fois et de déployer sur plusieurs environnements</strong>, hors Angular CLI veut que vous créer un buildnpm séparé par environnement.</p>
<p>Pourquoi devriez-vous build une seule fois et réutiliser cette version dans tous les environnements?</p>
<p>La raison pour laquelle vous ne souhaitez pas créer une version distincte pour chaque environnement est la suivante:</p>
<ol>
<li>Cela ralentit les pipelines d’intégration continue (CI), car il doit créer un build pour chaque environnement.</li>
<li>Cela augmente le risque d’erreurs / de différences dans différents environnements, car les versions sont séparées</li>
<li>Il ajoute des informations inutiles sur d’autres environnements dans le code</li>
<li>Pour des raisons de sécurité, vous pourriez ne pas vouloir afficher d’informations confidentielles dans la configuration de l’environnement, qui est enregistrée dans Git.</li>
</ol>
<p>Tous ces problèmes me font me demander pourquoi <strong>Angular CLI opte pour une version par environnement</strong>. Je voulais bien sûr une solution à ces problèmes.</p>
<p>Comment ces problèmes sont-ils résolus ?</p>
<p>En faisant en sorte que le serveur de déploiement <strong>substitue un fichier config.json, chargé au moment de l’exécution</strong> par l’application.</p>
<h2>Faire en sorte qu’une application Angular utilise des configurations dynamiques</h2>
<p>Nous voulons que l’application Angular ne comporte que deux fichiers d’environnement: <code>environment.ts</code> et <code>environment.prod.ts</code>.</p>
<p>Pourquoi deux environnements, vous pouvez demander? Un pour les développeurs locaux, où vous pouvez mettre ce que vous voulez pour servir localement et un autre pour créer l’application. Ces fichiers d’environnement tirent l’essentiel de ses valeurs d’un fichier <code>app-config.json</code> chargé lors de l’exécution, contrairement à la codification en dur de toutes les informations sur l’environnement dans les fichiers d’environnement.</p>
<h2>Créer une nouvelle application Angular</h2>
<p>La première étape consiste à créer une nouvelle application Angular en ouvrant le terminal, accéder au répertoire souhaité pour l’application et taper:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash">ng new dynamic-config-demo</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Et cela devrait créer une nouvelle application Angular pour vous.</p>
<h2>Chargement du fichier config.json au démarrage</h2>
<p>Toute la configuration de l’environnement va être stockée dans un fichier <code>app-config.json</code> utilisé par le fichier <code>environment.ts</code> pour référencer ces valeurs en toute sécurité.</p>
<p>Nous créons simplement un fichier JSON vide dans le dossier <code>assets</code> appelé <code>app-config.json</code>.</p>
<p>L’étape suivante consiste à <strong>charger le fichier config.json</strong> à l’aide d’un service d’initialisation <code>app.init.ts</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">from</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> filter<span class="token punctuation">,</span> map<span class="token punctuation">,</span> switchMap<span class="token punctuation">,</span> tap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs/operators&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppInitService</span> <span class="token punctuation">{</span>

  <span class="token comment">// This is the method you want to call at bootstrap</span>
  <span class="token comment">// Important: It should return a Promise</span>
  <span class="token keyword">public</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">from</span><span class="token punctuation">(</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;assets/app-config.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ce service s’exécutera au démarrage et garantira que la configuration de l’application est récupérée en utilisant <code>fetch</code> pour obtenir le fichier de configuration, puis enregistrez-le dans <code>window</code> pour le rendre globalement disponible pour l’application. Notez que lorsque vous utilisez <code>fetch</code>, vous aurez peut-être besoin de polyfills pour la prise en charge du navigateur IE.</p>
<p>Le service d’initialisation d’application est configuré dans le module <code>app.module</code> comme suit:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init_app</span><span class="token punctuation">(</span><span class="token parameter">appLoadService<span class="token operator">:</span> AppInitService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> appLoadService<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">,</span> ComponentAComponent<span class="token punctuation">,</span> ComponentBComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>BrowserModule<span class="token punctuation">,</span> CoreModule<span class="token punctuation">,</span> HttpClientModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>
    AppInitService<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      provide<span class="token operator">:</span> <span class="token constant">APP_INITIALIZER</span><span class="token punctuation">,</span>
      useFactory<span class="token operator">:</span> init_app<span class="token punctuation">,</span>
      deps<span class="token operator">:</span> <span class="token punctuation">[</span>AppInitService<span class="token punctuation">]</span><span class="token punctuation">,</span>
      multi<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>L’utilisation d’un service d’initialisation d’application crée un léger retard sur le temps de démarrage de l’application, mais des éléments simples comme celui-ci n’auront pas d’impact considérable sur le temps de démarrage. Néanmoins, je vous recommande d’indiquer à vos utilisateurs d’attendre avec une spinner de chargement.</p>
<h2>Faire en sorte que les fichiers d’environnement utilisent des valeurs dynamiques</h2>
<p>Maintenant que nous chargeons le JSON de configuration de manière dynamique et que nous les enregistrons dans <code>window</code>, nous voulons pouvoir les référencer en toute sécurité. Pour ce faire, nous devrions avoir trois fichiers d’environnement: <code>environment</code>, <code>environment.prod</code> et <code>dynamic-environment</code>.</p>
<p><code>environment</code> est destiné à être utilisé localement, <code>environment.prod</code> est destiné à la production et <code>dynamic-environment</code> est partagé avec <code>environment</code> et <code>environment.prod</code> afin de fournir une configuration dynamique.</p>
<p><code>dynamic-environment</code> ressemble à ceci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DynamicEnvironment</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>config<span class="token punctuation">.</span>environment<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ceci est utilisé dans <code>environnement</code> comme celui-ci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> DynamicEnvironment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./dynamic-environment&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Environment</span> <span class="token keyword">extends</span> <span class="token class-name">DynamicEnvironment</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> production<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>production <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Vous pouvez trouver une démonstration complète d’une application angulaire à configuration dynamique sur mon Github ici.</p>
<h2>Substitution du fichier config.json sur le serveur de déploiement</h2>
<p>Maintenant que nous avons configuré l’application pour la configuration dynamique, la prochaine étape consiste à configurer le remplacement du fichier de configuration sur le serveur de déploiement.</p>
<p>Vous pouvez faire cela en utilisant <strong>Octopus</strong>, qui a une fonction intelligente pour <strong>remplacer un fichier JSON</strong> par des valeurs de configuration pour l’environnement. Les autres serveurs de déploiement devraient avoir des fonctionnalités similaires pour substituer un fichier JSON juste avant de déployer l’application sur le serveur frontal.</p>
<h2>Conclusion</h2>
<p>Nous avons discuté des problèmes posés par la méthode de “Angular CLI” pour gérer la configuration de l’environnement avec <strong>un build par environnement</strong>. Nous avons également cherché à déterminer l’intérêt de <strong>build une version à la fois</strong>. Nous avons examiné comment implémenter cela à l’aide d’un service app.init qui chargeait un fichier de configuration dynamique lors de l’initialisation, avec des valeurs définies par le serveur de déploiement.</p></div></section><footer class="postFullFooter-module--container--2PA5n"><section class="authorCard-module--authorCardSection--3Xspq"><style data-emotion-css="2785xc">.css-2785xc{display:block;background:#e4eaed;border-radius:100%;object-fit:cover;margin-right:15px;width:60px;height:60px;}</style><img src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo" class="css-2785xc"/><section class="authorCard-module--authorCardContent--3jBBV"><div class="authorCard-module--authorCardName--3HnMH"><a href="/author/ludo/">Ludovic Wyffels</a></div><p>Développeur senior. Fullstack + DevOps</p></section></section><div class="postFullFooterRight-module--container--1A7hv"><a class="postFullFooterRight-module--authorCardButton--2Zo5V" href="/author/ludo/">Read More</a></div></footer></article></div></main><style data-emotion-css="1x0l29j">.css-1x0l29j{position:relative;padding:0 4vw;}</style><aside class="read-next css-1x0l29j"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><div class="ReadNextFeed"><style data-emotion-css="82u30w">.css-82u30w{background-image:url(/static/9fb9647467dab072b9ebe36e9e52ae95/a41d1/blog-cover.jpg);}</style><article class="readNextCard-module--container--J4I2n css-82u30w el9ui1o0"><header class="readNextCard-module--ReadNextCardHeader--3M6PZ"><small class="readNextCard-module--ReadNextCardHeaderSitetitle--1FkpC">— <!-- -->Code avec Ludo<!-- --> —</small><h3 class="readNextCard-module--ReadNextCardHeaderTitle--3qnwx"><a href="/tags/angular/">Angular</a></h3></header><div class="readNextCard-module--ReadNextDivider--1WD0f"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Infinity</title><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><div class="readNextCard-module--ReadNextCardContent--phuA0"><ul><li><a href="/angular-3way-communication/">3 façons de communiquer entre les composants Angular</a></li><li><a aria-current="page" class="" href="/angular-dynamic-environment/">Gestion des environnements Angular en livraison continue</a></li><li><a href="/angular-travis-ctci/">Angular DevOps: CT/CI avec Travis CI et Github Pages</a></li></ul></div><footer class="readNextCard-module--ReadNextCardFooter--jt8zz"><a href="/tags/angular/">See all 3 posts<!-- --> →</a></footer></article><article class="postCard-module--container--3MBpY post-card "><a class="post-card-image-link postCard-module--PostCardImageLink--1-_rO" href="/node-logging/"><div class="post-card-image postCard-module--PostCardImage--1ooSS"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:63.44086021505376%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAVth6Nm00L//xAAcEAABAwUAAAAAAAAAAAAAAAACAAERAxITIjP/2gAIAQEAAQUCEnQW5YdUH2DtK//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABESEQIjEyUf/aAAgBAQAGPwK7UiE4ZGUan//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFRMf/aAAgBAQABPyG4NngZgcE8cR33EZWhVRQz/9oADAMBAAIAAwAAABAzL//EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAwEBPxARf//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxANn//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcTFRYf/aAAgBAQABPxAYQbcl/Ik2gzSvXey61PSzZ5SfCxHAgzSKAqhn/9k=" alt="Journalisation: quelques règles pratique cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3105533b16c3c3b87bfb428faeeec641/2f037/bloom-bee.jpg 930w,
/static/3105533b16c3c3b87bfb428faeeec641/ec6c5/bloom-bee.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/3105533b16c3c3b87bfb428faeeec641/2f037/bloom-bee.jpg 930w,
/static/3105533b16c3c3b87bfb428faeeec641/ec6c5/bloom-bee.jpg 1280w" src="/static/3105533b16c3c3b87bfb428faeeec641/ec6c5/bloom-bee.jpg" alt="Journalisation: quelques règles pratique cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content postCard-module--PostCardContent--LjkYR"><a class="postCard-module--PostCardContentLink--37umd" href="/node-logging/"><header><span class="postCard-module--PostCardTags--jyRjj"><span>#<!-- -->Node.js<!-- --> </span></span><h2 class="postCard-module--PostCardTitle--1JrkM">Journalisation: quelques règles pratique</h2></header><section class="postCard-module--PostCardExcerpt--3gUSF"><p>La journalisation est quelque chose que chaque développeur fait depuis ses débuts en programmation, mais très peu connaissent la valeur qu…</p></section></a><footer class="postCard-module--PostCardMeta--2EEJ7"><ul class="postCard-module--AuthorList--12tT0"><li class="postCard-module--AuthorListItem--32xbX"><div class="postCard-module--AuthorNameTooltip--1xdhE">Ludovic Wyffels</div><a class="postCard-module--StaticAvatar--3PQRl" href="/author/ludo/"><img class="postCard-module--AuthorProfileImage--31jei" src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo"/></a></li></ul><span class="postCard-module--ReadingTime--3LVUu">14<!-- --> min read</span></footer></div></article><article class="postCard-module--container--3MBpY post-card "><a class="post-card-image-link postCard-module--PostCardImageLink--1-_rO" href="/git-flow/"><div class="post-card-image postCard-module--PostCardImage--1ooSS"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:61.505376344086024%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHLd3SQoD//xAAZEAACAwEAAAAAAAAAAAAAAAAAAgESIQP/2gAIAQEAAQUCVNnmSpGFmLMf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRABAAIDAAAAAAAAAAAAAAAAACExATJB/9oACAEBAAY/ApdQttlb/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBYYGx/9oACAEBAAE/IaOHqJg+Io5YgtYrlm09iTvP/9oADAMBAAIAAwAAABDT7//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCRj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQEBAAIDAQAAAAAAAAAAAAERACFBMVFhgf/aAAgBAQABPxAQhQtQietJZHLenHejKfTMgmjscy8F4tZAB/u//9k=" alt="GitFlow cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/6367e3250bf5dd6b3387bdab9a38b098/2f037/lumberjack.jpg 930w,
/static/6367e3250bf5dd6b3387bdab9a38b098/23f4e/lumberjack.jpg 1860w,
/static/6367e3250bf5dd6b3387bdab9a38b098/a41d1/lumberjack.jpg 2000w" sizes="(max-width: 2000px) 100vw, 2000px" /><img loading="lazy" sizes="(max-width: 2000px) 100vw, 2000px" srcset="/static/6367e3250bf5dd6b3387bdab9a38b098/2f037/lumberjack.jpg 930w,
/static/6367e3250bf5dd6b3387bdab9a38b098/23f4e/lumberjack.jpg 1860w,
/static/6367e3250bf5dd6b3387bdab9a38b098/a41d1/lumberjack.jpg 2000w" src="/static/6367e3250bf5dd6b3387bdab9a38b098/a41d1/lumberjack.jpg" alt="GitFlow cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content postCard-module--PostCardContent--LjkYR"><a class="postCard-module--PostCardContentLink--37umd" href="/git-flow/"><header><span class="postCard-module--PostCardTags--jyRjj"><span>#<!-- -->Git<!-- --> </span></span><h2 class="postCard-module--PostCardTitle--1JrkM">GitFlow</h2></header><section class="postCard-module--PostCardExcerpt--3gUSF"><p>Pourquoi avoir une stratégie d’utilisation de Git ? Git est puissant mais il est généralement mal utilisé. Et un outil mal utilisé peut vite…</p></section></a><footer class="postCard-module--PostCardMeta--2EEJ7"><ul class="postCard-module--AuthorList--12tT0"><li class="postCard-module--AuthorListItem--32xbX"><div class="postCard-module--AuthorNameTooltip--1xdhE">Ludovic Wyffels</div><a class="postCard-module--StaticAvatar--3PQRl" href="/author/ludo/"><img class="postCard-module--AuthorProfileImage--31jei" src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo"/></a></li></ul><span class="postCard-module--ReadingTime--3LVUu">19<!-- --> min read</span></footer></div></article></div></div></aside><footer class="outer, footer-module--siteFooter--1ncU1"><div class="inner, footer-module--content--3f5hY"><section class="copyright"><a href="/">Code avec Ludo</a> © <!-- -->2020<!-- --> </section><nav><a href="/">Latest Posts</a><a href="https://github.com/ludovicwyffels" target="_blank" rel="noopener noreferrer">Github</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/angular-dynamic-environment/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6724754fa77a53783161.js"],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-791b0082a8d4c32a1fed.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-a755419bd62d49b119ee.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-7d01e76bdd48f5d29d64.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-a2325355d1b45989f8ac.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-3a4a0b0b39e9622833de.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-56431b51ef70bfefb532.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-280776b695ec31b7d09b.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-a755419bd62d49b119ee.js" async=""></script><script src="/0236af8b77f5faa3b8b718fd6651682318b14e5d-8ca8147869df1097a087.js" async=""></script><script src="/commons-97558ea08fa7f76c1664.js" async=""></script><script src="/29107295-41804fe01aaec7b50b5b.js" async=""></script><script src="/styles-d395c19ae921add20f73.js" async=""></script><script src="/app-6724754fa77a53783161.js" async=""></script><script src="/framework-6465712a6c92a1af50c9.js" async=""></script><script src="/webpack-runtime-de59e2899aa2916b22ce.js" async=""></script></body></html>