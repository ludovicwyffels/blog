<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.5a281cbf59aff81516dd.css">.gatsby-highlight{font-size:.8em;margin-bottom:1.5em}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#c1def1}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#c1def1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #ddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #ddd}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:green;font-style:italic}.token.namespace{opacity:.7}.token.string{color:#a31515}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.inserted,.token.number,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.language-json .token.boolean,.language-json .token.number,.token.atrule,.token.attr-value,.token.keyword,code[class*=language-css]{color:#00f}.token.function{color:#393a34}.language-autohotkey .token.tag,.token.deleted{color:#9a050f}.language-autohotkey .token.keyword,.token.selector{color:#00009f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.language-json .token.property,.token.class-name{color:#2b91af}.token.selector,.token.tag{color:maroon}.token.attr-name,.token.entity,.token.property,.token.regex{color:red}.token.directive.tag .tag{background:#ff0;color:#393a34}.line-numbers .line-numbers-rows{border-right-color:#a5a5a5}.line-numbers-rows>span:before{color:#2b91af}.line-highlight{background:rgba(193,222,241,.2);background:-webkit-linear-gradient(left,rgba(193,222,241,.2) 70%,rgba(221,222,241,0));background:linear-gradient(90deg,rgba(193,222,241,.2) 70%,rgba(221,222,241,0))}:not(pre)>code{background-color:rgba(27,31,35,.05);margin:0;padding:.2em .4em}:not(pre)>code,pre{border-radius:3px;font-size:85%}pre{line-height:1.45;overflow:auto;padding:16px}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px dashed #ddd;text-decoration:none;transition:border .3s ease}.newer-posts{left:0}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.pagination{position:relative;width:100%;max-width:100%;margin:1rem auto;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;transition:all .2s ease}@media (max-width:500px){.hide{display:none}}</style><meta name="generator" content="Gatsby 2.17.14"/><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="canonical" href="https://ludovicwyffels.dev/angular-dynamic-environment/" data-baseprotocol="https:" data-basehost="ludovicwyffels.dev"/><title data-react-helmet="true">Gestion des environnements Angular en livraison continue</title><link data-react-helmet="true" rel="icon" href="/static/favicon-36e47e74810a0d8c32a77f495c49cf8e.ico" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="Mise en oeuvre de la configuration de l&#x27;environnement dynamique dans Angular pour √©viter un build par environnement"/><meta data-react-helmet="true" property="og:site_name" content="Code avec Ludo"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Gestion des environnements Angular en livraison continue"/><meta data-react-helmet="true" property="og:description" content="Mise en oeuvre de la configuration de l&#x27;environnement dynamique dans Angular pour √©viter un build par environnement"/><meta data-react-helmet="true" property="og:url" content="https://ludovicwyffels.github.io/angular-dynamic-environment/"/><meta data-react-helmet="true" property="og:image" content="https://ludovicwyffels.github.io/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2019-09-08T17:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="Angular"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Gestion des environnements Angular en livraison continue"/><meta data-react-helmet="true" name="twitter:description" content="Mise en oeuvre de la configuration de l&#x27;environnement dynamique dans Angular pour √©viter un build par environnement"/><meta data-react-helmet="true" name="twitter:url" content="https://ludovicwyffels.github.io/angular-dynamic-environment/"/><meta data-react-helmet="true" name="twitter:image" content="https://ludovicwyffels.github.io/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="ludo"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Angular"/><meta data-react-helmet="true" property="og:image:width" content="1280"/><meta data-react-helmet="true" property="og:image:height" content="853"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-138733938-1', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      
      
      
      
      
      }</script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-672f463e14ae01d98d1c.js"/><link as="script" rel="preload" href="/styles-f46ea2462799060ffa44.js"/><link as="script" rel="preload" href="/app-3d90e94e461e09477055.js"/><link as="script" rel="preload" href="/commons-e8050fbd89df581dd312.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-18e648153ce3e2733898.js"/><link as="fetch" rel="preload" href="/page-data/angular-dynamic-environment/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion-css="1f94ib9">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0);}body{overflow-x:hidden;color:#3b474d;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}::selection{text-shadow:none;background:#cbeafb;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote small:before{content:'\2014 \00A0';}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:700;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5rem;font-weight:700;}@media (max-width:500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2rem;}@media (max-width:500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width:500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#f4f8fb;}</style><style data-emotion-css="1mpact1">.css-1mpact1 .site-main{background:#fff;padding-bottom:4vw;}</style><style data-emotion-css="1tchvvq">.css-1tchvvq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-1tchvvq .site-main{background:#fff;padding-bottom:4vw;}</style><div class="css-1tchvvq e21u3lc0"><style data-emotion-css="7n4c3k">.css-7n4c3k{position:relative;padding:0 4vw;position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#0a0b0c no-repeat center center;background-size:cover;}</style><header class="css-7n4c3k"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><style data-emotion-css="1gzkrzj">.css-1gzkrzj{position:relative;z-index:300;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.25rem;}</style><nav class="css-1gzkrzj"><style data-emotion-css="72a8gi">.css-72a8gi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding-bottom:80px;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width:700px){.css-72a8gi{margin-right:0;padding-left:4vw;}}</style><div class="css-72a8gi e1psa8dr0"><style data-emotion-css="1trdsxq">.css-1trdsxq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;}.css-1trdsxq li{display:block;margin:0;padding:0;text-transform:uppercase;}.css-1trdsxq li a{display:block;margin:0;padding:10px 12px;color:#fff;opacity:0.8;}.css-1trdsxq li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}</style><ul role="menu" class="css-1trdsxq"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/node-js/">Node.js</a></li><li role="menuitem"><a href="/tags/dev-ops/">DevOps</a></li><li role="menuitem"><a href="/about">About</a></li></ul></div><style data-emotion-css="cniab2">.css-cniab2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;}@media (max-width:700px){.css-cniab2{display:none;}}</style><div class="css-cniab2 e1psa8dr1"><style data-emotion-css="1im5alu">.css-1im5alu{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1im5alu a:last-of-type{padding-right:20px;}</style><div class="css-1im5alu e1psa8dr2"><style data-emotion-css="1pe98dy">.css-1pe98dy{font-size:1.2em;font-weight:500;}</style><span class="css-1pe98dy"> Follow me </span><style data-emotion-css="1l1dftb">.css-1l1dftb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:10px;color:#fff;opacity:0.8;}.css-1l1dftb:hover{opacity:1;}.css-1l1dftb svg{height:1.8rem;fill:#fff;}</style><a href="https://github.com/ludovicwyffels" title="Github" target="_blank" rel="noopener noreferrer" class="css-1l1dftb"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></nav></div></header><style data-emotion-css="9696is">.css-9696is{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 4vw;}</style><main id="site-main" class="site-main css-9696is"><div class="css-s2cjas"><style data-emotion-css="1cj30xk">.css-1cj30xk{position:relative;z-index:50;}</style><article class="css-1cj30xk"><style data-emotion-css="29d3h2">.css-29d3h2{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center;}@media (max-width:500px){.css-29d3h2{padding:14vw 3vw 10vw;}}</style><header class="css-29d3h2 e1jujlwv0"><style data-emotion-css="1p0u1zc">.css-1p0u1zc{display:block;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.4rem;font-weight:600;text-transform:uppercase;}@media (max-width:500px){.css-1p0u1zc{font-size:1.2rem;line-height:1.3em;}}</style><section class="css-1p0u1zc e1jujlwv1"><style data-emotion-css="et0m70">.css-et0m70{color:#3eb0ef;}</style><time dateTime="2019-09-08T17:00:00.000Z" class="css-et0m70 e1jujlwv2">8 September 2019</time><style data-emotion-css="m5hopj">.css-m5hopj{display:inline-block;margin:0 6px 1px;}</style><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/angular/">#<!-- -->Angular</a><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/typescript/">#<!-- -->Typescript</a><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/node-js/">#<!-- -->Node.js</a><span class="css-m5hopj e1jujlwv5">/</span><a href="/tags/dev-ops/">#<!-- -->DevOps</a></section><style data-emotion-css="ldwdh4">.css-ldwdh4{margin:0;color:#0b0c0e;}@media (max-width:500px){.css-ldwdh4{font-size:2.9rem;}}</style><h1 class="css-ldwdh4 e1jujlwv3">Gestion des environnements Angular en livraison continue</h1></header><style data-emotion-css="3wq2tr">.css-3wq2tr{margin:0 -10vw -165px;height:800px;background:#c5d2d9 center center;background-size:cover;border-radius:5px;}@media (max-width:1170px){.css-3wq2tr{margin:0 -4vw -100px;height:calc(100vw / 16 * 9);border-radius:0;}}@media (max-width:800px){.css-3wq2tr{height:calc(100vw / 16 * 9);}}@media (max-width:500px){.css-3wq2tr{margin-bottom:4vw;height:calc(100vw / 16 * 9);}}</style><figure class="css-3wq2tr e1jujlwv4"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.640625%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGSyjpVIQD/xAAaEAEBAQADAQAAAAAAAAAAAAACAQMAERIh/9oACAEBAAEFAsR700BMKlkvVeifBPn/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPwHIRH//xAAbEAACAgMBAAAAAAAAAAAAAAAAARExAhASIv/aAAgBAQAGPwJJ0dYyoepR6ZZ//8QAGRABAQEBAQEAAAAAAAAAAAAAAQARMUEh/9oACAEBAAE/IQpM7+IwFOMhJie2P9Mlexf/2gAMAwEAAgADAAAAEMQP/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQMBAT8QiH//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EE6KaW2H/8QAGhABAQEAAwEAAAAAAAAAAAAAAREAITFBcf/aAAgBAQABPxB44qsZZqokmpY+XKXwX5l59YPJhhB4CazDXo3/2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/fc4a9d82e0465367f3d289f60d0b6834/f8f18/bloom.jpg 930w,
/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/fc4a9d82e0465367f3d289f60d0b6834/f8f18/bloom.jpg 930w,
/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg 1280w" src="/static/fc4a9d82e0465367f3d289f60d0b6834/c108b/bloom.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion-css="1ywavxh">.css-1ywavxh{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff;}@media (max-width:1170px){.css-1ywavxh{padding:5vw 7vw 0;}}@media (max-width:800px){.css-1ywavxh{font-size:1.9rem;}}.css-1ywavxh:before{content:'';position:absolute;top:15px;left:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg);}.css-1ywavxh:after{content:'';position:absolute;top:15px;right:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg);}.css-1ywavxh h1{text-align:center;}.css-1ywavxh h1,.css-1ywavxh h2,.css-1ywavxh h3,.css-1ywavxh h4,.css-1ywavxh h5,.css-1ywavxh h6,.css-1ywavxh p,.css-1ywavxh ul,.css-1ywavxh ol,.css-1ywavxh dl,.css-1ywavxh pre,.css-1ywavxh blockquote,.css-1ywavxh .post-full-comments,.css-1ywavxh .footnotes{min-width:100%;}.css-1ywavxh li{word-break:break-word;}.css-1ywavxh li p{margin:0;}.css-1ywavxh a{color:#000;word-break:break-word;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1ywavxh a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}.css-1ywavxh strong,.css-1ywavxh em{color:#0a0b0c;}.css-1ywavxh small{display:inline-block;line-height:1.6em;}.css-1ywavxh li:first-child{margin-top:0;}.css-1ywavxh .gatsby-resp-image-link{box-shadow:none;}.css-1ywavxh img,.css-1ywavxh video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width:1040px){.css-1ywavxh img,.css-1ywavxh video{width:100%;}}.css-1ywavxh img[src$='#full']{max-width:none;width:100vw;}.css-1ywavxh img + br + small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1ywavxh iframe{margin:0 auto !important;}.css-1ywavxh blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;text-align:left;font-size:0.8em;}.css-1ywavxh blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1ywavxh blockquote p:last-child{margin-bottom:0;}.css-1ywavxh .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em;}.css-1ywavxh hr{margin:4vw 0;}.css-1ywavxh hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1ywavxh h1,.css-1ywavxh h2,.css-1ywavxh h3,.css-1ywavxh h4,.css-1ywavxh h5,.css-1ywavxh h6{color:#0b0c0e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1ywavxh h1{margin:0.5em 0 0.2em 0;font-size:4.6rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h1{font-size:2.8rem;}}.css-1ywavxh h2{margin:0.5em 0 0.2em 0;font-size:3.6rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h2{font-size:2.6rem;}}.css-1ywavxh h3{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h3{font-size:2.2rem;}}.css-1ywavxh h4{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h4{font-size:2.2rem;}}.css-1ywavxh h5{display:block;margin:0.5em 0;padding:1em 0 1.5em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width:1180px){.css-1ywavxh h5{max-width:1060px;}}@media (max-width:500px){.css-1ywavxh h5{padding:0 0 0.5em;font-size:2.2rem;}}.css-1ywavxh h6{margin:0.5em 0 0.2em 0;font-size:2.3rem;font-weight:700;}@media (max-width:500px){.css-1ywavxh h6{font-size:2rem;}}.css-1ywavxh table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1ywavxh table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 0 center,radial-gradient(ellipse at right,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 100% center;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1ywavxh table td:first-child{background-image:linear-gradient( to right,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-size:20px 100%;background-repeat:no-repeat;}.css-1ywavxh table td:last-child{background-image:linear-gradient( to left,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat;}.css-1ywavxh table th{color:#15171A;font-size:1.2rem;font-weight:700;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1ywavxh table th,.css-1ywavxh table td{padding:6px 12px;border:#e9ebec 1px solid;}@media (max-width:500px){.css-1ywavxh{padding:0;}.css-1ywavxh:before{display:none;}.css-1ywavxh:after{display:none;}}</style><section class="post-full-content css-1ywavxh eeqhoro0"><div><p>Dans les applications m√©tiers, nous rencontrons souvent une configuration de livraison continue comportant plusieurs stages. Chaque √©tape a sa configuration pour acc√©der aux syst√®mes p√©riph√©riques sp√©cifiques √† l‚Äôenvironnement. Pour ce faire, nous devons g√©rer les configurations bas√©es sur les stages.</p>
<p>Angular CLI est livr√© avec certains concepts int√©gr√©s permettant de g√©rer diff√©rents environnements.</p>
<p>Mais quelle est leur fiabilit√© dans un environnement de livraison continu ? ü§î</p>
<h2>Livraison continue - une courte introduction</h2>
<p>La livraison continue r√©sulte du mouvement agile. La r√©troaction it√©rative est √† la base. Il est essentiel d‚Äôapprendre des exp√©riences pratiques et d‚Äôint√©grer ces commentaires.</p>
<p>La livraison continue prend des id√©es agiles et d√©finit une approche pour livrer des logiciels test√©s automatiquement dans des cycles courts.</p>
<blockquote>
<p>La diffusion continue consiste √† cr√©er un pipeline pour automatiser le processus de publication du logiciel</p>
</blockquote>
<h2>√âtapes de livraison continue</h2>
<p>Un sch√©ma typique dans la livraison continue est le <em>steging</em>. Dans une configuration de livraison continue typique, nous avons diff√©rents stages avec des objectifs diff√©rents.
Chaque validation entra√Æne une ex√©cution du pipeline sur notre serveur CI. Les ex√©cutions r√©ussies sur la branche <code>master</code> entra√Ænent un d√©ploiement sur l‚Äôun de nos stages.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1000px">
      <a class="gatsby-resp-image-link" href="/static/13c78901660c3a1ee09b0f1d126463e2/5d442/continuous-deployment.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:74%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACM0lEQVQoz41Ty27TQBS1+BV+hb9gyZIFX9AVG8QXFLHogkWlImVXJCgooikNIYQmcRInsePHeDx+x287fozDddNGgpaHNbKu7txz7rmPYbb/8dV1XZRlXW/Lsko3ebbJwQA/czcO/hDaZRfIsHdOCE2yjaBiP4qQbo95CfCU1r+DKSTJC8VeP3xzctDpbeutHyd5UWNrdfD68SX7LozLMS9WFa0oZeprAMCAW7fXimE5a59VyYPDoyfv2zTLJd0KohyZ3MmXR4PlW9cvWEEqq6oB76VKWJ8KSpSkjc6qaqvayvObW2CndRCHPO7ZniYTey6pUZIBivGiTZjkYMmGB0E75fWvtYAobLo1bWw/ih0/hLwQw7Dc1dPnL047/ePW8bOXh1le7LRU1xSa6QiIYMsBLeDf5IVmu3tyRhY6n85bIjbap6+6o4lMLBHrXhiZrqc7awMaECWgJYgTkDoTVXCGSRrE6T2jgiGNltLFcAbaojQDCsDziHC8hDDpDqdXs4WqkdGcz4uSadpBG420af5NvQtZO/s6XCoa0i3L9cM4lTRDt90fHL+QVKhFISbddfvOntw0CRICRjVsoFghTUC4Mxj3xpyEyVJWoQvMvftIb/dsCiDTBbyMiYLJxYDtDifEsFYyKco/gPfDB8kzEblBKGFDJuY3dsGtVIHgFvdhYLLM397DrcGJaCnK5/3h2eX3j91BfzL7PO/Lnsb88z014y0KzXJU00aGBQebtuUEcPUTlGpFB9V0AEcAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <picture>
        <source srcSet="/static/13c78901660c3a1ee09b0f1d126463e2/8ffb1/continuous-deployment.webp 293w, /static/13c78901660c3a1ee09b0f1d126463e2/17bf8/continuous-deployment.webp 585w, /static/13c78901660c3a1ee09b0f1d126463e2/cc0b3/continuous-deployment.webp 1000w" sizes="(max-width: 1000px) 100vw, 1000px" type="image/webp"/>
        <source srcSet="/static/13c78901660c3a1ee09b0f1d126463e2/f93ee/continuous-deployment.png 293w, /static/13c78901660c3a1ee09b0f1d126463e2/8c0a8/continuous-deployment.png 585w, /static/13c78901660c3a1ee09b0f1d126463e2/5d442/continuous-deployment.png 1000w" sizes="(max-width: 1000px) 100vw, 1000px" type="image/png"/>
        <img class="gatsby-resp-image-image" src="/static/13c78901660c3a1ee09b0f1d126463e2/5d442/continuous-deployment.png" alt="Continuous Deployment" title="Continuous Deployment" loading="lazy"/>
      </picture>
  </a>
    </span></p>
<p>Dans l‚Äôexemple ci-dessus, la phase de <code>test</code> contient une snapshot de la branche <code>master</code>. √Ä certains intervalles, par exemple, apr√®s chaque sprint, nous pouvons d√©ployer au stade interm√©diaire (<code>staging</code>). C‚Äôest √† ce stade que les tests de r√©ception finaux sont effectu√©s. Une fois accept√©, l‚Äôartefact est d√©plac√© en production.</p>
<p>Bien s√ªr, certaines entreprises ont un temps de production plus rapide. Certains d√©ploient m√™me chaque commit directement en production.</p>
<p>Mais dans la plupart des applications li√©es aux entreprises, il est bon d‚Äôavoir une √©tape avant la production. Cela permet √† nos <em>product owners</em>, repr√©sentants commerciaux et testeurs d‚Äôavoir un dernier aper√ßu et de v√©rifier la logique m√©tier.</p>
<h2>Build une fois - d√©ployer partout</h2>
<p>Il est essentiel de ne construire votre artefact qu‚Äôune seule fois et de le d√©placer d‚Äôune √©tape √† l‚Äôautre.
Cette approche garantit que le m√™me artefact qui a √©t√© test√© entre √©galement en production.</p>
<h2>Les environnements Angular et livraison continue, sont-il adapt√© ? ü§î</h2>
<p>Angular CLI est livr√©e avec un m√©canisme int√©gr√© de fichier d‚Äôenvironnement. Voyons comment ils fonctionnent.</p>
<p>Lors de la g√©n√©ration d‚Äôun tout nouveau projet, il existe un <code>environment.ts</code>et un <code>envrironment.prod.ts</code>. De plus, nous pouvons toujours ajouter √† ces fichiers de nouveaux fichiers d‚Äôenvironnement dans le dossier <code>environment</code> et les configurer dans votre fichier <code>angular.json</code>.</p>
<p>Pendant le build, l‚Äôenvironnement souhait√© est ensuite transmis en tant qu‚Äôargument √† la commande de build. Le CLI utilise ensuite le fichier d‚Äôenvironnement correct et remplace le fichier par d√©faut pendant le build, que nous pouvons ensuite importer avec la ligne suivante</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>environment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;../environments/environment&#x27;</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Maintenant que nous connaissons le concept int√©gr√© de la CLI angulaire. Voyons en quoi cela correspond aux principes de la livraison continue.</p>
<p>Il est donc essentiel de noter que Angular CLI d√©finit l‚Äôenvironnement pendant la construction. Cela signifie que nous devons cr√©er notre application avant chaque d√©ploiement sur une √©tape sp√©cifique.</p>
<p>Cette approche comporte quelques risques.</p>
<p>Si vous cr√©ez votre application √† chaque fois avant de d√©ployer, il se peut que l‚Äôartefact que vous avez test√© ne soit pas le m√™me que celui qui entre en production.</p>
<blockquote>
<p>Il est important de r√©aliser qu‚Äôun processus de build n‚Äôest pas toujours d√©terministe. M√™me si le m√™me code entre dans la construction, il n‚Äôest pas garanti que le m√™me artefact sortira.</p>
</blockquote>
<p>L‚Äôartefact ne d√©pend pas seulement de votre code, il d√©pend √©galement des biblioth√®ques tierces, des mises √† jour du syst√®me d‚Äôexploitation ou d‚Äôautres modifications de l‚Äôenvironnement qui se produisent avec le temps.</p>
<p>Rappelez-vous √† l‚Äô√©poque o√π nous avions un <code>package.lock.json</code>. √Ä l‚Äô√©poque, les builds √©taient encore moins pr√©dictives. Les biblioth√®ques tierces apparaissent souvent avec un <code>^</code> dans notre <code>package.json</code>. Malgr√© <code>semver</code>, les nouvelles versions d‚Äôune biblioth√®que tierce produisaient parfois une incompatibilit√© avec une autre d√©pendance qui entra√Ænait la rupture de votre application.</p>
<blockquote>
<p>Plus vous pouvez maintenir la coh√©rence entre les d√©ploiements, plus le d√©ploiement en production est susceptible de se d√©rouler sans heurts.</p>
</blockquote>
<p><strong>La livraison continue et les fichiers d‚Äôenvironnement fournis par Angular CLI ne conviennent pas!</strong></p>
<p><strong>Dans la livraison continue, votre artefact doit obtenir des configurations sp√©cifiques √† l‚Äôenvironnement au d√©marrage ou √† l‚Äôex√©cution. Angular CLI, en revanche, obtient ces configurations au moment du build.</strong></p>
<p>Alors, comment combiner les id√©es de la livraison continue avec notre application angulaire?</p>
<p>Il existe diff√©rentes approches pour combiner les id√©es de livraison continue avec Angular CLI. Chacun comporte des avantages et des inconv√©nients.</p>
<p>Regardons-les.</p>
<h2>Configurer l‚Äôh√¥te comme assets - Monter les fichiers de configuration par environnement</h2>
<p>Au lieu d‚Äôextraire la configuration sur un endpoint REST, nous extrayons directement un fichier JSON avec des configurations situ√©es dans notre dossier <code>assets</code>.</p>
<p>Nous allons donc cr√©er un dossier de <code>config</code> √† l‚Äôint√©rieur <code>assets</code> et y placer un <code>JSON</code> contenant les configurations sp√©cifiques √† l‚Äôenvironnement local.</p>
<p>Mais comment charge-t-on le fichier <code>configuration.json</code>? Au travers d‚Äôun service au travers duquel nous r√©cup√©rons le fichier √† partir du dossier <code>assets</code>.</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>Injectable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>HttpClient<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/common/http&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Observable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>shareReplay<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs/operators&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Configuration</span> <span class="token punctuation">{</span>
  resourceServerA<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  resourceServerB<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  stage<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>providedIn<span class="token punctuation">:</span> <span class="token string">&#x27;root&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ConfigAssetLoaderService</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token constant">CONFIG_URL</span> <span class="token operator">=</span> <span class="token string">&#x27;assets/config/config.json&#x27;</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> configuration$<span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span>Configuration<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> http<span class="token punctuation">:</span> HttpClient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">loadConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>configuration$<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>configuration$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span>Configuration<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONFIG_URL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">shareReplay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configuration$<span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><code>ConfigurationAssetsLoaderService</code> charge maintenant notre fichier <code>assets/config/config.json</code> qui contient toutes les configurations. Mais comment pouvons-nous changer ces configurations par rapport √† l‚Äôenvironnement actuel dans lequel nous nous trouvons?</p>
<p>Nous allons simplement h√©berger notre configuration sur chaque √©tape, puis monter le fichier <code>configuration.json</code> dans le dossier <code>assets</code>. Lorsque votre pod d√©marre, nous montons votre configuration dans le r√©pertoire <code>assets/config</code>.</p>
<p>Il est important de noter que vous cr√©ez un dossier <code>config</code> √† l‚Äôint√©rieur du dossier <code>assets</code>. Nous ne pouvons pas utiliser une hi√©rarchie √† plat. Lors du montage, tous les fichiers du dossier mont√© sont supprim√©s.</p>
<p>La mani√®re concr√®te de monter des volumes d√©pend de votre outil de CI. Sur mon projet, nous utilisons Kubernetes pour nos d√©ploiements. Kubernetes nous fournit des <code>ConfigMaps</code> qui peuvent √™tre une propri√©t√© ou m√™me un fichier de configuration complet. Donc, sur Kubernetes, nous avons diff√©rents stages. Chaque stage h√©berge ensuite des configurations sp√©cifiques et les monte dans notre dossier <code>assets/config</code> au d√©marrage du pod.</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset:linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /usr/share/nginx/html/assets/config
    <span class="token key atrule">name</span><span class="token punctuation">:</span> yourVolumeName</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Nous avons maintenant vu deux approches dont la mise en oeuvre c√¥t√© client est tr√®s similaire. Nous avons cr√©√© un service qui r√©cup√®re les configurations √† partir d‚Äôun endpoint REST ou du dossier <code>assets</code>.</p>
<p>Nous avons donc vu deux mani√®res d‚Äôutiliser un service pour acc√©der √† des configurations. Mais quand appelons-nous ces services?</p>
<p>Eh bien, r√©ponse courte, c‚Äôest √† vous de voir. Il y a des moments diff√©rents o√π il est logique de les appeler. Chacun vient avec des avantages et des inconv√©nients.</p>
<h2>Remplacer les configurations par environnement</h2>
<p>Dans cet exemple, nous utilisons les fichiers d‚Äôenvironnement Angular tels quels. Un <code>environment.ts</code>et un <code>environment.prod.ts</code>.</p>
<p>M√™me si nous avons plus de stages que la production et le d√©veloppement, nous distinguons seulement ces deux-l√†. Pour le d√©veloppement local, nous utilisons le fichier <code>environment.ts</code>. Tous les autres stages sont g√©r√©s par <code>environment.prod.ts</code>.</p>
<p>Mais comment ?</p>
<p>Notre <code>environment.prod.ts</code> ne contient pas les valeurs r√©elles; il contient des valeurs d‚Äôespace r√©serv√© qui seront √©cras√©es √† chaque √©tape par un script de construction.</p>
<p>Un exemple de fichier <code>environment.prod.ts</code> pourrait ressembler √† ceci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token punctuation">{</span>
  resourceServerA<span class="token punctuation">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_RESOURCEA&#x27;</span><span class="token punctuation">,</span>
  resourceServerB<span class="token punctuation">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_RESOURCEB&#x27;</span><span class="token punctuation">,</span>
  stage<span class="token punctuation">:</span> <span class="token string">&#x27;REPLACED_BY_BUILD_STAGE&#x27;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Lorsque nous d√©marrons notre serveur Web, nous pouvons ensuite utiliser un script <code>start.sh</code> qui remplacera les espaces r√©serv√©s.</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

<span class="token comment"># replace static values with environment-variables</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -n <span class="token string">&quot;<span class="token variable">$RESOURCEA</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">sed</span> -i <span class="token string">&quot;s#REPLACED_BY_BUILD_RESOURCEA#<span class="token variable">$AUTHSERVER_URL</span>#g&quot;</span> /usr/share/nginx/html/main.*.bundle.js
<span class="token keyword">fi</span>

<span class="token comment"># start webserver</span>
<span class="token builtin class-name">exec</span> nginx</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Nous ex√©cutons ensuite ce script au d√©marrage. Par exemple, dans notre fichier Docker.</p>
<div class="gatsby-highlight" data-language="dockerfile"><pre style="counter-reset:linenumber NaN" class="language-dockerfile line-numbers"><code class="language-dockerfile"><span class="token comment"># Dockerfile</span>
<span class="token punctuation">...</span>
<span class="token comment"># Start nginx via script, which replaces static urls with environment variables</span>
<span class="token keyword">ADD</span> start.sh /usr/share/nginx/start.sh
<span class="token keyword">RUN</span> chmod +x /usr/share/nginx/start.sh
<span class="token keyword">CMD</span> /usr/share/nginx/start.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Cette approche, du moins pour moi, est un peu ‚Äúhacky‚Äù. Remplacer des cha√Ænes dans un paquet n‚Äôest probablement pas le moyen le plus agr√©able. Il comporte en outre le risque de remplacer quelque chose qui ne devrait pas √™tre remplac√©.</p>
<p>Si vous d√©cidez quand m√™me d‚Äôutiliser cette approche, il est extr√™mement important d‚Äôavoir de bons espaces r√©serv√©s. Utilisez des caract√®res sp√©ciaux que vous n‚Äôutilisez g√©n√©ralement pas dans les noms de variables.</p>
<h2>Conclusion</h2>
<p>Angular est livr√© avec des fichiers d‚Äôenvironnement qui nous permettent de g√©rer des configurations sp√©cifiques √† l‚Äôenvironnement. Ils ne r√©pondent pas aux exigences d‚Äôune configuration de livraison continue.</p>
<p>Les fichiers d‚Äôenvironnement Angular sont utilis√©s pendant la phase de build. En mode de livraison continue, il est essentiel de d√©ployer le m√™me artefact √† diff√©rents stages. Par cons√©quent, nous devons transmettre les configurations d‚Äôenvironnement au d√©marrage ou √† l‚Äôex√©cution.</p>
<p>En fonction de votre configuration, nous pouvons charger des configurations via un service. Soit directement √† partir d‚Äôun backend ou de notre dossier d‚Äôactifs.</p>
<p>Il est donc recommand√© de les mettre en cache.</p>
<hr/>
<p>Un des gros d√©fauts de la fa√ßon dont Angular CLI traite les environnements, dans la culture DevOps c‚Äôest mieux de <strong>build une seule fois et de d√©ployer sur plusieurs environnements</strong>, hors Angular CLI veut que vous cr√©er un buildnpm s√©par√© par environnement.</p>
<p>Pourquoi devriez-vous build une seule fois et r√©utiliser cette version dans tous les environnements?</p>
<p>La raison pour laquelle vous ne souhaitez pas cr√©er une version distincte pour chaque environnement est la suivante:</p>
<ol>
<li>Cela ralentit les pipelines d‚Äôint√©gration continue (CI), car il doit cr√©er un build pour chaque environnement.</li>
<li>Cela augmente le risque d‚Äôerreurs / de diff√©rences dans diff√©rents environnements, car les versions sont s√©par√©es</li>
<li>Il ajoute des informations inutiles sur d‚Äôautres environnements dans le code</li>
<li>Pour des raisons de s√©curit√©, vous pourriez ne pas vouloir afficher d‚Äôinformations confidentielles dans la configuration de l‚Äôenvironnement, qui est enregistr√©e dans Git.</li>
</ol>
<p>Tous ces probl√®mes me font me demander pourquoi <strong>Angular CLI opte pour une version par environnement</strong>. Je voulais bien s√ªr une solution √† ces probl√®mes.</p>
<p>Comment ces probl√®mes sont-ils r√©solus ?</p>
<p>En faisant en sorte que le serveur de d√©ploiement <strong>substitue un fichier config.json, charg√© au moment de l‚Äôex√©cution</strong> par l‚Äôapplication.</p>
<h2>Faire en sorte qu‚Äôune application Angular utilise des configurations dynamiques</h2>
<p>Nous voulons que l‚Äôapplication Angular ne comporte que deux fichiers d‚Äôenvironnement: <code>environment.ts</code> et <code>environment.prod.ts</code>.</p>
<p>Pourquoi deux environnements, vous pouvez demander? Un pour les d√©veloppeurs locaux, o√π vous pouvez mettre ce que vous voulez pour servir localement et un autre pour cr√©er l‚Äôapplication. Ces fichiers d‚Äôenvironnement tirent l‚Äôessentiel de ses valeurs d‚Äôun fichier <code>app-config.json</code> charg√© lors de l‚Äôex√©cution, contrairement √† la codification en dur de toutes les informations sur l‚Äôenvironnement dans les fichiers d‚Äôenvironnement.</p>
<h2>Cr√©er une nouvelle application Angular</h2>
<p>La premi√®re √©tape consiste √† cr√©er une nouvelle application Angular en ouvrant le terminal, acc√©der au r√©pertoire souhait√© pour l‚Äôapplication et taper:</p>
<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset:linenumber NaN" class="language-bash line-numbers"><code class="language-bash">ng new dynamic-config-demo</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Et cela devrait cr√©er une nouvelle application Angular pour vous.</p>
<h2>Chargement du fichier config.json au d√©marrage</h2>
<p>Toute la configuration de l‚Äôenvironnement va √™tre stock√©e dans un fichier <code>app-config.json</code> utilis√© par le fichier <code>environment.ts</code> pour r√©f√©rencer ces valeurs en toute s√©curit√©.</p>
<p>Nous cr√©ons simplement un fichier JSON vide dans le dossier <code>assets</code> appel√© <code>app-config.json</code>.</p>
<p>L‚Äô√©tape suivante consiste √† <strong>charger le fichier config.json</strong> √† l‚Äôaide d‚Äôun service d‚Äôinitialisation <code>app.init.ts</code>:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;@angular/core&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">from</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> filter<span class="token punctuation">,</span> map<span class="token punctuation">,</span> switchMap<span class="token punctuation">,</span> tap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;rxjs/operators&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppInitService</span> <span class="token punctuation">{</span>

  <span class="token comment">// This is the method you want to call at bootstrap</span>
  <span class="token comment">// Important: It should return a Promise</span>
  <span class="token keyword">public</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">from</span><span class="token punctuation">(</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;assets/app-config.json&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span>config <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ce service s‚Äôex√©cutera au d√©marrage et garantira que la configuration de l‚Äôapplication est r√©cup√©r√©e en utilisant <code>fetch</code> pour obtenir le fichier de configuration, puis enregistrez-le dans <code>window</code> pour le rendre globalement disponible pour l‚Äôapplication. Notez que lorsque vous utilisez <code>fetch</code>, vous aurez peut-√™tre besoin de polyfills pour la prise en charge du navigateur IE.</p>
<p>Le service d‚Äôinitialisation d‚Äôapplication est configur√© dans le module <code>app.module</code> comme suit:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init_app</span><span class="token punctuation">(</span><span class="token parameter">appLoadService<span class="token punctuation">:</span> AppInitService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> appLoadService<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token punctuation">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">,</span> ComponentAComponent<span class="token punctuation">,</span> ComponentBComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>BrowserModule<span class="token punctuation">,</span> CoreModule<span class="token punctuation">,</span> HttpClientModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    AppInitService<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      provide<span class="token punctuation">:</span> <span class="token constant">APP_INITIALIZER</span><span class="token punctuation">,</span>
      useFactory<span class="token punctuation">:</span> init_app<span class="token punctuation">,</span>
      deps<span class="token punctuation">:</span> <span class="token punctuation">[</span>AppInitService<span class="token punctuation">]</span><span class="token punctuation">,</span>
      multi<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token punctuation">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>L‚Äôutilisation d‚Äôun service d‚Äôinitialisation d‚Äôapplication cr√©e un l√©ger retard sur le temps de d√©marrage de l‚Äôapplication, mais des √©l√©ments simples comme celui-ci n‚Äôauront pas d‚Äôimpact consid√©rable sur le temps de d√©marrage. N√©anmoins, je vous recommande d‚Äôindiquer √† vos utilisateurs d‚Äôattendre avec une spinner de chargement.</p>
<h2>Faire en sorte que les fichiers d‚Äôenvironnement utilisent des valeurs dynamiques</h2>
<p>Maintenant que nous chargeons le JSON de configuration de mani√®re dynamique et que nous les enregistrons dans <code>window</code>, nous voulons pouvoir les r√©f√©rencer en toute s√©curit√©. Pour ce faire, nous devrions avoir trois fichiers d‚Äôenvironnement: <code>environment</code>, <code>environment.prod</code> et <code>dynamic-environment</code>.</p>
<p><code>environment</code> est destin√© √† √™tre utilis√© localement, <code>environment.prod</code> est destin√© √† la production et <code>dynamic-environment</code> est partag√© avec <code>environment</code> et <code>environment.prod</code> afin de fournir une configuration dynamique.</p>
<p><code>dynamic-environment</code> ressemble √† ceci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token punctuation">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DynamicEnvironment</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">get</span> <span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>config<span class="token punctuation">.</span>environment<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ceci est utilis√© dans <code>environnement</code> comme celui-ci:</p>
<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset:linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> DynamicEnvironment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./dynamic-environment&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Environment</span> <span class="token keyword">extends</span> <span class="token class-name">DynamicEnvironment</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> production<span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>production <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> environment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Vous pouvez trouver une d√©monstration compl√®te d‚Äôune application angulaire √† configuration dynamique sur mon Github ici.</p>
<h2>Substitution du fichier config.json sur le serveur de d√©ploiement</h2>
<p>Maintenant que nous avons configur√© l‚Äôapplication pour la configuration dynamique, la prochaine √©tape consiste √† configurer le remplacement du fichier de configuration sur le serveur de d√©ploiement.</p>
<p>Vous pouvez faire cela en utilisant <strong>Octopus</strong>, qui a une fonction intelligente pour <strong>remplacer un fichier JSON</strong> par des valeurs de configuration pour l‚Äôenvironnement. Les autres serveurs de d√©ploiement devraient avoir des fonctionnalit√©s similaires pour substituer un fichier JSON juste avant de d√©ployer l‚Äôapplication sur le serveur frontal.</p>
<h2>Conclusion</h2>
<p>Nous avons discut√© des probl√®mes pos√©s par la m√©thode de ‚ÄúAngular CLI‚Äù pour g√©rer la configuration de l‚Äôenvironnement avec <strong>un build par environnement</strong>. Nous avons √©galement cherch√© √† d√©terminer l‚Äôint√©r√™t de <strong>build une version √† la fois</strong>. Nous avons examin√© comment impl√©menter cela √† l‚Äôaide d‚Äôun service app.init qui chargeait un fichier de configuration dynamique lors de l‚Äôinitialisation, avec des valeurs d√©finies par le serveur de d√©ploiement.</p></div><br/></section><style data-emotion-css="1a0mcpy">.css-1a0mcpy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 auto;padding:3vw 0 6vw 0;max-width:840px;}</style><footer class="css-1a0mcpy e7i2g8t0"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><section class="css-k008qs ejg85v20"><style data-emotion-css="2785xc">.css-2785xc{display:block;background:#e4eaed;border-radius:100%;object-fit:cover;margin-right:15px;width:60px;height:60px;}</style><img src="/static/5f2c129e42248a92c87b13b4293950cf/4e842/ghost.png" alt="ludo" class="css-2785xc"/><style data-emotion-css="fz4w57">.css-fz4w57 p{margin:0;color:#738a94;line-height:1.3em;}</style><section class="css-fz4w57 ejg85v22"><style data-emotion-css="1eii8n9">.css-1eii8n9{margin:8px 0 2px 0;padding:0;font-size:2rem;}.css-1eii8n9 a{color:#15171A;font-weight:700;}.css-1eii8n9 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h4 class="css-1eii8n9 ejg85v21"><a href="/author/ludo/">Wyffels Ludovic<!-- --> - @<!-- -->ludo</a></h4><p>D√©veloppeur senior. Fullstack + DevOps</p></section></section><style data-emotion-css="1zye22">.css-1zye22{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;}</style><div class="css-1zye22 efp23gn0"><style data-emotion-css="1hp0auc">.css-1hp0auc{display:block;padding:9px 16px;border:#adbac0 1px solid;color:#738a94;font-size:1.2rem;line-height:1;font-weight:500;border-radius:20px;-webkit-transition:all ease 0.2s;transition:all ease 0.2s;}.css-1hp0auc:hover{border-color:#3eb0ef;color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1hp0auc" href="/author/ludo/">Read More</a></div></footer></article></div></main><style data-emotion-css="1x0l29j">.css-1x0l29j{position:relative;padding:0 4vw;}</style><aside class="read-next css-1x0l29j"><div class="css-s2cjas"><style data-emotion-css="12kejdt">.css-12kejdt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0 0;}</style><div class="css-12kejdt e1jujlwv6"><style data-emotion-css="1jtzifo">.css-1jtzifo{position:relative;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171A center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;background-image:url(/static/9fb9647467dab072b9ebe36e9e52ae95/883ab/blog-cover.jpg);}.css-1jtzifo:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,0.8) 0%,rgba(0,20,40,0.7) 100%);border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);}</style><article class="css-1jtzifo ebc4v1c0"><style data-emotion-css="1d05jhl">.css-1d05jhl{position:relative;z-index:50;padding-top:20px;text-align:center;}</style><header class="css-1d05jhl ebc4v1c1"><style data-emotion-css="qbcumt">.css-qbcumt{display:block;font-size:1.3rem;line-height:1.3em;opacity:0.8;}</style><small class="css-qbcumt ebc4v1c2">‚Äî <!-- -->Code avec Ludo<!-- --> ‚Äî</small><style data-emotion-css="y0gtj6">.css-y0gtj6{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}.css-y0gtj6 a{color:#fff;font-weight:300;-webkit-text-decoration:none;text-decoration:none;}.css-y0gtj6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-y0gtj6 ebc4v1c3"><a href="/tags/angular/">Angular</a></h3></header><style data-emotion-css="1x76w68">.css-1x76w68{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:80px;}.css-1x76w68 svg{width:40px;fill:transparent;stroke:#fff;stroke-width:0.5px;stroke-opacity:0.65;}</style><div class="css-1x76w68 ebc4v1c4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><style data-emotion-css="1mqgav7">.css-1mqgav7{position:relative;z-index:50;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.7rem;}.css-1mqgav7 ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none;}.css-1mqgav7 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}.css-1mqgav7 li a{display:block;padding:20px 0;border-bottom:rgba(255,255,255,0.3) 1px solid;color:#fff;font-weight:500;vertical-align:top;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;}.css-1mqgav7 li:first-of-type a{padding-top:10px;}.css-1mqgav7 li a:hover{opacity:1;}</style><div class="css-1mqgav7 ebc4v1c5"><ul><li><a href="/angular-3way-communication/">3 fa√ßons de communiquer entre les composants Angular</a></li><li><a aria-current="page" class="" href="/angular-dynamic-environment/">Gestion des environnements Angular en livraison continue</a></li><li><a href="/angular-travis-ctci/">Angular DevOps: CT/CI avec Travis CI et Github Pages</a></li></ul></div><style data-emotion-css="t8u9qr">.css-t8u9qr{position:relative;margin:15px 0 3px 0;text-align:center;}.css-t8u9qr a{color:#fff;}</style><footer class="css-t8u9qr ebc4v1c6"><a href="/tags/angular/">See all 3 posts<!-- --> ‚Üí</a></footer></article><style data-emotion-css="1eugmea">.css-1eugmea{-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:300px;background:#fff center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;-webkit-transition:all 0.5s ease;transition:all 0.5s ease;}.css-1eugmea:hover{box-shadow:rgba(39,44,49,0.07) 8px 28px 50px,rgba(39,44,49,0.04) 1px 6px 12px;-webkit-transition:all 0.4s ease;transition:all 0.4s ease;-webkit-transform:translate3D(0,-1px,0) scale(1.02);-ms-transform:translate3D(0,-1px,0) scale(1.02);transform:translate3D(0,-1px,0) scale(1.02);}</style><article class="post-card  css-1eugmea"><style data-emotion-css="kufnxr">.css-kufnxr{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}</style><a class="post-card-image-link css-kufnxr" href="/node-logging/"><style data-emotion-css="8kte6t">.css-8kte6t{width:auto;height:200px;background:#c5d2d9 no-repeat center center;background-size:cover;}</style><div class="post-card-image css-8kte6t e4vx1ao0"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:63.4375%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAVth6Nm00L//xAAcEAABAwUAAAAAAAAAAAAAAAACAAERAxITIjP/2gAIAQEAAQUCEnQW5YdUH2DtK//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAABESEQIjEyUf/aAAgBAQAGPwK7UiE4ZGUan//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFRMf/aAAgBAQABPyG4NngZgcE8cR33EZWhVRQz/9oADAMBAAIAAwAAABAzL//EABYRAAMAAAAAAAAAAAAAAAAAAAEQUf/aAAgBAwEBPxARf//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxANn//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBcTFRYf/aAAgBAQABPxAYQbcl/Ik2gzSvXey61PSzZ5SfCxHAgzSKAqhn/9k=" alt="Journalisation: quelques r√®gles pratique cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/3105533b16c3c3b87bfb428faeeec641/f8f18/bloom-bee.jpg 930w,
/static/3105533b16c3c3b87bfb428faeeec641/c108b/bloom-bee.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/3105533b16c3c3b87bfb428faeeec641/f8f18/bloom-bee.jpg 930w,
/static/3105533b16c3c3b87bfb428faeeec641/c108b/bloom-bee.jpg 1280w" src="/static/3105533b16c3c3b87bfb428faeeec641/c108b/bloom-bee.jpg" alt="Journalisation: quelques r√®gles pratique cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion-css="123mfn9">.css-123mfn9{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="post-card-content css-123mfn9 e4vx1ao1"><style data-emotion-css="t0tfly">.css-t0tfly{position:relative;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:block;padding:25px 25px 0;color:#15171A;}.css-t0tfly:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-t0tfly" href="/node-logging/"><header class="post-card-header"><style data-emotion-css="z4f0wj">.css-z4f0wj{display:block;margin-bottom:4px;color:#738a94;font-size:1.2rem;line-height:1.15em;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-z4f0wj e4vx1ao2">Node.js</span><style data-emotion-css="8kn4zf">.css-8kn4zf{margin-top:0;}</style><h2 class="css-8kn4zf e4vx1ao3">Journalisation: quelques r√®gles pratique</h2></header><style data-emotion-css="1pcdrot">.css-1pcdrot{font-family:Georgia,serif;}</style><section class="css-1pcdrot e4vx1ao4"><p> <!-- -->Apprenez comment tirer le meilleur parti de la journalisation</p></section></a><style data-emotion-css="1uyhyqd">.css-1uyhyqd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:0 25px 25px;}</style><footer class="post-card-meta css-1uyhyqd e4vx1ao5"><style data-emotion-css="rv6jj5">.css-rv6jj5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap-reverse;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;margin:0;padding:0;list-style:none;}</style><ul class="css-rv6jj5 e4vx1ao6"></ul><style data-emotion-css="zb10i8">.css-zb10i8{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;color:#738a94;font-size:1.2rem;line-height:33px;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-zb10i8 e4vx1ao7">14<!-- --> min read</span></footer></div></article></div></div></aside><style data-emotion-css="ls7udo">.css-ls7udo{position:relative;padding:0 4vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-ls7udo"><style data-emotion-css="t78pr">.css-t78pr{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255,255,255,0.7);font-size:1.3rem;}.css-t78pr a{color:rgba(255,255,255,0.7);}.css-t78pr a:hover{color:rgba(255,255,255,1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width:650px){.css-t78pr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-t78pr"><section class="copyright"><a href="/">Code avec Ludo</a> ¬© <!-- -->2019</section><style data-emotion-css="j0kq43">.css-j0kq43{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-j0kq43 a{position:relative;margin-left:20px;}.css-j0kq43 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-j0kq43 a:first-of-type:before{display:none;}@media (max-width:650px){.css-j0kq43 a:first-child{margin-left:0;}}</style><nav class="css-j0kq43 ezq0cw30"><a href="/privacy">Privacy</a><a href="/terms">Terms</a><a href="https://github.com/ludovicwyffels" target="_blank" rel="noopener noreferrer">Github</a><a href="https://gitlab.com/ludovic.wyffels" target="_blank" rel="noopener noreferrer">GitLab</a></nav></div></footer></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/angular-dynamic-environment/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3d90e94e461e09477055.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-18e648153ce3e2733898.js"],"component---src-templates-blog-tsx":["/component---src-templates-blog-tsx-3d6008871ccd01703c62.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-9189e8b646bbd41f8491.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-5557405408872f1e5f89.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-6662ec576f623a6ba122.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-9688f76fd6da024968de.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-3c71d4dbc2a33f8945c0.js"],"component---src-pages-privacy-tsx":["/component---src-pages-privacy-tsx-0f88e6b04aef2b6a41c4.js"],"component---src-pages-terms-tsx":["/component---src-pages-terms-tsx-3faf725ce5aaae1b360e.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-18e648153ce3e2733898.js" async=""></script><script src="/commons-e8050fbd89df581dd312.js" async=""></script><script src="/app-3d90e94e461e09477055.js" async=""></script><script src="/styles-f46ea2462799060ffa44.js" async=""></script><script src="/webpack-runtime-672f463e14ae01d98d1c.js" async=""></script></body></html>