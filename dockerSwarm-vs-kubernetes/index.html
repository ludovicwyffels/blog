<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.5288cde64b59aff2f8d2.css">.authorCard-module--authorCardSection--3Xspq{display:flex}.authorCard-module--authorCardName--3HnMH{margin:8px 0 2px;padding:0;font-size:2rem}.authorCard-module--authorCardName--3HnMH a{color:#000;font-weight:700}.authorCard-module--authorCardName--3HnMH a:hover{text-decoration:none}.authorCard-module--authorCardContent--3jBBV p{margin:0;color:#647a83;line-height:1.3em}.siteNavLogo-module--container--2Eieh{flex-shrink:0;display:block;margin-right:24px;padding:11px 0;color:#fff;font-size:1.7rem;line-height:1em;font-weight:700;letter-spacing:-.5px}.siteNavLogo-module--container--2Eieh:hover{text-decoration:none}.siteNavLogo-module--container--2Eieh img{display:block;width:auto;height:21px}.footer-module--siteFooter--1ncU1{position:relative;padding:20px 4vw 60px;color:#fff;background:#000}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;color:hsla(0,0%,100%,.7);font-size:1.3rem}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY a{color:hsla(0,0%,100%,.7)}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY a:hover{color:#fff;text-decoration:none}@media (max-width:650px){.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY{flex-direction:column}}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav{display:flex}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a{position:relative;margin-left:20px}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:before{content:"";position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%}.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:first-of-type:before{display:none}@media (max-width:650px){.footer-module--siteFooter--1ncU1 .footer-module--content--3f5hY nav a:first-of-type{margin-left:0}}.shared-module--outer--3ayIs{position:relative;padding:0 4vw}.shared-module--inner--35I1L{margin:0 auto;max-width:1040px;width:100%}.shared-module--SiteMain--1L3AH{z-index:100;flex-grow:1}.shared-module--SiteTitle--LzNSD{z-index:10;margin:0;padding:0;font-size:3.8rem;font-weight:700}.shared-module--SiteDescription--xZ-xT{z-index:10;margin:0;padding:5px 0;font-size:2.2rem;font-weight:300;letter-spacing:.5px;opacity:.8}.shared-module--PostFeed--yxeHl{position:relative;display:flex;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0}@media (min-width:900px){.shared-module--PostFeedRaise--3lm-9{margin-top:-70px;padding-top:0}}.shared-module--SocialLink--Ya1gh{display:flex;justify-content:center;align-items:center;margin:0;padding:10px;color:#fff;opacity:.8}.shared-module--SocialLink--Ya1gh:hover{opacity:1}.shared-module--SocialLink--Ya1gh svg{height:1.8rem;fill:#fff}.shared-module--SiteHeader--11Q-_{position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#15171a no-repeat 50%;background-size:cover}.shared-module--SiteHeaderContent--EPPk3{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10vw 4vw;min-height:200px;max-height:450px;text-align:center}.shared-module--SiteHeaderStyles--2X95r{content:"";position:absolute;top:0;right:0;bottom:auto;left:0;z-index:10;display:block;height:80px;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.1)),to(transparent));background:linear-gradient(rgba(0,0,0,.1),transparent)}.shared-module--SiteHeaderStyles--2X95r:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:10;display:block;background:rgba(0,0,0,.18)}.shared-module--SiteHeaderStyles--2X95r:after{content:"";position:absolute;top:0;right:0;bottom:auto;left:0;z-index:10;display:block;height:80px;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.1)),to(transparent));background:linear-gradient(rgba(0,0,0,.1),transparent)}@media (max-width:700px){.shared-module--SiteHeaderStyles--2X95r{padding-right:0;padding-left:0}}.shared-module--AuthorProfileImage--3bfVw{display:block;background:#c5d2d9;border-radius:100%;-o-object-fit:cover;object-fit:cover;margin-right:15px;width:60px;height:60px}.sitenav-module--container--2f7Mf{position:relative;z-index:300;display:flex;justify-content:space-between;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.2rem}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavLeft--37Wnn{display:flex;align-items:center;overflow-x:auto;overflow-y:hidden;margin-right:10px;padding-bottom:80px;letter-spacing:.4px;white-space:nowrap;-webkit-overflow-scrolling:touch;-ms-overflow-scrolling:touch}@media (max-width:700px){.sitenav-module--container--2f7Mf .sitenav-module--SiteNavLeft--37Wnn{margin-right:0;padding-left:4vw}}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa{flex-shrink:0;display:flex;align-items:center;height:40px}@media (max-width:700px){.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa{display:none}}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SocialLinks--3bj4A{flex-shrink:0;display:flex;align-items:center}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SocialLinks--3bj4A a:last-of-type{padding-right:20px}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SubscribeButton--3gIQb{display:block;padding:4px 10px;border:1px solid #fff;color:#fff;font-size:1.2rem;line-height:1em;border-radius:10px;opacity:.8}.sitenav-module--container--2f7Mf .sitenav-module--SiteNavRight--2MOoa .sitenav-module--SubscribeButton--3gIQb :hover{text-decoration:none;opacity:1;cursor:pointer}@media (min-width:900px){.sitenav-module--HomeNavRaise--2C7hy{position:relative;top:-70px}}SiteNavStyles{position:relative;z-index:300;display:flex;justify-content:space-between;align-items:flex-start;overflow-y:hidden;height:40px;font-size:1.2rem}.sitenav-module--NavStyles--gmMAk{display:flex;margin:0 0 0 -12px;padding:0;list-style:none}.sitenav-module--NavStyles--gmMAk li{display:block;margin:0;padding:0;text-transform:uppercase}.sitenav-module--NavStyles--gmMAk li a{display:block;margin:0;padding:10px 12px;color:#fff;opacity:.8}.sitenav-module--NavStyles--gmMAk li a:hover{text-decoration:none;opacity:1}.postCard-module--container--3MBpY{flex:1 1 300px;display:flex;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:300px;background:#fff 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);-webkit-transition:all .5s ease;transition:all .5s ease}.postCard-module--container--3MBpY:hover{box-shadow:8px 28px 50px rgba(39,44,49,.07),1px 6px 12px rgba(39,44,49,.04);-webkit-transition:all .4s ease;transition:all .4s ease;-webkit-transform:translate3D(0,-1px,0) scale(1.02);transform:translate3D(0,-1px,0) scale(1.02)}.postCard-module--PostCardImageLink--1-_rO{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0}.postCard-module--PostCardImage--1ooSS{width:auto;height:200px;background:#d3d3d3 no-repeat 50%;background-size:cover}.postCard-module--PostCardContent--LjkYR{flex-grow:1;display:flex;flex-direction:column;justify-content:space-between}.postCard-module--PostCardContentLink--37umd{position:relative;flex-grow:1;display:block;padding:25px 25px 0;color:#15171a}.postCard-module--PostCardContentLink--37umd:hover{text-decoration:none}.postCard-module--PostCardTags--jyRjj{display:block;margin-bottom:4px;color:#647a83;font-size:1.2rem;line-height:1.15em;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.postCard-module--PostCardTitle--1JrkM{margin-top:0}.postCard-module--PostCardExcerpt--3gUSF{font-family:Georgia,serif}.postCard-module--PostCardMeta--2EEJ7{display:flex;justify-content:space-between;align-items:flex-end;padding:0 25px 25px}.postCard-module--AuthorList--12tT0{display:flex;flex-wrap:wrap-reverse;margin:0;padding:0;list-style:none}.postCard-module--AuthorListItem--32xbX{position:relative;flex-shrink:0;margin:0;padding:0}.postCard-module--AuthorListItem--32xbX :first-of-type{z-index:10}.postCard-module--AuthorListItem--32xbX :nth-of-type(2){z-index:9}.postCard-module--AuthorListItem--32xbX :nth-of-type(3){z-index:8}.postCard-module--AuthorListItem--32xbX :nth-of-type(4){z-index:7}.postCard-module--AuthorListItem--32xbX :nth-of-type(5){z-index:6}.postCard-module--AuthorListItem--32xbX :nth-of-type(6){z-index:5}.postCard-module--AuthorListItem--32xbX :nth-of-type(7){z-index:4}.postCard-module--AuthorListItem--32xbX :nth-of-type(8){z-index:3}.postCard-module--AuthorListItem--32xbX :nth-of-type(9){z-index:2}.postCard-module--AuthorListItem--32xbX :nth-of-type(10){z-index:1}.postCard-module--AuthorListItem--32xbX:hover .postCard-module--AuthorNameTooltip--1xdhE{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}.postCard-module--AuthorNameTooltip--1xdhE{position:absolute;bottom:105%;z-index:999;display:block;padding:2px 8px;color:#fff;font-size:1.2rem;letter-spacing:.2px;white-space:nowrap;background:#15171a;border-radius:3px;box-shadow:0 12px 26px rgba(39,44,49,.08),1px 3px 8px rgba(39,44,49,.03);opacity:0;-webkit-transition:all .3s cubic-bezier(.4,.01,.165,.99);transition:all .3s cubic-bezier(.4,.01,.165,.99);-webkit-transform:translateY(6px);transform:translateY(6px);pointer-events:none}@media (max-width:650px){.postCard-module--AuthorNameTooltip--1xdhE{display:none}}.postCard-module--StaticAvatar--3PQRl{display:block;overflow:hidden;margin:0 -5px;width:34px;height:34px;border:2px solid #fff;border-radius:100%}.postCard-module--AuthorProfileImage--31jei{display:block;width:100%;height:100%;background:#c5d2d9;border-radius:100%;-o-object-fit:cover;object-fit:cover}.postCard-module--ReadingTime--3LVUu{flex-shrink:0;margin-left:20px;color:#647a83;font-size:1.2rem;line-height:33px;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.PostFullContent{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff}@media (max-width:1170px){.PostFullContent{padding:5vw 7vw 0}}@media (max-width:800px){.PostFullContent{font-size:1.9rem}}.PostFullContent:before{left:-5px;-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}.PostFullContent:after,.PostFullContent:before{content:"";position:absolute;top:15px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,.15);-webkit-filter:blur(5px);filter:blur(5px)}.PostFullContent:after{right:-5px;-webkit-transform:rotate(5deg);transform:rotate(5deg)}.PostFullContent .footnotes,.PostFullContent .post-full-comments,.PostFullContent blockquote,.PostFullContent dl,.PostFullContent h1,.PostFullContent h2,.PostFullContent h3,.PostFullContent h4,.PostFullContent h5,.PostFullContent h6,.PostFullContent ol,.PostFullContent p,.PostFullContent pre,.PostFullContent ul{min-width:100%}.PostFullContent li{word-break:break-word}.PostFullContent li p{margin:0}.PostFullContent a{color:#000;word-break:break-word;box-shadow:inset 0 -1px 0 #0f7dba}.PostFullContent a:hover{color:#0f7dba;text-decoration:none}.PostFullContent em,.PostFullContent strong{color:#15171a}.PostFullContent small{display:inline-block;line-height:1.6em}.PostFullContent li:first-of-type{margin-top:0}.PostFullContent .gatsby-resp-image-link{box-shadow:none}.PostFullContent img,.PostFullContent video{display:block;margin:1.5em auto;max-width:1040px;height:auto}@media (max-width:1040px){.PostFullContent img,.PostFullContent video{width:100%}}.PostFullContent img[src$="#full"]{max-width:none;width:100vw}.PostFullContent img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center}.PostFullContent iframe{margin:0 auto!important}.PostFullContent blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:3px solid #0f7dba}.PostFullContent blockquote p{margin:0 0 1em;color:inherit;font-size:inherit;line-height:inherit;font-style:italic}.PostFullContent blockquote p:last-child{margin-bottom:0}.PostFullContent code{padding:0 5px 2px;font-size:.8em;line-height:1em;font-weight:400!important;background:#e5eff5;border-radius:3px}.PostFullContent p code{word-break:break-all}.PostFullContent pre{overflow-x:auto;padding:20px;max-width:100%;border:1px solid #15171a;color:#e5eff5;font-size:1.4rem;line-height:1.5em;background:#15171a;border-radius:5px}.PostFullContent pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent}.PostFullContent pre code :not(span){color:inherit}.PostFullContent .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em}.PostFullContent hr{margin:4vw 0}.PostFullContent hr:after{content:"";position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#c5d2d9;box-shadow:0 0 0 5px #fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.PostFullContent h1,.PostFullContent h2,.PostFullContent h3,.PostFullContent h4,.PostFullContent h5,.PostFullContent h6{color:#15171a;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.PostFullContent h1{margin:.5em 0 .2em;font-size:4.6rem;font-weight:700}@media (max-width:500px){.PostFullContent h1{font-size:2.8rem}}.PostFullContent h2{margin:.5em 0 .2em;font-size:3.6rem;font-weight:700}@media (max-width:500px){.PostFullContent h2{font-size:2.6rem}}.PostFullContent h3{margin:.5em 0 .2em;font-size:2.8rem;font-weight:700}@media (max-width:500px){.PostFullContent h3{font-size:2.2rem}}.PostFullContent h4{margin:.5em 0 .2em;font-size:2.8rem;font-weight:700}@media (max-width:500px){.PostFullContent h4{font-size:2.2rem}}.PostFullContent h5{display:block;margin:.5em 0;padding:1em 0 1.5em;border:0;color:#0f7dba;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center}@media (min-width:1180px){.PostFullContent h5{max-width:1060px}}@media (max-width:500px){.PostFullContent h5{padding:0 0 .5em;font-size:2.2rem}}.PostFullContent h6{margin:.5em 0 .2em;font-size:2.3rem;font-weight:700}@media (max-width:500px){.PostFullContent h6{font-size:2rem}}.PostFullContent table{display:inline-block;overflow-x:auto;margin:.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,.2) 0,transparent 75%) 0,radial-gradient(ellipse at right,rgba(0,0,0,.2) 0,transparent 75%) 100%;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat}.PostFullContent table td:first-of-type{background-image:-webkit-gradient(linear,left top,right top,color-stop(50%,#fff),to(hsla(0,0%,100%,0)));background-image:linear-gradient(90deg,#fff 50%,hsla(0,0%,100%,0));background-size:20px 100%;background-repeat:no-repeat}.PostFullContent table td:last-child{background-image:-webkit-gradient(linear,right top,left top,color-stop(50%,#fff),to(hsla(0,0%,100%,0)));background-image:linear-gradient(270deg,#fff 50%,hsla(0,0%,100%,0));background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat}.PostFullContent table th{color:#15171a;font-size:1.2rem;font-weight:700;letter-spacing:.2px;text-align:left;text-transform:uppercase;background-color:#e5eff5}.PostFullContent table td,.PostFullContent table th{padding:6px 12px;border:1px solid #e5eff5}@media (max-width:500px){.PostFullContent{padding:0}.PostFullContent :after,.PostFullContent :before{display:none}}.PostFullContent code[class*=language-],.PostFullContent pre[class*=language-]{background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.PostFullContent pre[class*=language-]{overflow:auto;padding:1.3125rem}.PostFullContent pre[class*=language-]::selection{background:#27292a}.PostFullContent pre[class*=language-]::selection,.PostFullContent pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}.PostFullContent :not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.PostFullContent .token.attr-name{color:#addb67;font-style:italic}.PostFullContent .token.comment{color:#809393}.PostFullContent .token.string,.PostFullContent .token.url{color:#addb67}.PostFullContent .token.variable{color:#d6deeb}.PostFullContent .token.number{color:#f78c6c}.PostFullContent .token.builtin,.PostFullContent .token.char,.PostFullContent .token.constant,.PostFullContent .token.function{color:#82aaff}.PostFullContent .token.punctuation{color:#c792ea}.PostFullContent .token.doctype,.PostFullContent .token.selector{color:#c792ea;font-style:italic}.PostFullContent .token.class-name{color:#ffcb8b}.PostFullContent .token.keyword,.PostFullContent .token.operator,.PostFullContent .token.tag{color:#ffa7c4}.PostFullContent .token.boolean{color:#ff5874}.PostFullContent .token.property{color:#80cbc4}.PostFullContent .token.namespace{color:#b2ccd6}.PostFullContent pre[data-line]{padding:1em 0 1em 3em;position:relative}.PostFullContent .gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.PostFullContent .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.PostFullContent .gatsby-highlight{border-radius:0}}.PostFullContent .gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.postFullFooter-module--container--2PA5n{display:flex;justify-content:space-between;align-items:center;margin:0 auto;padding:3vw 0 6vw;max-width:840px}.postFullFooterRight-module--container--1A7hv{flex-shrink:0;margin-left:20px}.postFullFooterRight-module--container--1A7hv .postFullFooterRight-module--authorCardButton--2Zo5V{display:block;padding:9px 16px;border:1px solid #647b84;color:#647a83;font-size:1.2rem;line-height:1;font-weight:500;border-radius:20px;-webkit-transition:all .2s ease;transition:all .2s ease}.postFullFooterRight-module--container--1A7hv .postFullFooterRight-module--authorCardButton--2Zo5V:hover{border-color:#0f7dba;color:#0f7dba;text-decoration:none}.wrapper-module--container--39cxo{display:flex;flex-direction:column;min-height:100vh}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}img{max-width:100%}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{margin:.67em 0;font-size:2em}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit}button{overflow:visible;border:none}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input{line-height:normal}input:focus{outline:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{box-sizing:content-box;-webkit-appearance:textfield}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{padding:0;border:0}textarea{overflow:auto}table{border-spacing:0;border-collapse:collapse}td,th{padding:0}html{overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{overflow-x:hidden}body{color:#2d373b;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.5rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on}::selection{text-shadow:none;background:#6fc4f3}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{margin:0;padding:0;border:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}ol,ul{max-width:100%}li{margin:.5em 0;padding-left:.3em;line-height:1.6em}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171a;font-weight:500;text-align:right}dd{margin:0 0 5px;text-align:left}blockquote{margin:1.5em 0;padding:0 1.6em;border-left:.5em solid #e5eff5}blockquote p{margin:.8em 0;font-size:1.2em;font-weight:300}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;opacity:.8}blockquote small:before{content:"\\2014 \\00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#0d6da2;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:700;text-rendering:optimizeLegibility}h1{margin:0 0 .5em;font-size:5rem;font-weight:700}@media (max-width:500px){h1{font-size:2.2rem}}h2{margin:1.5em 0 .5em;font-size:2rem}@media (max-width:500px){h2{font-size:1.8rem}}h3{margin:1.5em 0 .5em;font-size:1.8rem;font-weight:500}@media (max-width:500px){h3{font-size:1.7rem}}h4{margin:1.5em 0 .5em;font-size:1.6rem;font-weight:500}h5,h6{margin:1.5em 0 .5em;font-size:1.4rem;font-weight:500}body{background:#f4f8fb}.pagination-module--container--jH0P2{padding:0 4vw 4vh;background:#fff;text-align:center}.pagination-module--container--jH0P2 div{display:inline-block}.pagination-module--container--jH0P2 a{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell;background:#fff;color:#000;float:left;padding:8px 16px;text-decoration:none;-webkit-transition:background-color .3s;transition:background-color .3s;border:1px solid #ddd;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);border-radius:6px;margin:0 4px 5px;min-width:50px}.pagination-module--container--jH0P2 a.pagination-module--active--2gHKl{box-shadow:inset 3px 0 0 0 #141619}.pagination-module--container--jH0P2 a:hover:not(.pagination-module--active--2gHKl){background-color:#ddd}.pagination-module--container--jH0P2 a:hover{text-decoration:none}.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{padding:8px;min-width:40px;pointer-events:none;cursor:default;opacity:.6}@media (max-width:550px){.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{min-width:30px}}@media (max-width:400px){.pagination-module--container--jH0P2 .pagination-module--ellipsis--xvUoZ{display:none}}@media (max-width:550px){.pagination-module--container--jH0P2 .pagination-module--next--1rF_K,.pagination-module--container--jH0P2 .pagination-module--previous--WUxFk{display:none}}.readNextCard-module--container--J4I2n{position:relative;flex:1 1 300px;display:flex;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171a 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03)}.readNextCard-module--container--J4I2n:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,.8),rgba(0,20,40,.7));border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.readNextCard-module--ReadNextCardHeader--3M6PZ{position:relative;z-index:50;padding-top:20px;text-align:center}.readNextCard-module--ReadNextCardHeaderSitetitle--1FkpC{display:block;font-size:1.3rem;line-height:1.3em;opacity:.8}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;letter-spacing:1px}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx a{color:#fff;font-weight:300;text-decoration:none}.readNextCard-module--ReadNextCardHeaderTitle--3qnwx a:hover{text-decoration:none}.readNextCard-module--ReadNextDivider--1WD0f{position:relative;display:flex;justify-content:center;height:80px}.readNextCard-module--ReadNextDivider--1WD0f svg{width:40px;fill:transparent;stroke:#fff;stroke-width:.5px;stroke-opacity:.65}.readNextCard-module--ReadNextCardContent--phuA0{position:relative;z-index:50;flex-grow:1;display:flex;font-size:1.7rem}.readNextCard-module--ReadNextCardContent--phuA0 ul{display:flex;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none}.readNextCard-module--ReadNextCardContent--phuA0 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;letter-spacing:-.5px}.readNextCard-module--ReadNextCardContent--phuA0 li a{display:block;padding:20px 0;border-bottom:1px solid hsla(0,0%,100%,.3);color:#fff;font-weight:500;vertical-align:top;-webkit-transition:opacity .3s ease;transition:opacity .3s ease}.readNextCard-module--ReadNextCardContent--phuA0 li:first-of-type a{padding-top:10px}.readNextCard-module--ReadNextCardContent--phuA0 li a:hover{opacity:1}.readNextCard-module--ReadNextCardFooter--jt8zz{position:relative;margin:15px 0 3px;text-align:center}.readNextCard-module--ReadNextCardFooter--jt8zz a{color:#fff}#site-main{background:#fff;padding-bottom:4vw}.PostFull{position:relative;z-index:50}.NoImage .post-full-content{padding-top:0}.NoImage .post-full-content:after,.NoImage .post-full-content:before{display:none}.PostFullHeader{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center}@media (max-width:500px){.PostFullHeader{padding:14vw 3vw 10vw}}.PostFullMeta{display:flex;justify-content:center;align-items:center;color:#647a83;font-size:1.4rem;font-weight:600;text-transform:uppercase}@media (max-width:500px){.PostFullMeta{font-size:1.2rem;line-height:1.3em}}.PostFullMetaDate{color:#0f7dba}.PostFullTitle{margin:0;color:#15171a}@media (max-width:500px){.PostFullTitle{font-size:2.9rem}}.PostFullImage{margin:0 -10vw -165px;height:800px;background:#c5d2d9 50%;background-size:cover;border-radius:5px}@media (max-width:1170px){.PostFullImage{margin:0 -4vw -100px;height:600px;border-radius:0}}@media (max-width:800px){.PostFullImage{height:400px}}@media (max-width:500px){.PostFullImage{margin-bottom:4vw;height:350px}}.DateDivider{display:inline-block;margin:0 6px 1px}.ReadNextFeed{display:flex;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0}.progress-read-module--container--Xf3HB{background:#e5eff5;height:5px;width:100vw;opacity:1%;position:fixed;top:0;z-index:200}.progress-read-module--container--Xf3HB .progress-read-module--bar--2CgAA{background:#0f7dba;height:100%}site-main{background:#fff;padding-bottom:4vw}._404-module--siteNavCenter--1xW_t{display:flex;justify-content:center;align-items:center;text-align:center}._404-module--siteNavCenter--1xW_t .site-nav-logo{margin-right:0}._404-module--errorTemplate--2Q6Vk{padding:7vw 4vw}._404-module--errorTemplate--2Q6Vk ._404-module--errorCode--Iss6n{margin:0;font-size:12vw;line-height:1em;letter-spacing:-5px;opacity:.3}._404-module--errorTemplate--2Q6Vk ._404-module--errorDescription--1CGfX{margin:0;color:#647a83;font-size:3rem;line-height:1.3em;font-weight:400}._404-module--errorTemplate--2Q6Vk ._404-module--errorLink--3fWWe{display:inline-block;margin-top:5px}</style><meta name="generator" content="Gatsby 2.19.3"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css"/><link rel="canonical" href="https://ludovicwyffels.dev/dockerSwarm-vs-kubernetes/" data-baseprotocol="https:" data-basehost="ludovicwyffels.dev"/><title data-react-helmet="true">Docker Swarm vs Kubernetes</title><link data-react-helmet="true" rel="icon" href="/static/favicon-36e47e74810a0d8c32a77f495c49cf8e.ico" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="J’ai installé Docker Swarm et Kubernetes sur deux machines virtuelles. J’ai trouvé que Docker Swarm est très facile à installer et à…"/><meta data-react-helmet="true" property="og:site_name" content="Code avec Ludo"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Docker Swarm vs Kubernetes"/><meta data-react-helmet="true" property="og:description" content="J’ai installé Docker Swarm et Kubernetes sur deux machines virtuelles. J’ai trouvé que Docker Swarm est très facile à installer et à…"/><meta data-react-helmet="true" property="og:url" content="https://ludovicwyffels.github.io/dockerSwarm-vs-kubernetes/"/><meta data-react-helmet="true" property="og:image" content="https://ludovicwyffels.github.io/static/6dc1a1b98e66073dbd7e7471a7fff24c/f9913/dockerswarm-vs-kubernetes.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2018-11-01T08:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="Kubernetes"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Docker Swarm vs Kubernetes"/><meta data-react-helmet="true" name="twitter:description" content="J’ai installé Docker Swarm et Kubernetes sur deux machines virtuelles. J’ai trouvé que Docker Swarm est très facile à installer et à…"/><meta data-react-helmet="true" name="twitter:url" content="https://ludovicwyffels.github.io/dockerSwarm-vs-kubernetes/"/><meta data-react-helmet="true" name="twitter:image" content="https://ludovicwyffels.github.io/static/6dc1a1b98e66073dbd7e7471a7fff24c/f9913/dockerswarm-vs-kubernetes.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="ludo"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Kubernetes"/><meta data-react-helmet="true" property="og:image:width" content="750"/><meta data-react-helmet="true" property="og:image:height" content="422"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-138733938-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-138733938-1', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link as="script" rel="preload" href="/webpack-runtime-f15c3b12529537089e98.js"/><link as="script" rel="preload" href="/app-b72df03e65626e48661d.js"/><link as="script" rel="preload" href="/styles-a8b87cae742df2ef8275.js"/><link as="script" rel="preload" href="/commons-a3aa5948ddf737d31724.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-1a8fa4e63743635650d5.js"/><link as="fetch" rel="preload" href="/page-data/dockerSwarm-vs-kubernetes/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion-css="0"></style><div class="progress-read-module--container--Xf3HB" style="display:none"><div class="progress-read-module--bar--2CgAA" style="width:0%"></div></div><div class="wrapper-module--container--39cxo PostTemplate"><style data-emotion-css="7n4c3k">.css-7n4c3k{position:relative;padding:0 4vw;position:relative;padding-top:12px;padding-bottom:12px;color:#fff;background:#0a0b0c no-repeat center center;background-size:cover;}</style><header class="css-7n4c3k"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><nav class="false sitenav-module--container--2f7Mf"><div class="sitenav-module--SiteNavLeft--37Wnn"><a class="site-nav-logo siteNavLogo-module--container--2Eieh" href="/"><img src="/static/7d3993478cb88fc18c502e8e98013386/497c6/logo.png" alt="Code avec Ludo"/></a><ul class="sitenav-module--NavStyles--gmMAk" role="menu"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/node-js/">Node.js</a></li><li role="menuitem"><a href="/tags/dev-ops/">DevOps</a></li><li role="menuitem"><a href="/about">About</a></li></ul></div><div class="sitenav-module--SiteNavRight--2MOoa"><div class="sitenav-module--SocialLinks--3bj4A"><a class="shared-module--SocialLink--Ya1gh" href="https://github.com/ludovicwyffels" title="Github" target="_blank" rel="noopener noreferrer"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Github</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></div></nav></div></header><style data-emotion-css="9696is">.css-9696is{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 4vw;}</style><main id="site-main" class="site-main css-9696is"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><style data-emotion-css="1cj30xk">.css-1cj30xk{position:relative;z-index:50;}</style><article class="css-1cj30xk"><header class="PostFullHeader"><section class="PostFullMeta"><time dateTime="2018-11-01T08:00:00.000Z" class="PostFullMetaDate">1 November 2018</time><span class="DateDivider">/</span><a href="/tags/kubernetes/">Kubernetes</a><style data-emotion-css="bosr71">.css-bosr71{width:10px;}</style><div class="css-bosr71"></div><a href="/tags/docker/">Docker</a><div class="css-bosr71"></div></section><h1 class="PostFullTitle">Docker Swarm vs Kubernetes</h1></header><figure class="PostFullImage"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:56.266666666666666%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAB6OtBGFa2/8QAGhABAAIDAQAAAAAAAAAAAAAAAQACAxESE//aAAgBAQABBQJyW7vkSe1iaNoIBU//xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAIAQMBAT8Bia//xAAZEQABBQAAAAAAAAAAAAAAAAAAAQIRElH/2gAIAQIBAT8BlCzcP//EABoQAAMBAAMAAAAAAAAAAAAAAAABESESMUH/2gAIAQEABj8CU6MU30k5FhGRKH//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhQTFRYf/aAAgBAQABPyHjwtkhQI2lwNVg2E1C5WkTplYQ8n//2gAMAwEAAgADAAAAEAjv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhYf/aAAgBAwEBPxAQO3S//8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxDsOTD/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUFx/9oACAEBAAE/EEhJlEVOtxTFYSS051ExT5vZ7lQoemZMl9hTc8RsE3//2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/6dc1a1b98e66073dbd7e7471a7fff24c/f9913/dockerswarm-vs-kubernetes.jpg 750w" sizes="(max-width: 750px) 100vw, 750px" /><img loading="lazy" sizes="(max-width: 750px) 100vw, 750px" srcset="/static/6dc1a1b98e66073dbd7e7471a7fff24c/f9913/dockerswarm-vs-kubernetes.jpg 750w" src="/static/6dc1a1b98e66073dbd7e7471a7fff24c/f9913/dockerswarm-vs-kubernetes.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><section class="post-full-content PostFullContent"><div><p>J’ai installé Docker Swarm et Kubernetes sur deux machines virtuelles. J’ai trouvé que Docker Swarm est très facile à installer et à configurer, alors que Kubernetes est un peu plus difficile à installer mais reste simple à utiliser.</p>
<h2>Introduction</h2>
<p>Cela fait des années que je veux essayer des conteneurs: la configuration manuelle de serveurs prend du temps, n’est pas reproductible et risque d’introduire des différences entre mon environnement de test local et la production. Les containers offrent une solution à tous ces problèmes et facilite beaucoup l’exécution d’instances supplémentaires d’une application. Cela peut rendre un service plus évolutif.</p>
<p>Pour exécuter un service évolutif, vous avez besoin d’un moteur Container Orchestration qui répartit la charge en exécutant des conteneurs sur plusieurs ordinateurs et en envoyant des demandes à chaque instance de l’application. <a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="nofollow noopener noreferrer">Docker Swarm</a> et <a href="https://kubernetes.io/" target="_blank" rel="nofollow noopener noreferrer">Kubernetes</a> sont deux moteurs d’orchestration populaires. J’ai décidé d’essayer les deux en déployant la même application avec chaque moteur.</p>
<h2>Création du conteneur</h2>
<p>J’ai décidé d’utiliser Samba pour l’application de test. <a href="https://fr.wikipedia.org/wiki/Samba_(informatique)" target="_blank" rel="nofollow noopener noreferrer">Samba</a> est un serveur de fichiers populaire permettant aux ordinateurs Linux de partager des fichiers avec des ordinateurs Windows. Il communique via TCP sur le port 445.</p>
<p>C’est la première fois que je travaille avec Docker, j’ai donc modifié un <a href="https://github.com/crops/samba" target="_blank" rel="nofollow noopener noreferrer">conteneur Samba standard</a> afin d’inclure le fichier que je voulais servir.</p>
<p>Après le <a href="https://docs.docker.com/get-started/part2/" target="_blank" rel="nofollow noopener noreferrer">tutoriel de Docker</a>, j’ai lancé manuellement le conteneur à partir de la ligne de commande pour vérifier son fonctionnement:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">docker build -t sambaonly-v1 .
docker run --init -p 445:445 -i sambaonly-v1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Et en effet, j’ai pu me connecter au serveur Samba dans le conteneur avec <a href="https://www.samba.org/samba/docs/current/man-html/smbclient.1.html" target="_blank" rel="nofollow noopener noreferrer">smbclient</a></p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">~$ smbclient \\\\localhost\\workdir -U %
WARNING: The &quot;syslog&quot; option is deprecated
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; ls
.                          D        0  Fri Oct  5 12:14:43 2018
..                         D        0  Sun Oct  7 22:09:49 2018
hello.txt                  N       13  Fri Oct  5 11:17:34 2018

102685624 blocks of size 1024. 72252576 blocks available
smb: \&gt;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Maintenant que je sais que le conteneur fonctionne, je peux l’utiliser dans un moteur d’orchestration de conteneur.</p>
<h2>Préparer les machines virtuelles</h2>
<p>J’ai créé deux machines virtuelles exécutant Ubuntu 18.04 dans VirtualBox.</p>
<p>J’ai ajouté une carte réseau supplémentaire à chaque machine virtuelle, configurée pour le réseau interne afin qu’ils puissent se parler:</p>
<p><a href="https://cdn-images-1.medium.com/max/1600/1*chCjRdcU_mV9ioAyQ7oB5A.png" target="_blank" rel="nofollow noopener noreferrer">https://cdn-images-1.medium.com/max/1600/1*chCjRdcU_mV9ioAyQ7oB5A.png</a></p>
<p>Ensuite, j’ai <a href="https://www.virtualbox.org/manual/ch08.html#vboxmanage-dhcpserver" target="_blank" rel="nofollow noopener noreferrer">ajouté un serveur DHCP</a> pour attribuer des adresses IP à chaque machine virtuelle:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">VBoxManage dhcpserver add --netname intnet --ip 10.133.7.99 --netmask 255.255.255.0 --lowerip 10.133.7.100 --upperip 10.133.7.200 --enable</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Les machines virtuelles peuvent désormais communiquer entre elles. Cela donne à ma machine virtuelle principale l’adresse IP 10.133.7.100.</p>
<h2>Docker Swarm</h2>
<p>Docker Swarm est un moteur d’orchestration de conteneur intégré à Docker lui-même. Quand je l’ai trouvé, j’étais sceptique: pourquoi l’utiliser à la place des Kubernetes, beaucoup plus célèbres? La réponse: Docker Swarm est axé sur la simplicité par rapport à la configuration. Cela ressemblait à l’iOS des moteurs d’orchestration de conteneurs par rapport à l’Android de Kubernetes.</p>
<h3>Mise en place de Docker Swarm</h3>
<p>Docker Swarm est facile à installer: il suffit d’installer Docker et docker-compose. Ensuite, après le <a href="https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/" target="_blank" rel="nofollow noopener noreferrer">tutoriel officiel</a>, j’ai exécuté la seule commande nécessaire pour démarrer le noeud du gestionnaire, en transmettant l’adresse IP de la machine virtuelle actuelle:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">~$ docker swarm init --advertise-addr 10.133.7.100 
Swarm initialized: current node (abcdefghijklmnopqrstuvwxy) is now a manager.

To add a worker to this swarm, run the following command:

docker swarm join --token SWMTKN-1-abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwx-abcdefghijklmnopqrstuvwxy 10.133.7.100:2377

To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>C’est tout: le moteur Docker tourne maintenant en mode Swarm.</p>
<p>Ensuite, j’ai déployé un registre privé Docker afin que les autres noeuds puissent extraire des images, en suivant à nouveau les <a href="https://docs.docker.com/engine/swarm/stack-deploy/#set-up-a-docker-registry" target="_blank" rel="nofollow noopener noreferrer">instructions d’installation</a>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">docker service create --name registry --publish published=5000,target=5000 registry:2</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<h2>Déploiement de l’application</h2>
<p>Docker Swarm utilise le format <a href="https://docs.docker.com/compose/overview/" target="_blank" rel="nofollow noopener noreferrer">Docker Compose</a> pour spécifier les conteneurs à exécuter et les ports qu’ils exportent.</p>
<p>Après le <a href="https://docs.docker.com/compose/gettingstarted/#step-3-define-services-in-a-compose-file" target="_blank" rel="nofollow noopener noreferrer">didacticiel Docker Compose</a>, j’ai créé ce manifeste Docker Compose:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">version: &#x27;3.7&#x27;
services:
  samba:
    image: 127.0.0.1:5000/samba
    build: sambaonly
    init: true
    stdin_open: true
    ports:
      - &quot;445:445&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Cela indique à Docker Compose de créer le fichier Docker à partir du répertoire «sambaonly», d’upload/pull les conteneurs construits vers mon registre privé nouvellement configuré et d’exporter le port 445 à partir du conteneur.</p>
<p>Pour déployer ce manifeste, j’ai suivi le tutoriel de Docker Swarm. J’ai d’abord utilisé Docker Compose pour créer et télécharger le conteneur dans le registre privé:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">docker-compose build
docker-compose push</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Une fois le conteneur créé, l’application peut être déployée avec la commande <code>docker stack deploy</code>, en spécifiant le nom du service:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ docker stack deploy --compose-file docker-compose.yml samba-swarm
Ignoring unsupported options: build
Creating network samba-swarm_default
Creating service samba-swarm_samba
~/Documents/docker$ docker stack services samba-swarm
ID           NAME                  MODE       REPLICAS IMAGE PORTS
yg8x8yfytq5d samba-swarm_samba     replicated 1/1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Et maintenant, l’application fonctionne sous Samba Swarm. J’ai testé qu’il fonctionne toujours avec <code>smbclient</code>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">~$ smbclient \\\\localhost\\workdir -U %
WARNING: The &quot;syslog&quot; option is deprecated
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; ls
.                          D        0  Fri Oct  5 12:14:43 2018
..                         D        0  Sun Oct  7 22:09:49 2018
hello.txt                  N       13  Fri Oct  5 11:17:34 2018

102685624 blocks of size 1024. 72252576 blocks available
smb: \&gt;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Ajout d’un autre noeud</h2>
<p>Ici encore, la simplicité de Docker Swarm transparaît. Pour installer un deuxième noeud, j’ai d’abord installé Docker, puis exécuté la commande que Docker m’avait donnée lors de l’installation de swarm:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ralph:~# docker swarm join --token SWMTKN-1-abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwx-abcdefghijklmnopqrstuvwxy 10.133.7.100:2377

This node joined a swarm as a worker.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Pour exécuter mon application sur les deux nœuds, j’ai exécuté la commande scale de Docker Swarm sur le nœud du gestionnaire:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">~/Documents/docker$ docker service scale samba-swarm_samba=2
samba-swarm_samba scaled to 2 overall progress: 2 out of 2 tasks
1/2: running [==================================================&gt;]
2/2: running [==================================================&gt;] verify: Service converged</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div>
<p>Sur le nouveau noeud de travail, le nouveau conteneur est apparu:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ralph:~# docker container ls
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
7539549283bd 127.0.0.1:5000/samba:latest &quot;/usr/sbin/smbd -FS …&quot; 20 seconds ago Up 18 seconds 445/tcp samba-swarm_samba.1.abcdefghijklmnopqrstuvwxy</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<h2>Test de l’équilibrage de charge (load balancing)</h2>
<p>Docker Swarm comprend un load balancing intégré appelé routeur Mesh: les demandes adressées à l’adresse IP de tout noeud sont automatiquement réparties sur l’ensemble de Swarm.</p>
<p>Pour tester cela, j’ai établi 1000 connexions à l’adresse IP du noeud du gestionnaire avec <code>nc</code>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">print(&quot;#!/bin/bash&quot;)
for i in range(1000):
    print(&quot;nc -v 10.133.7.100 445 &amp;&quot;)
print(&quot;wait&quot;)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div>
<p>Samba génère un nouveau processus pour chaque connexion. Par conséquent, si l’équilibrage de la charge fonctionne, je m’attendrais à environ 500 processus Samba sur chaque noeud de Swarm. C’est bien ce qui se passe.</p>
<p>Après avoir exécuté le script pour établir 1000 connexions, j’ai vérifié le nombre de processus Samba sur le gestionnaire (10.133.7.100):</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">~$ ps -ef|grep smbd|wc
506 5567 42504</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Et sur le noeud travailleur (10.133.7.50):</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ralph:~# ps -ef|grep smbd|wc
506 3545 28862</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Ainsi, exactement la moitié des demandes adressées au noeud de gestion ont été redirigées de manière magique vers le premier noeud de travail, ce qui montre que le cluster Swarm fonctionne correctement.</p>
<p>J’ai trouvé que Docker Swarm était très facile à installer et il fonctionnait bien sous une charge (légère).</p>
<h1>Kubernetes</h1>
<p>Kubernetes est en train de devenir l’industrie standard de l’orchestration de conteneurs. C’est beaucoup plus flexible que Docker Swarm, mais cela rend plus difficile la configuration. Je l’ai trouvé pas si difficile, cependant.</p>
<p>Pour cette expérience, au lieu d’utiliser un environnement de développement Kubernetes pré-construit tel que <a href="https://kubernetes.io/docs/setup/minikube/" target="_blank" rel="nofollow noopener noreferrer"><code>minikube</code></a>, j’ai décidé de configurer mon propre cluster, à l’aide de Kubadm, WeaveNet et MetalLB.</p>
<h2>Mise en place de Kubernetes</h2>
<p>Kubernetes à la réputation d’être difficile à configurer: vous avez entendu le processus complexe en plusieurs étapes du didacticiel <a href="https://github.com/kelseyhightower/kubernetes-the-hard-way" target="_blank" rel="nofollow noopener noreferrer">Kubernetes the Hard Way</a></p>
<p>Les développeurs de Kubernetes ont simplifié l’utilisation de <code>kubeadm</code>.</p>
<p>Malheureusement, Kubernetes étant si flexible, le <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/" target="_blank" rel="nofollow noopener noreferrer">tutoriel sur <code>kubeadm</code></a> ne couvre pas encore quelques étapes. J’ai donc dû déterminer le réseau et l’équilibreur de charge à utiliser moi-même.</p>
<p>Voici ce que j’ai fini par lancer.</p>
<p>J’ai d’abord dû désactiver Swap sur chaque noeud:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">root@dora:~# swapoff -a
root@dora:~# systemctl restart kubelet.service</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Ensuite, j’ai configuré le noeud maître (10.133.7.100) avec la commande suivante:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">sudo kubeadm init --pod-network-cidr=10.134.0.0/16 --apiserver-advertise-address=10.133.7.100 --apiserver-cert-extra-sans=10.0.2.15</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>L’option <code>--pod-network-cidr</code> attribue une adresse réseau interne à tous les noeuds du réseau, utilisée pour les communications internes dans Kubernetes.</p>
<p>Les options <code>--apiserver-advertise-address</code> et <code>--apiserver-cert-extra-sans</code> ont été ajoutées à cause d’un problème particulier dans l’installation de VirtualBox: la carte virtuelle principale des machines virtuelles (IP 10.0.2.15) ne peut accéder qu’à l’Internet. J’ai dû préciser que d’autres noeuds doivent accéder au maître à l’aide de l’adresse IP 10.133.7.100.</p>
<p>Après avoir exécuté cette commande, Kubeadm a affiché quelques instructions:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">Your Kubernetes master has initialized successfully!
To start using your cluster, you need to run the following as a regular user:

mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:
https://kubernetes.io/docs/concepts/cluster-administration/addons/
You can now join any number of machines by running the following on each node as root:

kubeadm join 10.133.7.100:6443 --token abcdefghijklmnopqrstuvw --discovery-token-ca-cert-hash sha256:abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijkl</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>J’ai raté ces instructions la première fois et je n’ai donc pas terminé la configuration. J’ai ensuite passé une semaine entière à me demander pourquoi aucun de mes conteneurs ne fonctionnait!</p>
<p>Après avoir enfin lu les instructions, je devais faire trois autres choses:</p>
<ul>
<li>Tout d’abord, je devais exécuter les commandes données par <code>kubeadm</code> pour configurer un fichier de configuration.</li>
<li>Par défaut, Kubernetes ne planifie pas les conteneurs sur le nœud maître, mais uniquement sur les noeuds de travail. Comme je n’ai qu’un seul noeud pour le moment, le <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#master-isolation" target="_blank" rel="nofollow noopener noreferrer">tutoriel</a> m’a montré cette commande pour autoriser l’exécution de conteneurs sur le seul noeud:</li>
</ul>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">kubectl taint node --all node-role.kubernetes.io/master-</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<ul>
<li>Enfin, je devais choisir un réseau pour mon cluster.</li>
</ul>
<h2>Installation du réseau</h2>
<p>Contrairement à Docker Swarm, qui doit utiliser sa propre couche de routage maillé pour la mise en réseau et l’équilibrage de la charge, Kubernetes offre de multiples choix pour la mise en réseau et l’équilibrage de la charge.</p>
<p>Le composant de mise en réseau permet aux conteneurs de communiquer en interne. J’ai fait des recherches et <a href="https://www.objectif-libre.com/en/blog/2018/07/05/k8s-network-solutions-comparison/" target="_blank" rel="nofollow noopener noreferrer">cet article comparatif</a> suggérait Flannel ou WeaveNet, car ils sont faciles à configurer. Ainsi, j’ai décidé d’essayer WeaveNet. J’ai suivi les instructions du <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network" target="_blank" rel="nofollow noopener noreferrer">didacticiel kubeadm</a> pour appliquer la configuration de WeaveNet:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">kubectl apply -f &quot;https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d &#x27;\n&#x27;)&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Ensuite, pour permettre aux conteneurs de communiquer avec le monde extérieur, j’ai besoin d’un équilibreur de charge. D’après mes recherches, j’ai eu l’impression que la plupart des implémentations de l’équilibreur de charge Kubernetes se concentrent uniquement sur les services HTTP, et non sur le TCP brut. Heureusement, j’ai trouvé MetalLB, un projet récent (vieux d’un an) qui comble cette lacune.</p>
<p>Pour installer MetalLB, j’ai suivi son <a href="https://metallb.universe.tf/tutorial/layer2/" target="_blank" rel="nofollow noopener noreferrer">didacticiel de mise en route</a> et j’ai tout d’abord déployé MetalLB:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yaml</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Ensuite, j’ai attribué la plage d’adresses IP 10.133.7.200 à 10.133.7.230 à MetalLB, en créant et en appliquant <a href="https://gist.github.com/ludovicwyffels/917a399b423868f9415e6c384138e550" target="_blank" rel="nofollow noopener noreferrer">ce fichier de configuration</a>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">kubectl apply -f metallb-config.yaml</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<h2>Déploiement de l’application</h2>
<p>Les fichiers de configuration du service de Kubernetes sont plus détaillés que ceux de Docker Swarm, en raison de la flexibilité de Kubernetes. En plus de spécifier le conteneur à exécuter, comme Docker Swarm, je dois spécifier comment chaque port doit être traité.</p>
<p>Après avoir lu <a href="https://kubernetes.io/docs/tasks/run-application/run-stateless-application-deployment/" target="_blank" rel="nofollow noopener noreferrer">le tutoriel de Kubernetes</a>, j’ai proposé cette configuration de Kubernetes, composée d’un service et d’un déploiement.</p>
<p><a href="https://gist.github.com/ludovicwyffels/911bb25b611f3519745aeee0d53c6447" target="_blank" rel="nofollow noopener noreferrer">https://gist.github.com/ludovicwyffels/911bb25b611f3519745aeee0d53c6447</a></p>
<p>Ce <a href="https://kubernetes.io/docs/concepts/services-networking/#defining-a-service" target="_blank" rel="nofollow noopener noreferrer">service</a> demande à Kubernetes d’exporter le port TCP 445 de nos conteneurs Samba vers l’équilibreur de charge.</p>
<p><a href="https://gist.github.com/ludovicwyffels/41022da159c539e45027c68776f459d8" target="_blank" rel="nofollow noopener noreferrer">https://gist.github.com/ludovicwyffels/41022da159c539e45027c68776f459d8</a></p>
<p>Cet objet <code>Deployment</code> indique à Kubernetes d’exécuter mon conteneur et d’exporter un port que le service doit gérer.</p>
<p>Notez le <code>replicas: 1</code> - c’est le nombre d’instances du conteneur que je veux exécuter.</p>
<p>Je peux déployer ce service sur Kubernetes en utilisant <code>kubectl apply</code>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@dora:~/Documents/docker$ kubectl apply -f kubernetes-samba.yaml
service/samba configured
deployment.apps/samba configured</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span></span></pre></div>
<p>Et, après avoir redémarré ma machine virtuelle à quelque reprises, le déploiement a finalement commencé à fonctionner:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@dora:~/Documents/docker$ kubectl get pods
NAME                   READY STATUS  RESTARTS AGE
samba-57945b8895-dfzgl 1/1   Running 0        52m
ludo@dora:~/Documents/docker$ kubectl get service samba
NAME  TYPE         CLUSTER-IP     EXTERNAL-IP  PORT(S)       AGE
samba LoadBalancer 10.108.157.165 10.133.7.200 445:30246/TCP 91m</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Mon service est maintenant disponible sur l’adresse IP externe attribuée par MetalLB:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@dora:~$ smbclient \\\\10.133.7.200\\workdir -U %
WARNING: The &quot;syslog&quot; option is deprecated
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; ls
.                          D        0  Fri Oct  5 12:14:43 2018
..                         D        0  Sun Oct  7 22:09:49 2018
hello.txt                  N       13  Fri Oct  5 11:17:34 2018

102685624 blocks of size 1024. 72252576 blocks available
smb: \&gt;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Ajout d’un autre noeud</h2>
<p>Ajouter un autre noeud dans un cluster Kubernetes est beaucoup plus simple: il me suffisait d’exécuter la commande donnée par <code>kubeadm</code> sur le nouvel ordinateur:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@davy:~$ sudo kubeadm join 10.133.7.100:6443 --token abcdefghijklmnopqrstuvw --discovery-token-ca-cert-hash sha256:abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijkl

(snip...)

This node has joined the cluster:* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run &#x27;kubectl get nodes&#x27; on the master to see this node join the cluster.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Bizarreries de ma configuration</h2>
<p>J’ai dû faire deux changements en raison de la configuration de VirtualBox:</p>
<p>Premièrement, comme ma machine virtuelle dispose de deux cartes réseau, je dois indiquer manuellement l’adresse IP de ma machine à Kubernetes. Selon <a href="https://github.com/kubernetes/kubeadm/issues/203" target="_blank" rel="nofollow noopener noreferrer">ce problème</a>, je devais éditer</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">/etc/systemd/system/kubelet.service.d/10-kubeadm.conf</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Et changer une ligne en</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">Environment=&quot;KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml --node-ip=10.133.7.101&quot;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>avant de redémarrer Kubernetes:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">root@davy:~# systemctl daemon-reload
root@davy:~# systemctl restart kubelet.service</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>L’autre solution concerne le registre Docker: comme le nouveau noeud ne peut accéder à mon registre privé sur le noeud maître, j’ai décidé de procéder à un terrible hack et de partager le registre de mon noeud maître vers la nouvelle machine à l’aide de <code>ssh</code>:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@davy:~$ ssh dora.local -L 5000:localhost:5000</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Cela transmet le port 5000 du noeud principal, dora (qui exécute le registre Docker) à localhost, où Kubernetes peut le trouver sur cette machine.</p>
<p>En production réelle, il est probable que le registre Docker sera hébergé sur une machine distincte, afin que tous les noeuds puissent y accéder.</p>
<h2>“Scaling” de l’application</h2>
<p>Lors de la deuxième installation de l’ordinateur, j’ai modifié mon déploiement d’origine pour ajouter une autre instance de l’application:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">replicas: 2</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div>
<p>Après avoir redémarré le maître et le worker à quelques reprises, la nouvelle instance de mon application a finalement quitté le statut de <code>CreatingContainer</code> et a commencé à s’exécuter:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@dora:~/Documents/docker$ kubectl get pods
NAME                   READY STATUS  RESTARTS AGE
samba-57945b8895-dfzgl 1/1   Running 0        62m
samba-57945b8895-qhrtl 1/1   Running 0        12m</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Test de l’équilibrage de charge</h2>
<p>J’ai utilisé la même procédure pour ouvrir 1000 connexions à Samba s’exécutant sur Kubernetes. Le résultat est intéressant.</p>
<p>Master:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@dora$ ps -ef|grep smbd|wc
492 5411 41315</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Worker:</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">ludo@davy:~$ ps -ef|grep smbd|wc
518 5697 43499</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div>
<p>Kubernetes / MetalLB a également équilibré la charge sur les deux machines, mais la machine principale a eu un peu moins de connexions que le worker. Je me demande pourquoi.</p>
<p>Quoi qu’il en soit, cela montre que j’ai finalement réussi à installer Kubernetes après plusieurs détours.</p>
<h1>Comparaison et conclusion</h1>
<p><strong>Fonctionnalités communes aux deux</strong>: les deux peuvent gérer des conteneurs et gérer intelligemment les demandes d’équilibrage de charge sur la même application TCP sur deux machines virtuelles différentes. Les deux ont une bonne documentation pour la configuration initiale.</p>
<p><strong>Les atouts de Docker Swarm</strong>: une configuration simple, aucune configuration requise, une intégration étroite avec Docker.</p>
<p><strong>Les points forts de Kubernetes</strong>: composants souples, nombreuses ressources disponibles et add-ons.</p>
<p>Kubernetes vs Docker Swarm est un compromis entre simplicité et flexibilité.</p>
<p>J’ai trouvé plus facile d’installer Docker Swarm, mais je ne peux pas, par exemple, échanger l’équilibreur de charge contre un autre composant. Il n’ya aucun moyen de le configurer: je devrais <a href="https://docs.docker.com/engine/swarm/ingress/#using-the-routing-mesh" target="_blank" rel="nofollow noopener noreferrer">tout désactiver en même temps</a>.</p>
<p>Sur Kubernetes, il m’a fallu un certain temps pour trouver la bonne configuration, mais en échange, je pouvais changer certaines parties de mon cluster selon les besoins et installer facilement des add-ons, tels qu’un <a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" target="_blank" rel="nofollow noopener noreferrer">tableau de bord sophistiqué</a>.</p>
<p>Si vous voulez juste essayer Kubernetes sans toute cette configuration, je vous suggère d’utiliser <a href="https://kubernetes.io/docs/setup/minikube/" target="_blank" rel="nofollow noopener noreferrer"><code>minikube</code></a>, qui offre une machine virtuelle de cluster Kubernetes prédéfinie, aucune installation requise.</p>
<p>Enfin, je suis impressionné par le fait que les deux moteurs ont pris en charge les services TCP bruts: d’autres fournisseurs de services d’infrastructure en tant que services, tels que Heroku ou Glitch, ne prennent en charge que l’hébergement de sites Web HTTP. La disponibilité des services TCP signifie que l’on peut déployer ses propres serveurs de base de données, ses serveurs de cache et même ses serveurs Minecraft en utilisant les mêmes outils pour déployer des applications Web, faisant de la gestion de l’orchestration de conteneurs une compétence très utile.</p>
<p>En conclusion, si je construisais un cluster, j’utiliserais Docker Swarm. Si je payais quelqu’un d’autre pour construire un cluster pour moi, je demanderais Kubernetes.</p>
<h1>Ce que j’ai appris</h1>
<ul>
<li>Comment travailler avec les conteneurs Docker</li>
<li>Comment configurer un cluster Docker Swarm à deux noeuds</li>
<li>Comment configurer un cluster Kubernetes à deux noeuds et quels choix fonctionneraient pour une application basée sur TCP</li>
<li>Comment déployer une application sur Docker Swarm et Kubernetes</li>
<li>Comment réparer quoi que ce soit en redémarrant un ordinateur assez souvent, comme si je utilisais encore Windows 98</li>
<li>Kubernetes et Docker Swarm ne sont pas aussi intimidants qu’ils semblent</li>
</ul></div></section><footer class="postFullFooter-module--container--2PA5n"><section class="authorCard-module--authorCardSection--3Xspq"><style data-emotion-css="2785xc">.css-2785xc{display:block;background:#e4eaed;border-radius:100%;object-fit:cover;margin-right:15px;width:60px;height:60px;}</style><img src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo" class="css-2785xc"/><section class="authorCard-module--authorCardContent--3jBBV"><div class="authorCard-module--authorCardName--3HnMH"><a href="/author/ludo/">Ludovic Wyffels</a></div><p>Développeur senior. Fullstack + DevOps</p></section></section><div class="postFullFooterRight-module--container--1A7hv"><a class="postFullFooterRight-module--authorCardButton--2Zo5V" href="/author/ludo/">Read More</a></div></footer></article></div></main><style data-emotion-css="1x0l29j">.css-1x0l29j{position:relative;padding:0 4vw;}</style><aside class="read-next css-1x0l29j"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><div class="ReadNextFeed"><style data-emotion-css="82u30w">.css-82u30w{background-image:url(/static/9fb9647467dab072b9ebe36e9e52ae95/a41d1/blog-cover.jpg);}</style><article class="readNextCard-module--container--J4I2n css-82u30w el9ui1o0"><header class="readNextCard-module--ReadNextCardHeader--3M6PZ"><small class="readNextCard-module--ReadNextCardHeaderSitetitle--1FkpC">— <!-- -->Code avec Ludo<!-- --> —</small><h3 class="readNextCard-module--ReadNextCardHeaderTitle--3qnwx"><a href="/tags/kubernetes/">Kubernetes</a></h3></header><div class="readNextCard-module--ReadNextDivider--1WD0f"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Infinity</title><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><div class="readNextCard-module--ReadNextCardContent--phuA0"><ul><li><a aria-current="page" class="" href="/dockerSwarm-vs-kubernetes/">Docker Swarm vs Kubernetes</a></li><li><a href="/k8s-deployement-strategies/">Stratégie de déploiement de Kubernetes</a></li><li><a href="/k8s-minikube/">Configuration locale de Kubernetes avec minikube sur MacOS X</a></li></ul></div><footer class="readNextCard-module--ReadNextCardFooter--jt8zz"><a href="/tags/kubernetes/">See all 3 posts<!-- --> →</a></footer></article><article class="postCard-module--container--3MBpY post-card "><a class="post-card-image-link postCard-module--PostCardImageLink--1-_rO" href="/node-sequelize-pagination/"><div class="post-card-image postCard-module--PostCardImage--1ooSS"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.7%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABc/i1RhGH/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAMBAhEEE//aAAgBAQABBQKvRtmuqontsQqdanTwP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/Aar/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGI/8QAHBAAAQMFAAAAAAAAAAAAAAAAAAEiMQIREjLh/9oACAEBAAY/An0mV5g4bqI4k//EABoQAQACAwEAAAAAAAAAAAAAAAEAESFBUfH/2gAIAQEAAT8hKyhSrJs7VFOGpdNmVqHIjzP/2gAMAwEAAgADAAAAEOPv/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QhD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/EA//xAAfEAEAAgIABwAAAAAAAAAAAAABABEhMUFRYXGhsfD/2gAIAQEAAT8Q65gFNZ8S8YYMuKrcvBhNcPuECl5hEFdEsYiW1/O8/9k=" alt="Comment paginer des enregistrements dans MySQL avec Sequelize et Nodejs cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/e47b6c69cbe49a04cdbe6e0e621f405f/2f037/open-book.jpg 930w,
/static/e47b6c69cbe49a04cdbe6e0e621f405f/23f4e/open-book.jpg 1860w,
/static/e47b6c69cbe49a04cdbe6e0e621f405f/a41d1/open-book.jpg 2000w" sizes="(max-width: 2000px) 100vw, 2000px" /><img loading="lazy" sizes="(max-width: 2000px) 100vw, 2000px" srcset="/static/e47b6c69cbe49a04cdbe6e0e621f405f/2f037/open-book.jpg 930w,
/static/e47b6c69cbe49a04cdbe6e0e621f405f/23f4e/open-book.jpg 1860w,
/static/e47b6c69cbe49a04cdbe6e0e621f405f/a41d1/open-book.jpg 2000w" src="/static/e47b6c69cbe49a04cdbe6e0e621f405f/a41d1/open-book.jpg" alt="Comment paginer des enregistrements dans MySQL avec Sequelize et Nodejs cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content postCard-module--PostCardContent--LjkYR"><a class="postCard-module--PostCardContentLink--37umd" href="/node-sequelize-pagination/"><header><span class="postCard-module--PostCardTags--jyRjj"><span>#<!-- -->Sequelize<!-- --> </span><span>#<!-- -->Node.js<!-- --> </span></span><h2 class="postCard-module--PostCardTitle--1JrkM">Comment paginer des enregistrements dans MySQL avec Sequelize et Nodejs</h2></header><section class="postCard-module--PostCardExcerpt--3gUSF"><p>Souvent, je me trouve aux prises avec Sequelize pour trouver une réponse directe à ma requête. Récemment, je travaillais sur une application…</p></section></a><footer class="postCard-module--PostCardMeta--2EEJ7"><ul class="postCard-module--AuthorList--12tT0"><li class="postCard-module--AuthorListItem--32xbX"><div class="postCard-module--AuthorNameTooltip--1xdhE">Ludovic Wyffels</div><a class="postCard-module--StaticAvatar--3PQRl" href="/author/ludo/"><img class="postCard-module--AuthorProfileImage--31jei" src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo"/></a></li></ul><span class="postCard-module--ReadingTime--3LVUu">1<!-- --> min read</span></footer></div></article><article class="postCard-module--container--3MBpY post-card "><a class="post-card-image-link postCard-module--PostCardImageLink--1-_rO" href="/kindle/"><div class="post-card-image postCard-module--PostCardImage--1ooSS"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.66666666666667%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGa0ziTSqWf/8QAGBABAQEBAQAAAAAAAAAAAAAAAQIDACL/2gAIAQEAAQUCy0ItmMp9HVjK1mHMj3//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFH/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BV//EABsQAAIDAAMAAAAAAAAAAAAAAAABAhExEBIh/9oACAEBAAY/As8xkujuUlRnFos//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITFB/9oACAEBAAE/ISa6jh2N3hhGocLS2JPOElOjWf/aAAwDAQACAAMAAAAQ2P8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EIw//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EK2//8QAGxABAQACAwEAAAAAAAAAAAAAAREAMSFRYUH/2gAIAQEAAT8QFwmLUI775mAebFhqWTRLvCPHnyYECp4Z6B6G/HGBI1nef//Z" alt="Comment envoyer un epub vers une Kindle sans utiliser Calibre ni de cable USB ? cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/e96dc41e5ffd5680b39408b75434d7e0/2f037/kindle.jpg 930w,
/static/e96dc41e5ffd5680b39408b75434d7e0/23f4e/kindle.jpg 1860w,
/static/e96dc41e5ffd5680b39408b75434d7e0/d8255/kindle.jpg 1920w" sizes="(max-width: 1920px) 100vw, 1920px" /><img loading="lazy" sizes="(max-width: 1920px) 100vw, 1920px" srcset="/static/e96dc41e5ffd5680b39408b75434d7e0/2f037/kindle.jpg 930w,
/static/e96dc41e5ffd5680b39408b75434d7e0/23f4e/kindle.jpg 1860w,
/static/e96dc41e5ffd5680b39408b75434d7e0/d8255/kindle.jpg 1920w" src="/static/e96dc41e5ffd5680b39408b75434d7e0/d8255/kindle.jpg" alt="Comment envoyer un epub vers une Kindle sans utiliser Calibre ni de cable USB ? cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content postCard-module--PostCardContent--LjkYR"><a class="postCard-module--PostCardContentLink--37umd" href="/kindle/"><header><span class="postCard-module--PostCardTags--jyRjj"><span>#<!-- -->Kindle<!-- --> </span><span>#<!-- -->Ebook<!-- --> </span></span><h2 class="postCard-module--PostCardTitle--1JrkM">Comment envoyer un epub vers une Kindle sans utiliser Calibre ni de cable USB ?</h2></header><section class="postCard-module--PostCardExcerpt--3gUSF"><p>Si vous avez un Kindle d’Amazon, vous ne le savez peut-être pas, mais vous possédez une adresse mail ….@kindle.com qui vous permet de vous…</p></section></a><footer class="postCard-module--PostCardMeta--2EEJ7"><ul class="postCard-module--AuthorList--12tT0"><li class="postCard-module--AuthorListItem--32xbX"><div class="postCard-module--AuthorNameTooltip--1xdhE">Ludovic Wyffels</div><a class="postCard-module--StaticAvatar--3PQRl" href="/author/ludo/"><img class="postCard-module--AuthorProfileImage--31jei" src="/static/5f2c129e42248a92c87b13b4293950cf/d786d/ghost.png" alt="ludo"/></a></li></ul><span class="postCard-module--ReadingTime--3LVUu">1<!-- --> min read</span></footer></div></article></div></div></aside><footer class="outer, footer-module--siteFooter--1ncU1"><div class="inner, footer-module--content--3f5hY"><section class="copyright"><a href="/">Code avec Ludo</a> © <!-- -->2020<!-- --> </section><nav><a href="/">Latest Posts</a><a href="https://github.com/ludovicwyffels" target="_blank" rel="noopener noreferrer">Github</a></nav></div></footer></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/dockerSwarm-vs-kubernetes/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-b72df03e65626e48661d.js"],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-2640168869290a6f0d47.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-1a8fa4e63743635650d5.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-e8b5b778a3494d9f5f92.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-44214a297bcf40ccd05e.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-fa7a6c09c9cd68fb00a6.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-0a086defbb8e3ec57671.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-198f40c673b0a4bd67da.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-1a8fa4e63743635650d5.js" async=""></script><script src="/commons-a3aa5948ddf737d31724.js" async=""></script><script src="/styles-a8b87cae742df2ef8275.js" async=""></script><script src="/app-b72df03e65626e48661d.js" async=""></script><script src="/webpack-runtime-f15c3b12529537089e98.js" async=""></script></body></html>